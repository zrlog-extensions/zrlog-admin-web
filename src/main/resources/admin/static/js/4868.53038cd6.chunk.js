"use strict";(self.webpackChunkadmin_web_frontend=self.webpackChunkadmin_web_frontend||[]).push([[4868],{4868:(e,t,a)=>{a.r(t),a.d(t,{AdminPage:()=>ie,LazyWithFallbackElement:()=>le,default:()=>re});var n=a(28429),s=a(9950),l=a(63251),i=a(44669),r=a(85221),o=a(37596),d=a(38692),c=a(78816),u=a(35434),p=a(84311),m=a(82961),h=a(94916),x=a(92331),g=a(60425),j=a(46895),y=a(49495),f=a(51844),A=a(60625),v=a(42777),w=a(34143),b=a(35070),k=a(3127),C=a(45442),S=a(97554),V=a(36499),Y=a(34647),F=a(11113),z=a(16471),I=a(23236),R=a(26044),q=a(21863),D=a(44414);const M=e=>{let{data:t}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(I.A,{title:t.version}),(0,D.jsx)(z.A,{title:"",size:"small",style:{padding:8},children:(0,D.jsx)(R.A,{htmlContent:(0,q.xI)(t.changelog)})})]})};var T=a(87085),L=a(75997);const U=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,49495))),E=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,45442))),W=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,36499))),H=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,84311))),B=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,97554))),P=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,82961))),N=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,35070))),O=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,60625))),K=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,42777))),G=(0,s.lazy)(()=>a.e(6930).then(a.bind(a,46930))),X=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,38692))),Z=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,60425))),J=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,94916))),Q=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,92331))),_=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,34143))),$=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,46895))),ee=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,3127))),te=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,51844))),ae=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,87085))),ne=(0,s.lazy)(()=>a.e(6766).then(a.bind(a,86766))),se=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,75997)));function le(e){let{LazyComponent:t,FallbackComponent:a,props:n}=e;return(0,D.jsx)(s.Suspense,{fallback:(0,D.jsx)(a,{...n}),children:(0,D.jsx)(t,{...n})})}function ie(e){const{FallbackComponent:t,LazyComponent:a,props:n}=e;return(0,D.jsx)(ne,{basicUserInfo:e.props.userInfo,offline:e.props.offline,syncStaticSite:e.props.pageBuildId!==(0,F.$L)(),loading:e.props.offlineData&&!e.props.offline,fullScreen:e.props.fullScreen,children:e.props.data?(0,D.jsx)(le,{LazyComponent:a,FallbackComponent:t,props:n}):(0,D.jsx)(i.A,{})})}const re=e=>{let{offline:t,userInfo:a}=e;const z=(0,n.zy)(),I=(0,u.xx)()?(0,r.HB)():null,R=(0,r.Em)(I||(0,o.dy)(z)),q=(0,r.hS)(z),ne=(0,s.useRef)((0,F.TX)()&&(0,F.TX)().data),[le,re]=(0,s.useState)({axiosRequesting:!1,lastAxiosRequestedCacheKey:ne.current?q:"",fullScreen:R,pageBuildId:(0,F.TX)().pageBuildId}),oe=()=>{const e=(0,r.hS)(z);return(0,r.Pn)(e)},de=(0,Y.cz)(),ce=async(e,t,a)=>{const n=await(0,l.b)(e,de),{data:s,documentTitle:i,pageBuildId:d}=n;if(i&&(e=>{const t=(0,c.jY)().websiteTitle+" - "+(0,c.jY)()["admin.management"];e?(0,u.xx)()?window.document.title=e.replace(" - "+t,""):window.document.title=e:window.document.title=t})(i),(0,F.TX)().data=s,(0,o.eP)(t,s))return console.info(e+" cache hits"),void re(t=>({...t,axiosRequesting:!1,pageBuildId:d,lastAxiosRequestedCacheKey:e}));(0,r.ls)(e,s),re(()=>({axiosRequesting:!1,pageBuildId:d,lastAxiosRequestedCacheKey:e,fullScreen:(0,r.Em)((0,o.dy)(a))}))};(0,s.useEffect)(()=>{const e=(0,r.Rn)(z.pathname,z.search);if(ne.current)return(0,r.ls)(e,(0,F.TX)().data),void(ne.current=!1);const a=(0,r.Pn)(e);re(e=>({...e,axiosRequesting:!t,fullScreen:(0,r.Em)((0,o.dy)(z))})),t||ce(e,a,z).then(()=>{}).catch(()=>{re(e=>({...e,axiosRequesting:!1,fullScreen:(0,r.Em)((0,o.dy)(z))}))})},[z.pathname,z.search]);const ue=[{paths:["index","index.html",".html",""],lazy:B,fallback:S.default},{paths:["comment","comment.html"],lazy:W,fallback:V.default},{paths:["plugin","plugin.html"],lazy:H,fallback:p.default},{paths:["website","website.html"],lazy:P,fallback:m.default,props:{activeKey:"basic"}},{paths:["website/admin","website/admin.html"],lazy:P,fallback:m.default,props:{activeKey:"admin"}},{paths:["website/template","website/template.html"],lazy:P,fallback:m.default,props:{activeKey:"template"}},{paths:["website/other","website/other.html"],lazy:P,fallback:m.default,props:{activeKey:"other"}},{paths:["website/blog","website/blog.html"],lazy:P,fallback:m.default,props:{activeKey:"blog"}},{paths:["website/upgrade","website/upgrade.html"],lazy:P,fallback:m.default,props:{activeKey:"upgrade"}},{paths:["website/version","website/version.html"],lazy:M,fallback:M},{paths:["article-type","article-type.html"],lazy:N,fallback:b.default},{paths:["link","link.html"],lazy:O,fallback:A.default},{paths:["nav","nav.html"],lazy:K,fallback:v.default},{paths:["article","article.html"],lazy:_,fallback:w.default},{paths:["article-edit","article-edit.html"],lazy:U,fallback:y.default,props:{onFullScreen:()=>{re(e=>((0,r.jq)((0,o.dy)(z),!0),{...e,fullScreen:!0}))},onExitFullScreen:()=>{le.fullScreen&&re(e=>((0,r.jq)((0,o.dy)(z),!1),{...e,fullScreen:!1}))}}},{paths:["user","user.html"],lazy:$,fallback:j.default},{paths:["template-center","template-center.html"],lazy:Z,fallback:g.default},{paths:["user-update-password","user-update-password.html"],lazy:Q,fallback:x.default},{paths:["upgrade","upgrade.html"],lazy:X,fallback:d.default},{paths:["template-config","template-config.html"],lazy:J,fallback:h.default},{paths:["403","403.html"],lazy:ee,fallback:k.default,props:{code:403}},{paths:["500","500.html"],lazy:ee,fallback:k.default,props:{code:500}},{paths:["offline","offline.html"],lazy:E,fallback:C.default},{paths:["system","system.html"],lazy:te,fallback:f.default},{paths:["static-site","static-site.html"],lazy:ae,fallback:T.default},{paths:["dev","dev.html"],lazy:se,fallback:L.default}];return(0,D.jsxs)(n.BV,{children:[ue.flatMap((e,s)=>{let{paths:l,lazy:i,fallback:o,props:d={}}=e;return l.map((e,l)=>(0,D.jsx)(n.qh,{path:e,element:(0,D.jsx)(ie,{LazyComponent:i,FallbackComponent:o,props:{...d,userInfo:a,fullScreen:le.fullScreen,data:oe(),offline:t,pageBuildId:(0,r.H7)(),offlineData:!ne.current&&(!!le.axiosRequesting||le.lastAxiosRequestedCacheKey!==(0,r.hS)(z)),updateCache:(e,t)=>{(0,r.ls)(t,e)}}})},`${s}-${l}`))}),(0,D.jsx)(n.qh,{path:"*",element:(0,D.jsx)(s.Suspense,{fallback:(0,D.jsx)(i.A,{}),children:(0,D.jsx)(G,{})})})]})}},34143:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(90582),s=a(591),l=a(89636),i=a(41988),r=a(87094),o=a(46004),d=a(35621),c=a(22748),u=a(29116),p=a(44361),m=a(23072),h=a(78816),x=a(9950),g=a(51434),j=a(42074),y=a(85221),f=a(28429),A=a(39454),v=a(44414);const w=(e,t)=>{const a=new URLSearchParams(t).get("types");return e.types?e.types.map(e=>({text:e.typeName,value:e.alias,selected:!!a&&a.split(",").includes(e.alias)})):[]},b=e=>{let{data:t,offline:a}=e;const b=(0,f.zy)(),k=w(t,b.search),[C,S]=(0,x.useState)(k),V=(0,x.useRef)(!1),Y=e=>{const t=(0,v.jsx)(d.A,{icon:(0,v.jsx)(l.A,{}),closable:!1,color:(0,h.eU)(),style:{userSelect:"none"},children:e});return(0,v.jsx)("span",{style:{display:"inline-block"},children:t},"all-"+e)},F=(e,t)=>(0,v.jsxs)("span",{style:{display:"flex",gap:4,whiteSpace:"normal"},children:[e.privacy&&(0,v.jsx)(s.A,{style:{color:(0,h.eU)()}}),e.rubbish&&(0,v.jsxs)("span",{children:["[",(0,h.jY)().rubbish,"]"]}),t]});(0,x.useEffect)(()=>{V.current=!1,S(w(t,b.search))},[t]);const[z,I]=(0,x.useState)(t.key?t.key:"");return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(r.A,{gutter:[8,8],style:{paddingTop:20},children:[(0,v.jsx)(i.A,{md:14,xxl:18,sm:6,span:24,children:(0,v.jsx)(p.A,{className:"page-header",style:{marginTop:0,marginBottom:0},level:3,children:(0,h.jY)().blogManage})}),(0,v.jsx)(i.A,{md:10,xxl:6,sm:18,children:(0,v.jsx)(u.A,{disabled:a,placeholder:(0,h.jY)().searchTip,onSearch:e=>{I(e)},defaultValue:t.key,enterButton:(0,h.jY)().search,style:{maxWidth:"240px",float:"right"}})})]}),(0,v.jsx)(m.A,{}),(0,v.jsx)(g.A,{defaultPageSize:t.defaultPageSize,offline:a,datasource:t,columns:(()=>{const e={};return t.sort&&t.sort.map(t=>{const a=t.split(",");e[a[0]]="ASC"===a[1]?"ascend":"descend"}),[{title:(0,h.jY)().articleCover,dataIndex:"thumbnail",key:"thumbnail",width:t.article_thumbnail_status?108:0,render:e=>e&&e.length>0&&t.article_thumbnail_status?(0,v.jsx)(A.A,{style:{objectFit:"contain",maxHeight:108},src:e}):(0,v.jsx)(v.Fragment,{})},{title:(0,h.jY)().title,dataIndex:"title",key:"title",ellipsis:{showTitle:!1},width:300,render:(e,t)=>{const a=(0,v.jsx)(c.A,{placement:"top",title:(0,v.jsxs)("div",{children:["\u70b9\u51fb\u67e5\u770b\u300a",(0,v.jsx)("span",{dangerouslySetInnerHTML:{__html:e}}),"\u300b"]}),children:(0,v.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},dangerouslySetInnerHTML:{__html:e}})});return t.url.includes("previewMode")?F(t,(0,v.jsx)(j.N_,{to:t.url,children:a})):F(t,(0,v.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:t.url,children:a}))}},{title:(0,h.jY)().tag,dataIndex:"keywords",key:"keywords",width:150,render:e=>e?(0,v.jsx)(o.A,{size:[0,8],wrap:!0,children:e.split(",").map(Y)}):null},{title:(0,h.jY)().type,key:"typeName",dataIndex:"typeName",width:100,filters:C,filterMultiple:!1,filteredValue:C.filter(e=>e.selected).map(e=>e.value),onFilter:e=>(C.filter(e=>e.selected).map(e=>e.value).includes(e)||(((e,t)=>{console.log(e),C.forEach(a=>{a.value===e?a.selected=t:a.selected=!1}),S(C)})(e,!0),(()=>{if(V.current)return;V.current=!0;const e=[];t.sort.forEach(t=>{e.push("sort="+encodeURIComponent(t))});const a=b.search.includes("sort=")?"&":"";b.pathname=b.pathname+"?types="+encodeURIComponent(C.filter(e=>e.selected).map(e=>e.value).join(","))+"&"+e.join("&")+a})()),!0)},{title:(0,h.jY)().viewCount,key:"click",dataIndex:"click",width:100,sorter:!0,sortDirections:["descend","ascend"],sortOrder:e.click},{title:(0,h.jY)().commentAble,key:"canComment",dataIndex:"canComment",render:e=>e?(0,h.jY)().yes:(0,h.jY)().no,width:80},{title:(0,h.jY)().commentSize,key:"commentSize",dataIndex:"commentSize",width:100,sorter:!0,sortDirections:["descend","ascend"],sortOrder:e.commentSize},{title:(0,h.jY)().createTime,key:"releaseTime",dataIndex:"releaseTime",width:120,sorter:!0,sortDirections:["ascend","descend"],sortOrder:e.releaseTime},{title:(0,h.jY)().lastUpdateDate,key:"lastUpdateDate",dataIndex:"lastUpdateDate",width:120,sorter:!0,sortDirections:["ascend","descend"],sortOrder:e.lastUpdateDate}]})(),editBtnRender:e=>(0,v.jsx)(j.N_,{to:(0,h.dW)("/article-edit?id="+e),children:(0,v.jsx)(n.A,{style:{color:(0,h.eU)()}})}),deleteSuccessCallback:e=>{(0,y.f6)((0,h.dW)("/article-edit?id="+e))},deleteApi:"/api/admin/article/delete",searchKey:z})]})}},35070:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(78816),s=a(51434),l=a(9950),i=a(65957),r=a(58755),o=a(65455),d=a(57686),c=a(41988),u=a(62618),p=a(66577),m=a(98706),h=a(34647),x=a(44414);const g={labelCol:{span:4},wrapperCol:{span:20}},j=e=>{let{addSuccessCall:t,offline:a}=e;const[s,j]=(0,l.useState)(!1),[y,f]=(0,l.useState)(),[A,v]=i.Ay.useMessage({maxCount:3}),w=(0,h.cz)();return(0,x.jsxs)(x.Fragment,{children:[v,(0,x.jsx)(r.Ay,{type:"primary",disabled:a,onClick:()=>j(!0),style:{marginBottom:8},children:(0,n.jY)().add}),(0,x.jsx)(o.A,{title:(0,n.jY)().add,open:s,onOk:()=>{w.post("/api/admin/type/add",y).then(async e=>{let{data:a}=e;a.error?await A.error(a.message):0===a.error&&(j(!1),t())})},onCancel:()=>j(!1),children:(0,x.jsxs)(d.A,{onValuesChange:(e,t)=>{f(t)},...g,children:[(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)()["admin.type.manage"],style:{marginBottom:8},name:"typeName",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().alias,style:{marginBottom:8},name:"alias",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().introduction,style:{marginBottom:8},name:"remark",rules:[{required:!0,message:""}],children:(0,x.jsx)(m.A,{})})})})]})})]})};var y=a(90582),f=a(42074);const A={labelCol:{span:4},wrapperCol:{span:20}},v=e=>{let{record:t,editSuccessCall:a,offline:s}=e;const[r,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(t),[w,b]=i.Ay.useMessage({maxCount:3}),k=(0,h.cz)();return(0,l.useEffect)(()=>{v(t)},[t]),(0,x.jsxs)(x.Fragment,{children:[b,(0,x.jsx)(f.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),s||g(!0)},children:(0,x.jsx)(y.A,{style:{color:(0,n.eU)()}})}),(0,x.jsx)(o.A,{title:(0,n.jY)().edit,open:r,onOk:()=>{k.post("/api/admin/type/update",j).then(async e=>{let{data:t}=e;t.error?await w.error(t.message):0===t.error&&(g(!1),a&&a())})},onCancel:()=>g(!1),children:(0,x.jsxs)(d.A,{initialValues:j,onValuesChange:(e,t)=>{v(t)},...A,children:[(0,x.jsx)(d.A.Item,{name:"id",style:{display:"none"},children:(0,x.jsx)(u.A,{hidden:!0})}),(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)()["admin.type.manage"],style:{marginBottom:8},name:"typeName",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().alias,style:{marginBottom:8},name:"alias",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(p.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().introduction,style:{marginBottom:8},name:"remark",rules:[{required:!0,message:""}],children:(0,x.jsx)(m.A,{})})})})]})})]})};var w=a(23236);const b=e=>{let{data:t,offline:a}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w.A,{title:(0,n.jY)()["admin.type.manage"]}),(0,x.jsx)(s.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,n.jY)()["admin.type.manage"],dataIndex:"typeName",key:"typeName",width:240,render:(e,t)=>(0,x.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:t.url,children:e})},{title:(0,n.jY)().alias,dataIndex:"alias",key:"alias",width:120},{title:(0,n.jY)().introduction,key:"remark",dataIndex:"remark",width:240,render:e=>(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},{title:(0,n.jY)().articleSize,dataIndex:"amount",key:"amount",width:80}],addBtnRender:e=>(0,x.jsx)(j,{offline:a,addSuccessCall:e}),editBtnRender:(e,t,n)=>(0,x.jsx)(v,{offline:a,record:t,editSuccessCall:n}),datasource:t,deleteApi:"/api/admin/type/delete"})]})}},36499:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(78816),s=a(51434),l=a(98706),i=a(23236),r=a(44414);const o=e=>{let{data:t,offline:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:(0,n.jY)()["admin.comment.manage"]}),(0,r.jsx)(s.A,{defaultPageSize:10,offline:a,datasource:t,columns:[{title:(0,n.jY)().content,dataIndex:"userComment",key:"userComment",width:600,render:e=>(0,r.jsx)(l.A,{autoSize:{minRows:1,maxRows:6},style:{border:"none",minWidth:300},readOnly:!0,value:e})},{title:(0,n.jY)().nickName,dataIndex:"userName",key:"userName"},{title:(0,n.jY)().commentUserHome,key:"userHome",dataIndex:"userHome"},{title:"IP",key:"userIp",dataIndex:"userIp"},{title:(0,n.jY)().email,key:"userMail",dataIndex:"userMail"},{title:(0,n.jY)().commentDate,key:"commTime",dataIndex:"commTime"}],deleteApi:"/api/admin/comment/delete"})]})}},37838:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(46740),s=a(34647),l=a(78816),i=a(44414);const r=e=>{let{children:t,style:a,action:r,accept:o,name:d,onSuccess:c,disabled:u,onProgress:p,onError:m,getContainer:h}=e;const x=(0,s.cz)(h);return(0,i.jsx)(n.A,{disabled:u,multiple:!1,accept:o,showUploadList:!1,customRequest:async e=>{const{file:t}=e,a=new FormData;a.append(d,t);try{const{data:e}=await x.post(r,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let{total:t,loaded:a}=e;if(t){const e=Math.round(a/t*100);p&&p(e)}}});if(e.error)return void(m&&m(new Error("upload error -> "+e.message)));c&&(e.data.url=(0,l.A_)(e.data.url),c(e))}catch(n){console.error(n),m&&m(n)}},style:a,children:t})}},42777:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(51434),s=a(78816),l=a(9950),i=a(65957),r=a(58755),o=a(65455),d=a(57686),c=a(41988),u=a(62618),p=a(16738),m=a(66577),h=a(34647),x=a(44414);const g={labelCol:{span:4},wrapperCol:{span:20}},j=e=>{let{addSuccessCall:t,offline:a}=e;const[n,j]=(0,l.useState)(!1),[y,f]=(0,l.useState)(),[A,v]=i.Ay.useMessage({maxCount:3}),w=(0,h.cz)();return(0,x.jsxs)(x.Fragment,{children:[v,(0,x.jsx)(r.Ay,{type:"primary",disabled:a,onClick:()=>j(!0),style:{marginBottom:8},children:(0,s.jY)().add}),(0,x.jsx)(o.A,{title:(0,s.jY)().add,open:n,onOk:()=>{w.post("/api/admin/nav/add",y).then(async e=>{let{data:a}=e;a.error?await A.error(a.message):0===a.error&&(j(!1),t())})},onCancel:()=>j(!1),children:(0,x.jsxs)(d.A,{onValuesChange:(e,t)=>{f(t)},...g,children:[(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.nav.name"],style:{marginBottom:8},name:"navName",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})})]})})]})};var y=a(90582),f=a(42074);const A={labelCol:{span:4},wrapperCol:{span:20}},v=e=>{let{record:t,editSuccessCall:a,offline:n}=e;const[r,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(t),[w,b]=i.Ay.useMessage({maxCount:3}),k=(0,h.cz)();return(0,l.useEffect)(()=>{v(t)},[t]),(0,x.jsxs)(x.Fragment,{children:[b,(0,x.jsx)(f.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),n||g(!0)},children:(0,x.jsx)(y.A,{style:{color:(0,s.eU)()}})}),(0,x.jsx)(o.A,{title:(0,s.jY)().edit,open:r,onOk:()=>{k.post("/api/admin/nav/update",j).then(async e=>{let{data:t}=e;t.error?await w.error(t.message):0===t.error&&(g(!1),a&&a())})},onCancel:()=>g(!1),children:(0,x.jsxs)(d.A,{initialValues:j,onValuesChange:(e,t)=>{v(t)},...A,children:[(0,x.jsx)(d.A.Item,{name:"id",style:{display:"none"},children:(0,x.jsx)(u.A,{hidden:!0})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.nav.name"],style:{marginBottom:8},name:"navName",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})})]})})]})};var w=a(23236);const b=e=>{let{data:t,offline:a}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w.A,{title:(0,s.jY)()["admin.nav.manage"]}),(0,x.jsx)(n.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,s.jY)()["admin.nav.manage"],dataIndex:"url",width:240,key:"url",render:(e,t)=>(0,x.jsx)("a",{style:{display:"inline"},rel:"noopener noreferrer",target:"_blank",href:t.jumpUrl,children:e})},{title:(0,s.jY)()["admin.nav.name"],dataIndex:"navName",key:"navName",width:240},{title:(0,s.jY)().order,key:"sort",dataIndex:"sort",width:60}],addBtnRender:e=>(0,x.jsx)(j,{offline:a,addSuccessCall:e}),editBtnRender:(e,t,n)=>(0,x.jsx)(v,{offline:a,record:t,editSuccessCall:n}),datasource:t,deleteApi:"/api/admin/nav/delete"})]})}},44669:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(29008),s=a(71420),l=a(44414);const i=()=>(0,l.jsx)(s.A,{delay:200,style:{position:"fixed",top:80,right:24},indicator:(0,l.jsx)(n.A,{style:{fontSize:24},spin:!0})})},45442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(3127),s=a(44414);const l=()=>(0,s.jsx)(n.default,{data:{message:"Network offline"},code:"500"})},46895:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(9950),s=a(23072),l=a(57686),i=a(58755),r=a(62618),o=a(65957),d=a(66577),c=a(55352),u=a(39454),p=a(78816),m=a(34647),h=a(37838),x=a(23236),g=a(44414);const j={labelCol:{span:8},wrapperCol:{span:16}},y=e=>{let{data:t,offline:a}=e;const[y,f]=(0,n.useState)(t),[A,v]=o.Ay.useMessage({maxCount:3}),w=e=>{f({...y,...e})},b=(0,m.cz)();return(0,g.jsxs)(g.Fragment,{children:[v,(0,g.jsx)(x.A,{title:(0,p.jY)()["admin.user.info"]}),(0,g.jsx)(d.A,{children:(0,g.jsx)(c.A,{style:{maxWidth:600},xs:24,children:(0,g.jsxs)(l.A,{onFinish:()=>{b.post("/api/admin/user/update",y).then(async e=>{let{data:t}=e;t.error?await A.error(t.message):0===t.error&&await A.success(t.message)})},initialValues:y,onValuesChange:(e,t)=>w(t),...j,children:[(0,g.jsx)(l.A.Item,{label:(0,p.jY)().userName,name:"userName",rules:[{required:!0}],children:(0,g.jsx)(r.A,{})}),(0,g.jsx)(l.A.Item,{name:"email",label:(0,p.jY)().email,children:(0,g.jsx)(r.A,{type:"email"})}),(0,g.jsx)(l.A.Item,{label:(0,p.jY)().headPortrait,rules:[{required:!0}],children:(0,g.jsx)(h.A,{style:{width:"128px",height:"128px"},onSuccess:e=>{return t=e,void w({...y,header:t.data.url});var t},onError:e=>{A.error(e.message)},name:"imgFile",action:"/api/admin/upload?dir=image",children:(0,g.jsx)(u.A,{fallback:p.Ay.getFillBackImg(),preview:!1,height:128,width:128,style:{borderRadius:8,objectFit:"cover"},src:(0,p.A_)(y.header)})})}),(0,g.jsx)(s.A,{}),(0,g.jsx)(l.A.Item,{children:(0,g.jsx)(i.Ay,{disabled:a,type:"primary",htmlType:"submit",children:(0,p.jY)().submit})})]})})})]})}},49495:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ge});var n=a(9950),s=a(65957),l=a(20212),i=a(46004),r=a(66577),o=a(55352),d=a(23072),c=a(44361),u=a(16471),p=a(78816),m=a(24937),h=a(26206),x=a(62618),g=a(44414);const j=(0,n.forwardRef)((e,t)=>{let{hidden:a,onChange:s,addonBefore:l,status:i,defaultValue:r,placeholder:o,style:d,variant:c,size:u,maxLength:p}=e;const[m,h]=(0,n.useState)(r||""),[j,y]=(0,n.useState)(!1);return(0,g.jsx)(x.A,{style:{...d,display:a?"none":"flex"},defaultValue:r,ref:t,variant:c,status:i,maxLength:p,addonBefore:l,size:u,onChange:async e=>{h(e.target.value),j||s(e.target.value)},onCompositionStart:()=>y(!0),onCompositionUpdate:()=>y(!0),onCompositionEnd:async()=>{y(!1),s(m)},placeholder:o})});var y=a(35434);const f=()=>y.Ay.isDarkMode()?"1px solid rgba(253, 253, 253, 0.12)":"1px solid #DDD",A=e=>{let{data:t,fullScreen:a}=e;return(0,g.jsxs)("div",{style:{position:a?"fixed":"absolute",borderTop:f(),left:0,width:"100%",height:30,boxSizing:"content-box",display:"flex",alignItems:"center",fontSize:14,bottom:0,userSelect:"none",background:y.Ay.isDarkMode()?"#141414":"white"},children:[(0,g.jsxs)("span",{style:{padding:16,paddingLeft:40,whiteSpace:"nowrap"},children:[(0,p.jY)()["editor.wordsCount"],(0,g.jsx)("span",{style:{paddingRight:4,paddingLeft:4},children:":"}),(0,g.jsx)("b",{style:{marginLeft:18,width:60},children:t.contentWordsLength})]}),(0,g.jsxs)("span",{style:{padding:16,whiteSpace:"nowrap"},children:[(0,p.jY)()["editor.linesCount"],(0,g.jsx)("span",{style:{paddingRight:4,paddingLeft:4},children:":"}),(0,g.jsx)("b",{style:{marginLeft:18,width:60},children:t.contentLinesLength})]})]})};var v=a(34647),w=a(30723),b=a(29008),k=a(36256),C=a(39454),S=a(37838);const V=e=>{let{onChange:t,thumbnail:a}=e;const[l,i]=(0,n.useState)(!1),[r,o]=s.Ay.useMessage({maxCount:3});return(0,g.jsxs)(S.A,{onSuccess:e=>{let{data:a}=e;i(!1),t&&t(a.url)},disabled:l,onProgress:()=>{i(!0)},onError:e=>{r.error(e.message),i(!1)},accept:"image/*",style:{overflow:"hidden",minHeight:102,maxHeight:256},action:"/api/admin/upload/thumbnail?dir=thumbnail",name:"imgFile",children:[o,(void 0===a||null===a||""===a)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"ant-upload-drag-icon",style:{padding:"16px 0",margin:0,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,g.jsx)(w.A,{style:{fontSize:"28px"}})}),(0,g.jsxs)("p",{className:"ant-upload-text",style:{padding:"8px 0 8px 0",margin:0},children:[l&&(0,g.jsx)(b.A,{})," ",(0,p.jY)().uploadTips]})]}),null!=a&&""!==a&&(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)(C.A,{style:{borderRadius:0,position:"relative"},preview:!1,id:"thumbnail",src:a,wrapperStyle:{position:"relative"}}),(0,g.jsx)("div",{style:{position:"absolute",right:0,top:0,borderRadius:"0 8px",padding:12,background:(0,p.eU)()+"5e",color:"white",fontSize:20},onClick:e=>{t&&t(""),e.stopPropagation()},children:(0,g.jsx)(k.A,{})})]})]})};var Y=a(57686),F=a(71751),z=a(35621),I=a(89636),R=a(59334);const q=e=>{let{allTags:t,keywords:a,onKeywordsChange:s}=e;const[l,r]=(0,n.useState)({keywords:"",inputVisible:!1,inputValue:""}),o=(0,n.useRef)(null),d=()=>{const{inputValue:e}=l;let t=l.keywords+"";e&&(t=t?t+=","+e:e),r({keywords:t,inputVisible:!1,inputValue:""}),t!==l.keywords&&s(t)},u=e=>(0,g.jsx)(z.A,{icon:(0,g.jsx)(I.A,{}),color:(0,p.eU)(),closable:!0,onClose:t=>{t.preventDefault(),(e=>{const t=l.keywords.split(",").filter(t=>t!==e).join(",");l.keywords!==t&&(r({...l,keywords:t}),s(t))})(e)},style:{userSelect:"none"},children:e}),{inputVisible:m,inputValue:h}=l;let j;if(""===l.keywords&&null!=a&&(l.keywords=a),void 0!==l.keywords&&null!=l.keywords){const e=Array.from(new Set(l.keywords.split(",").filter(e=>""!==e)));l.keywords=e.join(","),j=e.map(u)}else l.keywords="",j=[].map(u);const y=t.map(e=>(0,g.jsx)(z.A,{icon:(0,g.jsx)(I.A,{}),onClick:e=>(e=>{let t;e.currentTarget.remove(),t=l.keywords?l.keywords.split(","):[],t.push(e.currentTarget.textContent);const a=t.join(",");r({...l,keywords:a}),s(a)})(e),closable:!1,style:{userSelect:"none",cursor:"pointer"},color:(0,p.eU)(),children:e},"all-"+e));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{marginBottom:16},children:(0,g.jsx)(i.A,{size:[0,8],wrap:!0,children:j})}),m&&(0,g.jsx)(x.A,{ref:o,type:"text",size:"small",style:{width:98},value:h,onChange:e=>{r({...l,inputValue:e.target.value})},onBlur:d,onPressEnter:d}),!m&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{size:[0,8],wrap:!0,children:(0,g.jsxs)(z.A,{color:(0,p.eU)(),onClick:()=>{r(e=>(setTimeout(()=>{o&&o.current&&o.current.input&&o.current.input.focus()},0),{...e,inputVisible:!0}))},style:{userSelect:"none"},children:[(0,g.jsx)(R.A,{})," ",(0,p.jY)().tagTips]})}),(0,g.jsx)(c.A,{level:5,children:(0,p.jY)().allTag}),(0,g.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:(0,g.jsx)(i.A,{size:[0,8],wrap:!0,children:y})})]})]})};var D=a(42487),M=a(60686),T=a(66276),L=a(58755),U=a(65472),E=a(90582),W=a(98706);const H=(0,n.forwardRef)((e,t)=>{let{style:a,defaultValue:s,variant:l,rows:i,maxRows:r,minRows:o,onChange:d,required:c,placeholder:u,formStyle:p}=e;const[m,h]=(0,n.useState)(!1),[x,j]=(0,n.useState)(s||"");return(0,g.jsx)(Y.A.Item,{style:{marginBottom:8,width:"100%",...p},rules:[{required:c,message:""}],children:(0,g.jsx)(W.A,{ref:t,style:{...a},variant:l,defaultValue:x,onChange:async e=>{j(e.target.value),m||d(e.target.value)},onCompositionStart:()=>h(!0),onCompositionUpdate:()=>h(!0),onCompositionEnd:async()=>{h(!1),d(x)},rows:i,autoSize:{minRows:o||2,maxRows:r||6},placeholder:u})})});var B=a(26044);const P=(0,n.memo)(e=>{let{digestRef:t,initDigest:a,handleValuesChange:s}=e;const[l,i]=(0,n.useState)(!1),[r,o]=(0,n.useState)(a),[d,c]=(0,n.useState)(a),m=(0,n.useRef)(!1);(0,n.useEffect)(()=>{m.current?s({digest:r}):m.current=!0},[r]),(0,n.useEffect)(()=>{l||c(r)},[l]);return(0,g.jsx)(u.A,{size:"small",title:(0,p.jY)().digest,style:{marginBottom:36},extra:[l?(0,g.jsx)(U.A,{onClick:()=>{i(!1)},style:{color:(0,p.eU)(),cursor:"pointer"}}):(0,g.jsx)(E.A,{onClick:()=>{i(!0)},style:{color:(0,p.eU)(),cursor:"pointer"}})],children:l?(0,g.jsx)(H,{ref:t,variant:"borderless",defaultValue:r,placeholder:(0,p.jY)().digestTips,onChange:e=>{o(e)},minRows:2,maxRows:12,style:{padding:0},formStyle:{marginBottom:0}}):(0,g.jsx)(B.A,{style:{maxHeight:264,overflowY:"auto",overflowX:"hidden"},onContentChange:e=>{o(e)},editable:!0,htmlContent:d})})}),N=e=>{let{article:t,initDigest:a,saving:s,tags:l,containerRef:i,digestRef:d,handleValuesChange:c}=e;const[m,h]=(0,n.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(L.Ay,{href:window.location.pathname+"#setting",type:"default",title:(0,p.jY)()["admin.setting"],style:{border:0,display:"flex",justifyContent:"center",alignItems:"center",width:47,minWidth:47,borderRadius:8,height:47,cursor:"pointer",background:y.Ay.isDarkMode()?"#141414":"white",color:"rgb(102, 102, 102)"},icon:m?(0,g.jsx)(M.A,{style:{fontSize:24}}):(0,g.jsx)(T.A,{style:{fontSize:24}}),className:"editor-icon",onClick:e=>{e.stopPropagation(),e.preventDefault(),h(e=>!e)}}),(0,g.jsx)(D.A,{title:(0,p.jY)()["admin.setting"]+(s?"["+(0,p.jY)().saving+"]":""),placement:"right",closable:!0,autoFocus:!1,onClose:()=>{h(!1)},styles:{header:{padding:12},body:{padding:12,overflowX:"hidden"}},open:m,getContainer:()=>i.current,children:(0,g.jsx)(o.A,{md:24,sm:24,xs:24,style:{overflow:"hidden"},children:(0,g.jsxs)(r.A,{gutter:[8,8],children:[(0,g.jsx)(o.A,{span:24,children:(0,g.jsx)(u.A,{size:"small",title:(0,g.jsx)("span",{style:{textAlign:"start",display:"flex"},children:(0,p.jY)().articleCover}),style:{textAlign:"center",marginTop:6},children:(0,g.jsx)(V,{thumbnail:t.thumbnail,onChange:e=>{c({thumbnail:e})}})})}),(0,g.jsx)(o.A,{span:24,children:(0,g.jsx)(u.A,{size:"small",title:(0,p.jY)()["admin.setting"],children:(0,g.jsxs)(r.A,{children:[(0,g.jsx)(o.A,{xs:24,md:12,children:(0,g.jsx)(Y.A.Item,{style:{marginBottom:0},valuePropName:"checked",label:(0,p.jY)().commentAble,children:(0,g.jsx)(F.A,{value:t.canComment,size:"small",onChange:e=>{c({canComment:e})}})})}),(0,g.jsx)(o.A,{xs:24,md:12,children:(0,g.jsx)(Y.A.Item,{style:{marginBottom:0},valuePropName:"checked",label:(0,p.jY)().private,children:(0,g.jsx)(F.A,{value:t.privacy,size:"small",onChange:e=>{c({privacy:e})}})})})]})})}),(0,g.jsx)(o.A,{span:24,children:(0,g.jsx)(u.A,{size:"small",title:(0,p.jY)().tag,children:(0,g.jsx)(q,{onKeywordsChange:e=>{c({keywords:e})},keywords:t.keywords?t.keywords:"",allTags:l.map(e=>e.text)})})}),(0,g.jsx)(o.A,{span:24,children:(0,g.jsx)(P,{digestRef:d,initDigest:a,handleValuesChange:c})})]})})})]})};var O=a(67743),K=a(54021),G=a(87210);const X=e=>{const t=((new Date).getTime()-e)/1e3;if(t<60)return"\u521a\u521a";if(t<3600)return`${Math.round(t/60)}\u5206\u949f\u524d`;if(t<=86400)return`${Math.round(t/3600)}\u5c0f\u65f6\u524d`;{const t=new Date(e),a=t.getDate(),n=t.getMonth()+1;return`${t.getFullYear()}-${n}-${a}`}},Z=e=>{let{timestamp:t}=e;const[a,s]=(0,n.useState)(X(t));return(0,n.useEffect)(()=>{const e=setInterval(()=>{s(X(t))},1e3);return()=>clearInterval(e)},[t]),(0,g.jsx)("span",{children:a})},J=e=>{let{data:t,offline:a,fullScreen:s,onSubmit:l}=e;const i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{const e=e=>{const t=/Mac|iPhone|iPad|iPod/i.test(navigator.userAgent);(t&&e.metaKey&&"Enter"===e.key||!t&&e.ctrlKey&&"Enter"===e.key)&&i.current&&i.current.click()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,g.jsxs)(o.A,{id:"action-bar",xxl:9,md:12,sm:24,style:{display:"flex",justifyContent:"end",padding:0},children:[(0,g.jsx)(o.A,{id:"item",xxl:6,md:9,sm:24,className:s?"saveToRubbish-btn-full-screen":"item",children:(()=>{let e;if(a)e=(0,p.jY)()["admin.offline.article-editing"];else{if(!t.rubbish)return(0,g.jsx)(o.A,{xxl:3,md:3,sm:4,style:{padding:0}});e=t.article.lastUpdateDate&&t.article.lastUpdateDate>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Z,{timestamp:t.article.lastUpdateDate}),"\u66f4\u65b0"]}):"\u5f53\u524d\u4e3a\u8349\u7a3f"}return(0,g.jsx)(L.Ay,{type:"default",className:s?"saveToRubbish-btn-full-screen":"item",style:{border:0,width:"100%",maxWidth:256,display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",height:"32px",paddingRight:"8px",paddingLeft:"8px",backgroundColor:s?y.Ay.isDarkMode()?"rgb(20 20 20)":"white":"inherit"},children:e})})()}),(0,g.jsx)(o.A,{xxl:6,md:9,sm:24,className:s?"saveToRubbish-btn-full-screen":"item",children:(0,g.jsxs)(L.Ay,{type:s?"default":"dashed",style:{width:"100%",maxWidth:256},disabled:a||t.saving.rubbishSaving&&!t.saving.autoSaving,onClick:async()=>await l(t.article,!1,!1,!1),children:[(0,g.jsx)(O.A,{hidden:t.saving.rubbishSaving}),t.saving.rubbishSaving?(0,p.jY)().saving:(0,p.jY)().saveAsDraft]})}),(0,g.jsx)(o.A,{xxl:6,md:9,sm:24,className:"item",style:{display:s?"none":"flex"},children:(0,g.jsxs)(L.Ay,{type:"dashed",disabled:a||t.saving.previewIng&&!t.saving.autoSaving,style:{width:"100%",maxWidth:256},onClick:async()=>await l(t.article,!t.rubbish,!0,!1),children:[(0,g.jsx)(K.A,{}),(0,p.jY)().preview]})}),(0,g.jsx)(o.A,{xxl:6,md:9,sm:24,className:s?"save-btn-full-screen":"item",children:(0,g.jsxs)(L.Ay,{ref:i,type:"primary",disabled:a,loading:t.saving.releaseSaving,style:{width:"100%",maxWidth:256},onClick:async()=>{await l(t.article,!0,!1,!1)},children:[(0,g.jsx)(G.A,{}),!0===t.article.privacy?(0,p.jY)().save:(0,p.jY)().release]})})]})};var Q=a(85221);const _=e=>void 0===e||null===e||e<=0?"local-article-cache-draft":"local-article-cache-"+e,$=e=>{const t=e.article.logId&&e.article.logId>0?e.article:{version:-1,title:"",keywords:"",rubbish:!0},a=(0,Q.Pn)(_(t.logId));let n;return n=a&&a.version>=e.article.version||a&&-1===t.version?a:e.article,{typeOptions:e.types?e.types.map(e=>({value:e.id,label:e.typeName})):[],editorVersion:n.version,tags:e.tags?e.tags:[],rubbish:!(!e.article||!e.article.rubbish)&&e.article.rubbish,article:n,saving:{previewIng:!1,releaseSaving:!1,rubbishSaving:!1,autoSaving:!1}}},ee=e=>{(0,Q.ls)(_(e.logId),e)};var te=a(91013),ae=a(3781),ne=a(4385);const se=e=>{let{fullScreenElement:t,onExitFullScreen:a,onFullScreen:s,fullScreen:l}=e;const i=()=>{try{ne.A.isEnabled&&(ne.A.request(t).then(()=>{}).catch(e=>{console.error(e)}),ne.A.on("change",()=>{ne.A.isEnabled&&!ne.A.isFullscreen&&r()}))}catch(e){console.error(e)}finally{s()}},r=()=>{a(),ne.A.isEnabled&&ne.A.exit().catch(e=>{console.error(e)})};return(0,n.useEffect)(()=>{l&&(0,y.xx)()&&i()}),(0,g.jsx)(L.Ay,{type:"default",icon:l?(0,g.jsx)(te.A,{style:{fontSize:24}}):(0,g.jsx)(ae.A,{style:{fontSize:24}}),className:"editor-icon",href:l?window.location.pathname+"#exitFullScreen":window.location.pathname+"#enterFullScreen",style:{border:0,display:"flex",justifyContent:"center",alignItems:"center",width:47,minWidth:47,borderRadius:8,height:47,fontSize:24,cursor:"pointer",color:"rgb(102, 102, 102)",background:y.Ay.isDarkMode()?"#141414":"white"},onClick:e=>{l?r():i(),e.stopPropagation(),e.preventDefault()}})};var le=a(12523),ie=a(52285),re=a(11005),oe=a(30769),de=a(37596),ce=a(74163);const ue=(0,m.Ay)("div")`
    .cm-editor.cm-focused {
        outline: none !important;
        box-shadow: none !important;
    }

    .preview {
        overflow: auto;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
            sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }

    .cm-scroller {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
            sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }

    .cm-gutters {
        user-select: none;
    }

    .editor-dark .cm-scroller {
        background-color: #1a1a17;
    }

    .editor-dark .cm-gutters {
        background-color: #141414;
    }

    .editor-dark .markdown-body table th,
    .editor-dark .markdown-body table td {
        border: 1px solid rgba(198, 198, 198, 0.5);
    }

    .editor-dark .markdown-body table tr {
        background-color: #212529 !important;
        border-top: 1px solid rgba(198, 198, 198, 0.5);
    }

    .editor-dark .markdown-body table tr:nth-child(2n) {
        background-color: #212529 !important;
    }

    .editor-dark .markdown-body pre {
        background-color: #1f1f1f !important;
    }
`;var pe=a(65455),me=a(91887),he=a(33730),xe=a(21863);const ge=()=>{const e=(0,xe.xI)('\n### Markdown\u8bed\u6cd5\u6559\u7a0b (Markdown syntax tutorial)\n\n- [Markdown Syntax](http://daringfireball.net/projects/markdown/syntax/ "Markdown Syntax")\n- [Mastering Markdown](https://guides.github.com/features/mastering-markdown/ "Mastering Markdown")\n- [Markdown Basics](https://help.github.com/articles/markdown-basics/ "Markdown Basics")\n- [GitHub Flavored Markdown](https://help.github.com/articles/github-flavored-markdown/ "GitHub Flavored Markdown")\n- [Markdown \u8bed\u6cd5\u8bf4\u660e\uff08\u7b80\u4f53\u4e2d\u6587\uff09](http://www.markdown.cn/ "Markdown \u8bed\u6cd5\u8bf4\u660e\uff08\u7b80\u4f53\u4e2d\u6587\uff09")\n- [Markdown \u8a9e\u6cd5\u8aaa\u660e\uff08\u7e41\u9ad4\u4e2d\u6587\uff09](http://markdown.tw/ "Markdown \u8a9e\u6cd5\u8aaa\u660e\uff08\u7e41\u9ad4\u4e2d\u6587\uff09")\n\n### \u6d41\u7a0b\u56fe\u53c2\u8003 (Flowchart reference)\n\n[http://adrai.github.io/flowchart.js/](http://adrai.github.io/flowchart.js/)\n\n### \u65f6\u5e8f\u56fe\u53c2\u8003 (SequenceDiagram reference)\n\n[http://bramp.github.io/js-sequence-diagrams/](http://bramp.github.io/js-sequence-diagrams/)\n\n### TeX/LaTeX reference\n\n[http://meta.wikimedia.org/wiki/Help:Formula](http://meta.wikimedia.org/wiki/Help:Formula)\n');return(0,g.jsx)(he.Q,{style:{borderRadius:8},children:(0,g.jsx)(me.UC,{className:"markdown-body",style:{padding:0,background:y.Ay.isDarkMode()?"#202020":"#FFFFFF"},dangerouslySetInnerHTML:{__html:e}})})};var je=a(16738),ye=a(85333),fe=a(71807),Ae=a(19351),ve=a(87225),we=a(60091);const be=e=>{let{onChange:t}=e;const[a,s]=(0,n.useState)({rows:0,cols:0,align:"_default"});return(0,n.useEffect)(()=>{a.rows<1||a.cols<1||(()=>{const e=a.align,n="------------",s={_default:n,left:":"+n,center:":"+n+":",right:n+":"};let l="\n\n";if(a.rows>1&&a.cols>0){let t=0;const n=a.rows;for(;t<n;t++){const n=[],i=[];let r=0;const o=a.cols;for(;r<o;r++)1===t&&i.push(s[e]),n.push(" ");1===t&&(l+="| "+i.join(" | ")+" |\n"),l+="| "+n.join(1===a.cols?"":" | ")+" |\n"}}t(l)})()},[a]),(0,g.jsxs)("div",{style:{paddingTop:12},children:[(0,g.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,g.jsx)(fe.A,{label:"\u884c",children:(0,g.jsx)(je.A,{min:2,onChange:e=>{s(t=>({...t,rows:e}))}})}),(0,g.jsx)(fe.A,{label:"\u5217",children:(0,g.jsx)(je.A,{min:1,title:"\u5217",onChange:e=>{s(t=>({...t,cols:e}))}})})]}),(0,g.jsx)("div",{children:(0,g.jsx)(fe.A,{label:"\u5bf9\u9f50",children:(0,g.jsxs)(ye.Ay.Group,{value:a.align,onChange:e=>{s(t=>({...t,align:e.target.value}))},children:[(0,g.jsxs)(ye.Ay,{value:"left",children:[(0,g.jsx)(Ae.A,{}),(0,g.jsx)("span",{style:{paddingLeft:4},children:"\u5de6"})]}),(0,g.jsxs)(ye.Ay,{value:"center",children:[(0,g.jsx)(ve.A,{}),(0,g.jsx)("span",{style:{paddingLeft:4},children:"\u4e2d"})]}),(0,g.jsxs)(ye.Ay,{value:"right",children:[(0,g.jsx)(we.A,{}),(0,g.jsx)("span",{style:{paddingLeft:4},children:"\u53f3"})]})]})})})]})};var ke=a(80616),Ce=a(92185),Se=a(50820);const Ve=new xe.xI.Renderer,Ye=a(80069);Ce.A.registerLanguage("shell",Se.A);Ve.code=function(e){let{text:t,lang:a}=e;const n=a&&Ce.A.getLanguage(a)?a:"";if(n){return`<pre><code class="hljs language-${n}">${Ce.A.highlight(t,{language:n}).value}</code></pre>`}if("flow"===a){return`<div id="${"flow_"+Ye(t)}"  data-code="${encodeURIComponent(t)}" class="flow"></div>`}if("seq"===a){return`<div id="${"seq_"+Ye(t)}" data-code="${encodeURIComponent(t)}" class="seq"></div>`}return`<pre><code class="hljs">${Ce.A.highlightAuto(t).value}</code></pre>`},xe.xI.setOptions({gfm:!0,breaks:!0,renderer:Ve});const Fe=e=>{let{onChange:t,getContainer:a}=e;const[s,l]=(0,n.useState)({language:"",code:""}),i=(()=>{const e={};return Ce.A.listLanguages().forEach(t=>{const a=Ce.A.getLanguage(t);a&&(e[t]=[a.name])}),e})();return(0,n.useEffect)(()=>{0!==s.code.length&&t("```"+s.language+"\n"+s.code+"\n```\n")},[s]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(fe.A,{label:"\u8bed\u8a00",children:(0,g.jsx)(h.A,{style:{maxWidth:240},onChange:e=>{l(t=>({...t,language:e}))},getPopupContainer:a,children:Object.keys(i).map(e=>(0,g.jsx)(ke.c$,{value:e,children:i[e][0]},e))})}),(0,g.jsx)(fe.A,{children:(0,g.jsx)(H,{placeholder:"",onChange:e=>{l(t=>({...t,code:e}))},minRows:12,maxRows:25})})]})};const ze=e=>{let{type:t,onChange:a}=e;const[l,i]=(0,n.useState)({value:"",desc:"",uploading:!1}),[r,o]=s.Ay.useMessage({maxCount:3});return(0,n.useEffect)(()=>{""!==l.value&&a("video"!==t?"file"!==t?"!["+l.desc+"]("+l.value+")":"["+(""!==l.desc?l.desc:"file")+"]("+l.value+")":function(e){const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(t)return`<iframe width="560" height="315" src="https://www.youtube.com/embed/${t[1]}" frameborder="0" allowfullscreen></iframe>`;const a=e.match(/bilibili\.com\/video\/(BV[0-9A-Za-z]+)/);if(a)return`<iframe src="//player.bilibili.com/player.html?bvid=${a[1]}&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>`;return`<video controls width="560" src="${e}">\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 video \u6807\u7b7e\u3002</video>`}(l.value))},[l]),(0,g.jsxs)("div",{style:{display:"flex",flexFlow:"column",gap:12},children:[o,(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,alignItems:"center"},children:[(0,g.jsx)("div",{style:{display:"flex"},children:"\u5730\u5740"}),(0,g.jsx)(x.A,{style:{minHeight:36,flex:1,width:"100%",display:"flex"},value:l.value,onChange:e=>{i(t=>({...t,value:e.target.value}))}}),(0,g.jsx)(S.A,{accept:"image"===t?"image/*":"video"===t?"video/*":"",style:{flex:"100%",minWidth:96},action:"api/admin/upload?dir="+t,name:"imgFile",disabled:l.uploading,onError:e=>{r.error(e.message),i(e=>({...e,uploading:!1}))},onSuccess:e=>{i(t=>({...t,value:e.data.url,uploading:!1}))},onProgress:()=>{i(e=>({...e,uploading:!0}))},children:(0,g.jsxs)(L.Ay,{type:"text",style:{background:"inherit",border:"none"},children:[l.uploading&&(0,g.jsx)(b.A,{})," ",l.uploading?"\u4e0a\u4f20\u4e2d":"\u672c\u5730\u4e0a\u4f20"]})})]}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,alignItems:"center"},children:[(0,g.jsx)("div",{style:{display:"flex"},children:"\u63cf\u8ff0"}),(0,g.jsx)(x.A,{style:{minHeight:36,flex:1,width:"100%",display:"flex"},value:l.desc,onChange:e=>{i(t=>({...t,desc:e.target.value}))}}),(0,g.jsx)("div",{style:{minWidth:96}})]})]})},Ie=e=>{let{onChange:t}=e;const[a,s]=(0,n.useState)({value:"",desc:""});return(0,n.useEffect)(()=>{""!==a.value&&t("["+a.desc+"]("+a.value+")")},[a]),(0,g.jsxs)("div",{style:{display:"flex",flexFlow:"column",gap:8},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,alignItems:"center"},children:[(0,g.jsx)("div",{style:{display:"flex"},children:"\u5730\u5740"}),(0,g.jsx)(x.A,{style:{minHeight:36,flex:1,width:"100%",display:"flex"},value:a.value,onChange:e=>{s(t=>({...t,value:e.target.value}))}})]}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",gap:12,alignItems:"center"},children:[(0,g.jsx)("div",{style:{display:"flex"},children:"\u63cf\u8ff0"}),(0,g.jsx)(x.A,{style:{minHeight:36,flex:1,width:"100%",display:"flex"},value:a.desc,onChange:e=>{s(t=>({...t,desc:e.target.value}))}})]})]})},Re=e=>{let{title:t,type:a,onOk:l,onClose:i,getContainer:r}=e;const[o,d]=(0,n.useState)({value:""}),[c,u]=s.Ay.useMessage({maxCount:3,getContainer:r});return(0,g.jsxs)(pe.A,{open:!0,width:{xs:"90%",sm:"80%",md:"70%",lg:"60%",xl:"50%",xxl:"40%"},getContainer:r,title:t,onOk:()=>{if("help"!==a&&l){if("table"===a||"code"===a)return""===o.value?void c.error("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):void l(o.value);if(""===o.value)return void c.error("\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a");l(o.value)}},onClose:()=>{i&&i()},onCancel:()=>{i&&i()},children:[u,"help"===a?(0,g.jsx)(ge,{}):"code"===a?(0,g.jsx)(Fe,{getContainer:r,onChange:e=>{d(()=>({value:e}))}}):"table"===a?(0,g.jsx)(be,{onChange:e=>{d(()=>({value:e}))}}):"link"===a?(0,g.jsx)(Ie,{onChange:e=>{d({value:e})}}):(0,g.jsx)(ze,{type:a,onChange:e=>{d({value:e})}})]})};var qe=a(55907),De=a(39324);[De.l5I,De.$6A,De.C4u,De.SIw,De.$7g,De.pch,De.Tsj,De.EZy,De.wRm,De.iW_,De.KTq,De.w97,De.ruc,De.WMI,De.n$V,De.JGI,De.oI1,De.Cyq,De._ZW,De.CQO,De.yYc,De.k6j,De.pS3].forEach(e=>{qe.Yv.add(e)}),qe.tT.watch();const Me=e=>{let{name:t,onClick:a}=e;return(0,g.jsx)("div",{onClick:a,className:"editor-icon",style:{cursor:"pointer",minWidth:34,display:"flex",alignItems:"center",color:"rgb(119, 119, 119)",fontSize:16,height:38,borderRadius:6,justifyContent:"center"},children:(0,g.jsx)("i",{className:"fa fa-"+t})})},Te=()=>(0,g.jsx)("span",{style:{borderRight:f(),height:"65%",width:1,userSelect:"none",display:"inline-block"},children:"\xa0"}),Le=e=>{let{onChange:t,onCopy:a,preview:s,onEditorModeChange:l,getContainer:i}=e;const[r,o]=(0,n.useState)({open:!1,title:"",type:"image"});return(0,g.jsxs)(g.Fragment,{children:[r.open&&(0,g.jsx)(Re,{getContainer:i,title:r.title,type:r.type,onOk:e=>{o({title:"",type:"image",open:!1}),t(e,e.length)},onClose:()=>{o({title:"",type:"image",open:!1})}}),(0,g.jsxs)("div",{style:{display:"flex",gap:2,paddingRight:8,flexWrap:"wrap",paddingLeft:8,alignItems:"center",boxSizing:"border-box",borderBottom:f()},children:[(0,g.jsx)(Me,{name:"bold",onClick:()=>{t("****",2)}}),(0,g.jsx)(Me,{name:"strikethrough",onClick:()=>{t("~~~~",2)}}),(0,g.jsx)(Me,{name:"italic",onClick:()=>{t("**",1)}}),(0,g.jsx)(Me,{name:"quote-left",onClick:()=>{t("> ",2)}}),(0,g.jsx)(Te,{}),(0,g.jsx)(Me,{name:"2",onClick:()=>{t("## ",3)}}),(0,g.jsx)(Me,{name:"3",onClick:()=>{t("### ",4)}}),(0,g.jsx)(Me,{name:"4",onClick:()=>{t("#### ",5)}}),(0,g.jsx)(Te,{}),(0,g.jsx)(Me,{name:"list-ul",onClick:()=>{t("- ",2)}}),(0,g.jsx)(Me,{name:"list-ol",onClick:()=>{t("1. ",3)}}),(0,g.jsx)(Me,{name:"minus",onClick:()=>{const e="\n------------\n\n ";t(e,16)}}),(0,g.jsx)(Te,{}),(0,g.jsx)(Me,{name:"link",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u94fe\u63a5",type:"link"})}}),(0,g.jsx)(Me,{name:"image",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u56fe\u7247",type:"image"})}}),(0,g.jsx)(Me,{name:"file-video",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u89c6\u9891",type:"video"})}}),(0,g.jsx)(Me,{name:"paperclip",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u6587\u4ef6",type:"file"})}}),(0,g.jsx)(Te,{}),(0,g.jsx)(Me,{name:"file-code",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u4ee3\u7801\u5757",type:"code"})}}),(0,g.jsx)(Me,{name:"table",onClick:()=>{o({open:!0,title:"\u6dfb\u52a0\u8868\u683c",type:"table"})}}),(0,g.jsx)(Me,{name:"clipboard",onClick:a}),s?(0,g.jsx)(Me,{name:"eye-slash",onClick:()=>{l(!1)}},s+""):(0,g.jsx)(Me,{name:"eye",onClick:()=>{l(!0)}},s+""),(0,g.jsx)(Te,{}),(0,g.jsx)(Me,{name:"question-circle",onClick:()=>{o({open:!0,title:"\u5e2e\u52a9",type:"help"})}})]})]})};var Ue=a(99983),Ee=a(27629),We=a(23938);const He=e=>{let{onUploadSuccess:t,getContainer:a,editorView:s}=e;const l=(0,v.cz)(a);function i(e){const a=Math.random().toString(10).substr(2,5)+"-"+Math.random().toString(36).substr(2)+".png",n=new FormData;e&&(n.append("imgFile",e,a),l.post("/api/admin/upload?dir=image",n).then(e=>{let{data:a}=e;const n=a.data.url;(0,p.M$)()&&n.startsWith("/")?t((0,p.XW)()+a.data.url.substring(1)):t(n)}))}const r=e=>{const t=e.clipboardData;if(null===t)return;const a=t.items;for(let n=0;n<a.length;n++)if("file"===a[n].kind&&a[n].type.match(/^image/)){e.preventDefault(),i(a[n].getAsFile());break}};return(0,n.useEffect)(()=>(s&&s.addEventListener("paste",r),()=>{null===s||void 0===s||s.removeEventListener("paste",r)}),[]),(0,g.jsx)(g.Fragment,{})},Be=e=>{let{editorRef:t,previewRef:a,mdKey:s}=e;const l=(0,n.useRef)(!1);function i(){if(l.current)return;if(l.current=!0,!t.current||!a.current)return;const e=t.current.scrollDOM,n=e.scrollTop/(e.scrollHeight-e.clientHeight),s=a.current;if(null===s)return;const i=s.scrollHeight-s.clientHeight;s.scrollTop=i*n,setTimeout(()=>{l.current=!1},10)}return(0,n.useEffect)(()=>{i()},[s]),(0,n.useEffect)(()=>{if(!t.current||!a.current)return;const e=t.current.scrollDOM;return e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i)}},[]),(0,n.useEffect)(()=>{if(t.current&&a.current)return a.current.addEventListener("scroll",e),()=>{a.current&&a.current.removeEventListener("scroll",e)};function e(){if(l.current)return;l.current=!0;const e=a.current;if(null===e)return;const n=e.scrollTop/(e.scrollHeight-e.clientHeight);if(!t.current||!a.current)return;const s=t.current.scrollDOM,i=s.scrollHeight-s.clientHeight;s.scrollTop=i*n,setTimeout(()=>{l.current=!1},10)}},[]),(0,g.jsx)(g.Fragment,{})};var Pe=a(68704);const Ne=e=>{let{height:t,value:a,onChange:s,content:l,loadSuccess:i,getContainer:r}=e;const[o,d]=(0,n.useState)({markdownValue:a||"",preview:(()=>{const e=(0,Q.Pn)("editor_config");return e||{preview:window.innerWidth>600}})().preview,content:l,guttersWidth:29}),c=(0,n.useRef)(null),u=(0,n.useRef)(null),[m,h]=(0,Ue.A)({maxCount:3}),x=(e,t)=>{const a=c.current;if(!a)return;const n=a.state.selection.main.head;a.dispatch({changes:{from:n,insert:e},selection:ce.OF.cursor(n+t),scrollIntoView:!0}),a.focus()};const j=async()=>{!function(e){const t=document.createElement("input");document.body.append(t),t.value=e,t.select(),document.execCommand("copy",!1),t.remove()}('<div class="markdown-body" style="padding:0">'+o.content+"</div>"),m.info((0,p.jY)().copPreviewHtmlToClipboardSuccess)};return(0,n.useEffect)(()=>{i&&i(null)},[]),(0,n.useEffect)(()=>{const e=o.markdownValue;(0,Pe.u)(e).then(t=>{const a={content:t,markdown:e};d(a=>({...a,markdownValue:e,content:t})),s(a)})},[o.markdownValue]),(0,g.jsxs)(ue,{style:{paddingBottom:30},children:[c.current&&(0,g.jsx)(He,{onUploadSuccess:e=>{const t="![]("+e+")\n";x(t,t.length)},editorView:c.current.contentDOM}),(0,g.jsxs)("div",{className:y.Ay.isDarkMode()?"editor-dark":"editor-light",style:{overflow:"hidden"},children:[h,(0,g.jsx)(Le,{getContainer:r,onChange:(e,t)=>{x(e,t)},onCopy:async()=>{await j()},onEditorModeChange:e=>{d(t=>((0,Q.ls)("editor_config",{preview:e}),{...t,preview:e}))},preview:o.preview}),(0,g.jsxs)("div",{style:{height:t,display:"flex",width:"100%"},children:[(0,g.jsx)(ce.Ay,{basicSetup:{searchKeymap:!1},placeholder:(0,p.jY)().editorPlaceholder,value:o.markdownValue,height:t,width:"100%",onUpdate:e=>{e.viewportChanged},theme:y.Ay.isDarkMode()?"dark":"light",extensions:[(0,We.markdown)({codeLanguages:Ee.e}),ce.Lz.lineWrapping],onCreateEditor:e=>{c.current=e},onChange:async(e,t)=>{const a=t.view.dom.querySelector(".cm-gutters");if(a){const e=a.offsetWidth;console.log("\u5f53\u524d\u884c\u53f7\u5bbd\u5ea6:",e)}d(t=>({...t,markdownValue:e}))},style:{minWidth:o.preview?`calc(50% + ${o.guttersWidth/2}px)`:"100%",width:o.preview?`calc(50% + ${o.guttersWidth/2}px)`:"100%",borderRight:f(),overflow:"auto"}}),(0,g.jsx)(B.A,{previewRef:u,style:{display:o.preview?"block":"none",width:`calc(50% - ${o.guttersWidth/2}px)`,paddingTop:4,paddingBottom:4,paddingRight:8,paddingLeft:5,overflowY:"auto",wordBreak:"break-word",background:y.Ay.isDarkMode()?"#1a1a17":"inherit"},htmlContent:o.content})]})]}),c.current&&u.current&&c.current.scrollDOM&&(0,g.jsx)(Be,{mdKey:o.markdownValue,editorRef:c,previewRef:u})]})};var Oe=a(28429);const Ke=(0,m.Ay)("div")`
    .ant-btn {
        -webkit-transition: none;
        box-shadow: none;
    }

    .save-btn-full-screen {
        min-width: 120px;
    }

    .saveToRubbish-btn-full-screen {
        min-width: 120px;
    }

    .saveToRubbish-btn-full-screen > button {
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }

    .save-text-full-screen {
        right: 300px;
    }

    .editor-icon:hover {
        color: ${(0,p.eU)()} !important;
        background: ${y.Ay.isDarkMode()?"rgba(253, 253, 253, 0.12)":"#DDD"} !important;
        border-radius: 2px;
    }

    @media screen and (max-width: 560px) {
        #action-bar {
            flex-flow: column;
            gap: 8px;
            width: 100%;
        }
    }

    @media screen and (max-width: 767px) {
        .item {
            flex: auto;
        }
    }
`,Ge=e=>{let{offline:t,data:a,onExitFullScreen:m,onFullScreen:x,fullScreen:f,updateCache:w}=e;const b=(0,Oe.zy)(),k=(0,n.useRef)(null),C=$(a),[S,V]=(0,n.useState)(C),Y=(0,n.useRef)(null),F=(0,n.useRef)(null),z=(0,n.useRef)(C.article.version),I=(0,n.useRef)(C.article.logId?C.article.logId:-1),R=(0,n.useRef)(null),q=(0,n.useRef)(null);let D=0;const[M,T]=s.Ay.useMessage({maxCount:3,getContainer:()=>k.current}),{modal:L}=l.A.useApp(),U=(0,v.cz)(()=>k.current),E=e=>{ee(e),V(t=>({...t,article:e,saving:{...t.saving,releaseSaving:!1,rubbishSaving:!1,previewIng:!1,autoSaving:!1}})),0===D&&(0,de.V8)()},W=async(e,t,a,n)=>{let s,l={...e,version:z.current,rubbish:!t};if((0,y.aK)())return void E(e);if(P(e))return void M.error({content:(0,p.jY)().article_require_title});if(O(e))return void M.error((0,p.jY)().article_require_type);n||B();const i=void 0===e.logId||null===e.logId||e.logId<=0;s=i?p.jb:p.iR,V(t?e=>({...e,saving:{...e.saving,releaseSaving:!0,autoSaving:n}}):e=>({...e,saving:{...e.saving,rubbishSaving:!0,previewIng:a,autoSaving:n}})),(0,de.g1)((0,p.jY)().articleEditExitWithOutSaveSuccess);try{let e;try{const{data:t}=await U.post(s,l);if(e=t,t.error)return void L.error({title:"\u4fdd\u5b58\u5931\u8d25",content:t.message,getContainer:()=>k.current});t.data&&(z.current=t.data.article.version)}finally{}const t=e;if(0===t.error){0===D&&(0,de.V8)(),n||M.info(t.message),a&&window.open(t.data.article.previewUrl,"_blank");const e=t.data.article,s=new URL(window.location.href);i?(I.current=e.logId,s.searchParams.set("id",e.logId),l={...l,...e},(0,Q.f6)(_(null)),window.history.replaceState(null,"",s.toString())):(l={...l,thumbnail:e.thumbnail,lastUpdateDate:e.lastUpdateDate,version:e.version},(e=>{(0,Q.f6)(_(e.logId))})(l));const r=(0,Q.Rn)(b.pathname,"?"+s.searchParams.toString());w&&w(t.data,r)}}finally{t?((e,t)=>{V(a=>({...a,rubbish:!1,article:H(a.article,e,t),saving:{...a.saving,releaseSaving:!1,rubbishSaving:!1,previewIng:!1,autoSaving:!1}}))})(l,i):((e,t)=>{V(a=>({...a,rubbish:!0,article:H(a.article,e,t),saving:{...a.saving,rubbishSaving:!1,previewIng:!1,autoSaving:!1}}))})(l,i)}},H=(e,t,a)=>{const n={...t,logId:t.logId,lastUpdateDate:t.lastUpdateDate,version:t.version,thumbnail:e.thumbnail&&e.thumbnail.trim().length>0?e.thumbnail:t.thumbnail};return Y.current&&Y.current.input&&(0===Y.current.input.value.trim().length&&a?(n.alias=t.alias,Y.current.input.value=t.alias):n.alias=Y.current.input.value),F.current&&F.current.input&&0===F.current.input.value.trim().length&&a&&(n.digest=t.digest,F.current.input.value=t.digest),n};(0,n.useEffect)(()=>{const e=$(a);(0,de.eP)(e.article,a.article)?console.info("Skip article data useEffect() "+JSON.stringify(a.article.logId)):(z.current=e.article.version,e.article.logId?I.current=e.article.logId:I.current=-1,K(e.article))},[a]),(0,n.useEffect)(()=>{t?ee(S.article):(z.current=S.article.version,K(S.article))},[t]);const B=()=>{q.current&&q.current.unsubscribe(),R.current=new le.B;const e=R.current.pipe((0,ie.M)(()=>{(0,de.g1)((0,p.jY)().articleEditExitWithOutSaveSuccess)}),(0,re.Z)(2e3),(0,ie.M)(()=>{D+=1}),(0,oe.H)(async e=>{D-=1,e.logId=I.current;try{await W(e,!1,!1,!0)}catch(t){console.error(t)}})).subscribe();q.current&&(q.current=e)};(0,n.useEffect)(()=>(B(),()=>{q.current&&q.current.unsubscribe()}),[]);const P=e=>void 0===e.title||null===e.title||""===e.title,O=e=>void 0===e.typeId||null===e.typeId||e.typeId<0,K=e=>{V(t=>{const a={...t.article,...e};if((e=>{const t=P(e),a=O(e);return!(t||a)})(a)){const e=R.current;e&&e.next(a)}else E(a);return{...t,article:a}})};return(0,g.jsxs)(Ke,{children:[(0,g.jsxs)(r.A,{gutter:[8,8],style:{paddingTop:f?0:20},children:[(0,g.jsx)(o.A,{md:12,xxl:15,sm:6,span:24,children:(0,g.jsx)(c.A,{className:"page-header",style:{marginTop:0,marginBottom:0},level:3,hidden:f,children:(0,p.jY)()["admin.log.edit"]})}),!f&&(0,g.jsx)(J,{fullScreen:f,offline:t,data:S,onSubmit:W},a.article.logId+"actionbar_offline:"+t)]}),!f&&(0,g.jsx)(d.A,{style:{marginTop:16,marginBottom:16}}),T,(0,g.jsxs)(u.A,{title:"",ref:k,style:{borderRadius:f?0:8},styles:{body:{padding:0,overflow:"hidden"}},children:[(0,g.jsxs)(r.A,{gutter:[8,8],style:{position:"relative",borderBottom:y.Ay.isDarkMode()?"1px solid rgba(253, 253, 253, 0.12)":"1px solid #DDD"},children:[(0,g.jsx)(o.A,{md:12,xs:24,children:(0,g.jsx)(j,{maxLength:100,variant:"borderless",size:"large",placeholder:(0,p.jY)().inputArticleTitle,defaultValue:S.article.title?S.article.title:void 0,onChange:e=>{K({title:e})},style:{fontSize:22,fontWeight:500,textOverflow:"ellipsis"}},a.article.version)}),(0,g.jsx)(o.A,{md:f?6:8,xs:24,style:{display:"flex",alignItems:"center"},children:(0,g.jsxs)(i.A.Compact,{style:{display:"flex",width:"100%"},hidden:f,children:[(0,g.jsx)(h.A,{getPopupContainer:e=>e.parentElement,variant:"borderless",style:{minWidth:156,paddingLeft:0,display:"flex",zIndex:20},size:"large",value:S.article.typeId,showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").includes(e)},filterSort:(e,t)=>{var a,n;return(null!==(a=null===e||void 0===e?void 0:e.label)&&void 0!==a?a:"").toLowerCase().localeCompare((null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase())},onChange:e=>{K({typeId:e})},options:S.typeOptions,placeholder:(0,p.jY)().pleaseChoose+(0,p.jY)()["admin.type.manage"]}),(0,g.jsx)(j,{ref:Y,defaultValue:S.article.alias,onChange:e=>{K({alias:e})},maxLength:256,size:"large",variant:"borderless",placeholder:(0,p.jY)().inputArticleAlias,style:{fontSize:16,paddingLeft:0,textOverflow:"ellipsis"}},a.article.version)]})}),(0,g.jsxs)(o.A,{md:f?6:4,style:{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",right:0,top:0},children:[f&&(0,g.jsx)(J,{offline:t,fullScreen:f,data:S,onSubmit:W}),(0,g.jsx)(N,{initDigest:a.article.digest?a.article.digest:"",digestRef:F,article:S.article,saving:S.saving.rubbishSaving||S.saving.releaseSaving||S.saving.previewIng,tags:S.tags,containerRef:k,handleValuesChange:K}),(0,g.jsx)(se,{fullScreen:f,fullScreenElement:k.current,onExitFullScreen:m,onFullScreen:x})]})]}),(0,g.jsx)(r.A,{gutter:[f?0:8,f?0:8],children:(0,g.jsxs)(o.A,{md:24,sm:24,xs:24,style:{paddingLeft:0,paddingRight:4},children:[(0,g.jsx)(Ne,{fullscreen:f,height:f?"calc(100vh - 120px)":"calc(100vh - 286px)",loadSuccess:()=>{},content:S.article.content?S.article.content:"",getContainer:()=>k.current,value:S.article.markdown,onChange:e=>{(""!==e.markdown||""!==S.article.markdown&&void 0!==S.article.markdown&&null!==S.article.markdown)&&e.markdown!==S.article.markdown&&K(e)}}),(0,g.jsx)(A,{data:(G=S.article.markdown,{contentWordsLength:null!==G&&void 0!==G&&G.length?G.length:0,contentLinesLength:null!==G&&void 0!==G&&G.length&&G.length>0?G.split("\n").length:0}),fullScreen:f})]})})]})]});var G}},51434:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(65957),s=a(46004),l=a(87196),i=a(9950),r=a(37596),o=a(73149),d=a(78816),c=a(78433),u=a(28429),p=a(42074),m=a(34647),h=a(44414);const x=e=>{let{deleteApi:t,editBtnRender:a,addBtnRender:x,columns:g,datasource:j,defaultPageSize:y,searchKey:f,deleteSuccessCallback:A,hideId:v,offline:w}=e;const b=(0,u.Zp)(),k=(0,u.zy)(),C=(e,t,a,n)=>S(e,t,a,-1,n),S=(e,t,a,n,s)=>{const l={};e>1&&(l.page=e),t!=y&&1e6!=t&&(l.size=t),a&&a.trim().length>0&&(l.key=a.trim()),n>0&&(l[d.Pe]=n),s.length>0&&(l.sort=s[0]);const i=(0,r.Pb)(l);return(0,d.Cu)()&&console.info(i+"===<"),0===i.length?(0,d.dW)(k.pathname):(0,d.dW)(k.pathname+"?"+i)},V=(e,t,a,n)=>{b(C(e,t,a,n))},Y=(e,t,a,n)=>{b(S(e,t,a,(new Date).getTime(),n))},[F,z]=(0,i.useState)({pagination:{page:null!==j&&void 0!==j&&j.page?j.page:1,key:null===j||void 0===j?void 0:j.key,sort:null!==j&&void 0!==j&&j.sort?null===j||void 0===j?void 0:j.sort:[],size:null!==j&&void 0!==j&&j.size?null===j||void 0===j?void 0:j.size:y},query:null===j||void 0===j?void 0:j.key,tableLoaded:!0,rows:j?j.rows:[],tablePagination:{total:null===j||void 0===j?void 0:j.totalElements,current:null===j||void 0===j?void 0:j.page,pageSize:null===j||void 0===j?void 0:j.size,onChange:(e,t)=>{V(e,t,F.query,[])}}}),[I,R]=n.Ay.useMessage({maxCount:3}),q=(0,m.cz)();(0,i.useEffect)(()=>{f!==F.query&&(z({...F,query:f}),V(1,F.pagination.size,f,F.pagination.sort))},[f]),(0,i.useEffect)(()=>{z(e=>({...e,rows:j?j.rows:[],pagination:{page:null!==j&&void 0!==j&&j.page?j.page:1,size:null!==j&&void 0!==j&&j.size?j.size:10,sort:null!==j&&void 0!==j&&j.sort?j.sort:[]},tablePagination:{current:null===j||void 0===j?void 0:j.page,pageSize:null===j||void 0===j?void 0:j.size,total:null===j||void 0===j?void 0:j.totalElements}}))},[j]);return(0,h.jsxs)(h.Fragment,{children:[R,x?x(()=>{Y(F.pagination.page,F.pagination.size,F.query,F.pagination.sort)}):void 0,(0,h.jsx)(l.A,{onChange:(e,t,a)=>{const n=a&&a.field?[a.field+","+("descend"===a.order?"DESC":"ASC")]:[];n.length>0&&z({...F,pagination:{...F.pagination,sort:n}}),V(e.current?e.current:1,e.pageSize?e.pageSize:10,F.query,n)},style:{minHeight:512},columns:(()=>{const e=[];return null!==v&&void 0!==v&&v||e.push({title:(0,d.jY)().id,dataIndex:"id",key:"id",fixed:!0,width:64,render:e=>(0,h.jsx)("span",{style:{maxWidth:64},children:e})}),e.push({title:"",dataIndex:"id",key:"action",fixed:!0,width:64,render:(e,n)=>e?(0,h.jsxs)(s.A,{size:16,children:[(0,h.jsx)(p.N_,{to:"#delete-"+n.id,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,h.jsx)(o.A,{disabled:w,title:(0,d.jY)().deleteTips,onConfirm:async()=>{await(async(e,t,a)=>{const n=await q.post(t+"?id="+a);return n.data.error?(I.error(n.data.message),!1):0===n.data.error&&(I.success((0,d.jY)().deleteSuccess),Y(e.page,e.size,F.query,F.pagination.sort),!0)})(F.pagination,t,n.id)&&A&&A(n.id)},children:(0,h.jsx)(c.A,{style:{color:"red"}})})}),a?a(e,n,()=>{Y(F.pagination.page,F.pagination.size,F.query,F.pagination.sort)}):null]}):null}),g.forEach(t=>{e.push(t)}),e})(),pagination:{hideOnSinglePage:!0,...F.tablePagination,itemRender:(e,t,a)=>(0,h.jsx)(p.N_,{to:C(e,null!==j&&void 0!==j&&j.size?j.size:10,F.query,null!==j&&void 0!==j&&j.sort?j.sort:[]),children:a},e)},dataSource:F.rows,scroll:{x:"90vw"}})]})}},51844:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(3646),s=a(16471),l=a(47293),i=a(87094),r=a(41988),o=a(44414);const d=()=>(0,o.jsx)("img",{style:{maxHeight:30},alt:"graalvm",src:"data:image/png;base64,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"});var c=a(32479),u=a(25641),p=a(9950),m=a(42074),h=a(72586),x=a(94452),g=a(8997),j=a(95770);const y=()=>(0,o.jsx)("span",{className:"anticon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"currentColor",children:(0,o.jsx)("path",{d:"M3 7H21V17H19V15H17V17H15V15H13V17H11V15H9V17H7V15H5V17H3V7ZM2 5C1.44772 5 1 5.44772 1 6V18C1 18.5523 1.44772 19 2 19H22C22.5523 19 23 18.5523 23 18V6C23 5.44772 22.5523 5 22 5H2ZM11 9H5V12H11V9ZM13 9H19V12H13V9Z"})})}),f=()=>(0,o.jsx)("span",{className:"anticon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"currentColor",children:(0,o.jsx)("path",{d:"M6 18H18V6H6V18ZM14 20H10V22H8V20H5C4.44772 20 4 19.5523 4 19V16H2V14H4V10H2V8H4V5C4 4.44772 4.44772 4 5 4H8V2H10V4H14V2H16V4H19C19.5523 4 20 4.44772 20 5V8H22V10H20V14H22V16H20V19C20 19.5523 19.5523 20 19 20H16V22H14V20ZM8 8H16V16H8V8Z"})})});var A=a(52378);const{useBreakpoint:v}=A.Ay,w=e=>{let{data:t,dockerMode:a,nativeImageMode:p,title:A}=e;const w=v(),b=(e,t)=>{if("programInfo"===e)return"https://www.zrlog.com/changelog/?ref=systemInfo";if("webServer"===e){if(t.toLowerCase().startsWith("simplewebserver/"))return"https://github.com/94fzb/simplewebserver";if(t.startsWith("Apache Tomcat/"))return"https://tomcat.apache.org/";if(t.startsWith("Lambda"))return"https://aws.amazon.com/lambda/"}else if("runtime"===e)return p?"https://www.graalvm.org":"https://www.oracle.com/java";return""},k=e=>(0,o.jsx)(s.A,{styles:{body:{padding:16}},hoverable:b(e.key,e.value).length>0,children:(0,o.jsx)(l.A,{title:e.name,valueRender:()=>{return(0,o.jsx)("div",{style:{display:"flex",gap:3,flexFlow:"row",alignItems:"center",fontSize:24,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(t=e.value,s=e,"runtime"===s.key&&(a||p)?(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)(u.A,{}),p&&w.sm&&(0,o.jsx)(d,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):"system"===s.key?s.value.startsWith("Linux")?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):s.value.startsWith("Darwin")?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})," "]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):"usedCacheSpace"===s.key||"usedDiskSpace"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):"usedMemorySpace"===s.key||"totalMemorySpace"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):"dbInfo"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):"cpuInfo"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})}))});var t,s}})});return void 0===t||0===t.length?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(s.A,{size:"small",title:A,styles:{body:{padding:8,overflow:"hidden"}},children:(0,o.jsx)(i.A,{gutter:[8,8],children:t.map(e=>{const t=b(e.key,e.value);return(0,o.jsx)(r.A,{xs:24,md:12,children:t.length>0?(0,o.jsx)(m.N_,{target:"_blank",to:b(e.key,e.value),children:k(e)}):k(e)},e.key)})})})};var b=a(78816),k=a(66577),C=a(63251),S=a(34647),V=a(23236);const Y=e=>{let{data:t}=e;const[a,n]=(0,p.useState)(t),s=(0,S.cz)(),l=5e3,i=(0,p.useRef)(null),d=()=>{"visible"===document.visibilityState?(0,C.b)("/system",s).then(e=>{let{data:t}=e;n(t),i.current=setTimeout(d,l)}):i.current=setTimeout(d,l)};return(0,p.useEffect)(()=>(i.current=setTimeout(d,l),()=>{i&&i.current&&clearTimeout(i.current)}),[]),(0,p.useEffect)(()=>{n(t)},[t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(V.A,{title:(0,b.jY)().systemInfo}),(0,o.jsxs)(k.A,{gutter:[8,8],children:[(0,o.jsx)(r.A,{xs:24,md:12,children:(0,o.jsx)(w,{title:(0,b.jY)().serverInfo,data:a.serverInfos,dockerMode:a.dockerMode,nativeImageMode:a.nativeImageMode})}),(0,o.jsx)(r.A,{xs:24,md:12,children:(0,o.jsx)(w,{title:(0,b.jY)()["admin.index.outline"],data:a.serverInfos2,dockerMode:a.dockerMode,nativeImageMode:a.nativeImageMode})})]})]})}},60425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(44414);const s=e=>{let{data:t}=e;return(0,n.jsx)("iframe",{width:"100%",style:{border:0},height:1200,src:t.url})}},60625:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(51434),s=a(78816),l=a(9950),i=a(65957),r=a(65455),o=a(57686),d=a(62618),c=a(41988),u=a(16738),p=a(66577),m=a(98706),h=a(90582),x=a(42074),g=a(34647),j=a(44414);const y={labelCol:{span:4},wrapperCol:{span:20}},f=e=>{let{record:t,editSuccessCall:a,offline:n}=e;const[f,A]=(0,l.useState)(!1),[v,w]=(0,l.useState)(t),[b,k]=i.Ay.useMessage({maxCount:3}),C=(0,g.cz)();(0,l.useEffect)(()=>{w(t)},[t]);return(0,j.jsxs)(j.Fragment,{children:[k,(0,j.jsx)(x.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),n||A(!0)},children:(0,j.jsx)(h.A,{style:{color:(0,s.eU)()}})}),(0,j.jsx)(r.A,{title:(0,s.jY)().edit,open:f,onOk:()=>{C.post("/api/admin/link/update",v).then(async e=>{let{data:t}=e;t.error?await b.error(t.message):0===t.error&&(A(!1),a&&a())})},onCancel:()=>A(!1),children:(0,j.jsxs)(o.A,{initialValues:v,onValuesChange:(e,t)=>{w(t)},...y,children:[(0,j.jsx)(o.A.Item,{name:"id",style:{display:"none"},children:(0,j.jsx)(d.A,{hidden:!0})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,j.jsx)(d.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.name"],style:{marginBottom:8},name:"linkName",rules:[{required:!0,message:""}],children:(0,j.jsx)(d.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)().introduction,style:{marginBottom:8},name:"alt",rules:[{required:!0,message:""}],children:(0,j.jsx)(m.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,j.jsx)(u.A,{})})})})]})})]})};var A=a(58755);const v={labelCol:{span:4},wrapperCol:{span:20}},w=e=>{let{addSuccessCall:t,offline:a}=e;const[n,h]=(0,l.useState)(!1),[x,y]=(0,l.useState)(),[f,w]=i.Ay.useMessage({maxCount:3}),b=(0,g.cz)();return(0,j.jsxs)(j.Fragment,{children:[w,(0,j.jsx)(A.Ay,{type:"primary",disabled:a,onClick:()=>h(!0),style:{marginBottom:8},children:(0,s.jY)().add}),(0,j.jsx)(r.A,{title:(0,s.jY)().add,open:n,onOk:()=>{b.post("/api/admin/link/add",x).then(async e=>{let{data:a}=e;a.error?await f.error(a.message):0===a.error&&(h(!1),t())})},onCancel:()=>h(!1),children:(0,j.jsxs)(o.A,{onValuesChange:(e,t)=>{y(t)},...v,children:[(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,j.jsx)(d.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.name"],style:{marginBottom:8},name:"linkName",rules:[{required:!0,message:""}],children:(0,j.jsx)(d.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)().introduction,style:{marginBottom:8},name:"alt",rules:[{required:!0,message:""}],children:(0,j.jsx)(m.A,{})})})}),(0,j.jsx)(p.A,{children:(0,j.jsx)(c.A,{span:24,children:(0,j.jsx)(o.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,j.jsx)(u.A,{})})})})]})})]})};var b=a(23236);const k=e=>{let{data:t,offline:a}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.A,{title:(0,s.jY)()["admin.link.manage"]}),(0,j.jsx)(n.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,s.jY)()["admin.link.manage"],dataIndex:"url",key:"url",width:240,render:e=>(0,j.jsx)("a",{style:{display:"inline"},rel:"noopener noreferrer",target:"_blank",href:e,children:e})},{title:(0,s.jY)()["admin.link.name"],key:"linkName",dataIndex:"linkName",width:240,render:e=>(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},{title:(0,s.jY)().introduction,key:"alt",dataIndex:"alt",width:240},{title:(0,s.jY)().order,key:"sort",dataIndex:"sort",width:60}],addBtnRender:e=>(0,j.jsx)(w,{offline:a,addSuccessCall:e}),datasource:t,editBtnRender:(e,t,n)=>(0,j.jsx)(f,{offline:a,record:t,editSuccessCall:n}),deleteApi:"/api/admin/link/delete"})]})}},75997:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(58755),s=a(65957),l=a(87196),i=a(34647),r=a(23236),o=a(23072),d=a(78816),c=a(44414);const u=e=>{let{data:t}=e;const a=(0,i.cz)(),[u,p]=s.Ay.useMessage({maxCount:3});return(0,c.jsxs)(c.Fragment,{children:[p,(0,c.jsx)(r.A,{title:(0,d.jY)().dev}),(0,c.jsx)(n.Ay,{type:"primary",onClick:async()=>{const{data:e}=await a.get("/api/admin/dev/releaseLocks");e.error?u.error(e.message):u.success(e.message)},children:"Release All Lock"}),(0,c.jsx)(o.A,{}),(0,c.jsx)(l.A,{columns:[{title:(0,d.jY)().key,dataIndex:"name",key:"name"},{title:(0,d.jY)().value,dataIndex:"remark",key:"remark"}],dataSource:t.locks})]})}},82961:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});var n=a(81510),s=a(66577),l=a(55352),i=a(44361),r=a(23072),o=a(32077),d=a(16471),c=a(54021),u=a(66276),p=a(65472),m=a(78433),h=a(40841),x=a(55995),g=a(58755),j=a(9950),y=a(78816),f=a(28429),A=a(42074),v=a(73149),w=a(34647),b=a(63251),k=a(85221),C=a(44414);const S=e=>{let{data:t}=e;const[a,n]=(0,j.useState)(t),S=(0,w.cz)(),V=(0,f.zy)(),Y=()=>{(0,b.b)("/template",S).then(e=>{let{data:t}=e;n(t),(0,k.ls)(t,V.pathname)})};(0,j.useEffect)(()=>{n(t)},[t]);const F=e=>{const t=[];return t.push((0,C.jsx)("div",{onClick:()=>{return t=e.shortTemplate,void S.post("/api/admin/template/preview?shortTemplate="+t).then(()=>{window.open(document.baseURI,"_blank"),Y()});var t},children:(0,C.jsx)(c.A,{},"preview")}),(0,C.jsx)(A.N_,{to:(0,y.dW)("/template-config?shortTemplate="+e.shortTemplate),children:(0,C.jsx)(u.A,{},"setting")}),(0,C.jsx)("div",{onClick:()=>{return t=e.shortTemplate,void S.post("/api/admin/template/apply?shortTemplate="+t).then(()=>{Y()});var t},children:(0,C.jsx)(p.A,{})})),e.deleteAble&&t.push((0,C.jsx)(v.A,{title:(0,y.jY)().deleteTips,onConfirm:()=>{var t;t=e.shortTemplate,S.post("/api/admin/template/delete?shortTemplate="+t).then(()=>{Y()})},children:(0,C.jsx)(m.A,{},"delete")})),t};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.A,{level:4,children:(0,y.jY)()["admin.template.manage"]}),(0,C.jsx)(r.A,{}),(0,C.jsx)(s.A,{gutter:[16,16],children:a.map(e=>(0,C.jsx)(l.A,{md:6,xxl:4,xs:24,children:(0,C.jsx)(o.A.Ribbon,{text:e.use?(0,y.jY)()["admin.theme.inUse"]:e.preview?(0,y.jY)()["admin.theme.inPreview"]:"",style:{fontSize:16,display:e.use||e.preview?"":"none"},children:(0,C.jsx)(d.A,{hoverable:!0,cover:(0,C.jsx)("img",{style:{width:"100%",minHeight:250},alt:e.name,title:e.name,src:(0,y.XW)()+e.adminPreviewImage.substring(1)}),actions:F(e),children:(0,C.jsx)(x.A,{title:e.name,description:e.digest})})})}))}),(0,C.jsx)(r.A,{}),(0,C.jsx)(A.N_,{to:(0,y.dW)(`/template-center?host=${(0,y.M$)()?new URL((0,y.XW)()).host:window.location.host}`),children:(0,C.jsx)(g.Ay,{icon:(0,C.jsx)(h.A,{}),type:"primary",children:(0,y.jY)()["admin.theme.download"]})})]})};var V=a(57686),Y=a(62618),F=a(71751),z=a(65957);const I={labelCol:{span:8},wrapperCol:{span:16}},R=e=>{let{data:t,offlineData:a,offline:n,onSuccess:s}=e;const[l,o]=(0,j.useState)(t),[d]=V.A.useForm(),[c,u]=z.Ay.useMessage({maxCount:3}),[p,m]=(0,j.useState)(!1),h=(0,w.cz)();return(0,j.useEffect)(()=>{o(t),d.setFieldsValue(t)},[t]),(0,C.jsxs)(C.Fragment,{children:[u,(0,C.jsxs)(V.A,{form:d,...I,initialValues:t,disabled:n||a,onValuesChange:(e,t)=>o({...l,...t}),onFinish:e=>(async e=>{if(!p)try{m(!0);const{data:t}=await h.post("/api/admin/website/blog",{...d,...e});if(m(!1),t.error)return void await c.error(t.message);0===t.error?(await c.success(t.message),s(t.data),window.location.reload()):await c.error(t.message)}catch(t){m(!1),await c.error(t.message)}finally{m(!1)}})(e),children:[(0,C.jsx)(i.A,{level:4,children:(0,y.jY)()["admin.blog.manage"]}),(0,C.jsx)(r.A,{}),(0,C.jsx)(V.A.Item,{name:"host",label:"\u535a\u5ba2\u57df\u540d\uff08Host\uff09",children:(0,C.jsx)(Y.A,{style:{maxWidth:"300px"},placeholder:"\u7559\u7a7a\uff0c\u7a0b\u5e8f\u5c06\u8bfb\u53d6\u63a5\u6536\u5230\u7684 Host \u5b57\u6bb5"})}),(0,C.jsx)(V.A.Item,{valuePropName:"checked",name:"generator_html_status",label:"\u9759\u6001\u5316\u6587\u7ae0\u9875",children:(0,C.jsx)(F.A,{size:"small"})}),(0,C.jsx)(V.A.Item,{valuePropName:"checked",name:"disable_comment_status",label:"\u5173\u95ed\u8bc4\u8bba",children:(0,C.jsx)(F.A,{size:"small"})}),(0,C.jsx)(V.A.Item,{valuePropName:"checked",name:"article_thumbnail_status",label:(0,y.jY)().articleCover,children:(0,C.jsx)(F.A,{size:"small"})}),(0,C.jsx)(r.A,{}),(0,C.jsx)(g.Ay,{loading:p,type:"primary",disabled:n||a,htmlType:"submit",children:(0,y.jY)().submit})]})]})};var q=a(98706),D=a(30723),M=a(36256),T=a(39454),L=a(46740);const U=e=>{let{onChange:t,url:a}=e;return(0,C.jsxs)(L.A,{accept:"image/*",height:64,beforeUpload:e=>(async e=>new Promise((a,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{const e=s.result;t&&t(e),n()}}))(e),style:{overflow:"hidden",height:64,width:64},children:[(void 0===a||null===a||""===a)&&(0,C.jsx)("p",{className:"ant-upload-drag-icon",style:{padding:"18px 0",margin:0,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,C.jsx)(D.A,{style:{fontSize:"28px"}})}),null!=a&&""!==a&&(0,C.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,C.jsx)(T.A,{style:{borderRadius:8,position:"relative"},preview:!1,src:a,wrapperStyle:{position:"relative"}}),(0,C.jsx)("div",{style:{position:"absolute",right:0,top:0,borderRadius:"0 8px",padding:4,background:(0,y.eU)()+"5e",color:"white",fontSize:16},onClick:e=>{t&&t(null),e.stopPropagation()},children:(0,C.jsx)(M.A,{})})]})]})},E={labelCol:{span:8},wrapperCol:{span:16}},W=e=>{let{data:t,offlineData:a,offline:n,onSuccess:s}=e;const[l,o]=(0,j.useState)(t),[d]=V.A.useForm(),[c,u]=(0,j.useState)(!1),[p,m]=z.Ay.useMessage({maxCount:3}),h=(0,w.cz)();return(0,j.useEffect)(()=>{o(t),d.setFieldsValue(t)},[t]),(0,C.jsxs)(C.Fragment,{children:[m,(0,C.jsx)(i.A,{level:4,children:(0,y.jY)()["admin.basic.manage"]}),(0,C.jsx)(r.A,{}),(0,C.jsxs)(V.A,{form:d,...E,disabled:n||a,initialValues:t,onValuesChange:(e,t)=>o({...l,...t}),onFinish:async e=>await(async e=>{if(!c)try{u(!0);const{data:t}=await h.post("/api/admin/website/basic",{...d,...e});if(u(!1),t.error)return void await p.error(t.message);0===t.error?(await p.success(t.message),s(t.data),window.location.reload()):await p.error(t.message)}catch(t){u(!1),await p.error(t.message)}finally{u(!1)}})(e),children:[(0,C.jsx)(V.A.Item,{name:"title",label:"\u7f51\u7ad9\u6807\u9898",rules:[{required:!0}],children:(0,C.jsx)(Y.A,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u6807\u9898",showCount:!0,maxLength:30})}),(0,C.jsx)(V.A.Item,{name:"second_title",label:"\u7f51\u7ad9\u526f\u6807\u9898",children:(0,C.jsx)(Y.A,{placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u526f\u6807\u9898",showCount:!0,maxLength:30})}),(0,C.jsx)(V.A.Item,{name:"keywords",label:"\u7f51\u7ad9\u5173\u952e\u8bcd",children:(0,C.jsx)(Y.A,{showCount:!0,placeholder:"\u8bf7\u8f93\u5165\u7f51\u7ad9\u5173\u952e\u8bcd",maxLength:40})}),(0,C.jsx)(V.A.Item,{name:"description",label:(0,y.jY)().websiteDesc,children:(0,C.jsx)(q.A,{showCount:!0,rows:5,maxLength:160})}),(0,C.jsx)(V.A.Item,{name:"favicon_ico_base64",label:`${(0,y.jY)().favicon}`,children:(0,C.jsx)(U,{url:l.favicon_ico_base64,onChange:e=>{o({...l,favicon_ico_base64:e||""})}})}),(0,C.jsx)(r.A,{}),(0,C.jsx)(g.Ay,{loading:c,disabled:n||a,type:"primary",htmlType:"submit",children:(0,y.jY)().submit})]})]})},H={labelCol:{span:8},wrapperCol:{span:16}},B=e=>{let{data:t,offline:a,offlineData:n,onSuccess:s}=e;const[l,o]=(0,j.useState)(t),[d]=V.A.useForm(),[c,u]=z.Ay.useMessage({maxCount:3}),[p,m]=(0,j.useState)(!1),h=(0,w.cz)();return(0,j.useEffect)(()=>{o(t),d.setFieldsValue(t)},[t]),(0,C.jsxs)(C.Fragment,{children:[u,(0,C.jsx)(i.A,{level:4,children:(0,y.jY)()["admin.other.manage"]}),(0,C.jsx)(r.A,{}),(0,C.jsxs)(V.A,{form:d,...H,disabled:a||n,initialValues:t,onValuesChange:(e,t)=>o({...l,...t}),onFinish:e=>(async e=>{if(!p)try{m(!0);const{data:t}=await h.post("/api/admin/website/other",{...l,...e});if(m(!1),t.error)return void await c.error(t.message);0===t.error?(await c.success(t.message),s(t.data),window.location.reload()):await c.error(t.message)}catch(t){m(!1),await c.error(t.message)}finally{m(!1)}})(e),children:[(0,C.jsx)(V.A.Item,{name:"icp",label:"ICP\u5907\u6848\u4fe1\u606f",children:(0,C.jsx)(q.A,{})}),(0,C.jsx)(V.A.Item,{name:"webCm",label:"\u7f51\u7ad9\u7edf\u8ba1",children:(0,C.jsx)(q.A,{rows:7})}),(0,C.jsx)(V.A.Item,{name:"robotRuleContent",label:"robots.txt",children:(0,C.jsx)(q.A,{rows:7,placeholder:"User-agent: *\nDisallow: /admin/"})}),(0,C.jsx)(r.A,{}),(0,C.jsx)(g.Ay,{disabled:a||n,loading:p,type:"primary",htmlType:"submit",children:(0,y.jY)().submit})]})]})};var P=a(26206),N=a(20212),O=a(36332);const K={labelCol:{span:8},wrapperCol:{span:16}},G=e=>{let{data:t,offlineData:a,offline:n,onSuccess:i}=e;const[o,d]=(0,j.useState)(!1),{modal:c}=N.A.useApp(),[u,p]=z.Ay.useMessage({maxCount:3}),[m,h]=(0,j.useState)(t),[x]=V.A.useForm(),[A,v]=(0,j.useState)(!1),b=(0,f.Zp)(),k=(0,w.cz)();return(0,j.useEffect)(()=>{h(t),x.setFieldsValue(t)},[t]),(0,C.jsxs)("div",{style:{maxWidth:600},children:[p,(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,children:(0,C.jsx)(g.Ay,{type:"dashed",disabled:n||a,loading:o,onClick:async()=>{if(!o){d(!0);try{const{data:e}=await k.get("/api/admin/upgrade");if(e.data.upgrade){const t=`${(0,y.jY)().newVersion} - #${e.data.version.type}`;c.info({width:682,title:t,content:(0,C.jsx)(O.A,{data:e.data}),closable:!0,okText:(0,y.jY)().doUpgrade,onOk:function(){b((0,y.dW)("/upgrade"))}})}else 0===e.error&&(d(!1),await u.info(e.message))}finally{d(!1)}}},style:{float:"right"},children:(0,y.jY)().checkUpgrade})})}),(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,children:(0,C.jsxs)(V.A,{form:x,...K,disabled:n||a,initialValues:t,onValuesChange:(e,t)=>h({...m,...t}),onFinish:e=>(async e=>{if(!A)try{v(!0);const{data:t}=await k.post("/api/admin/website/upgrade",{...x,...e});if(v(!1),t.error)return void await u.error(t.message);0===t.error?(await u.success(t.message),i(t.data)):await u.error(t.message)}catch(t){v(!1),await u.error(t.message)}finally{v(!1)}})(e),children:[(0,C.jsx)(V.A.Item,{name:"autoUpgradeVersion",label:(0,y.jY)()["admin.upgrade.autoCheckCycle"],children:(0,C.jsxs)(P.A,{style:{maxWidth:"120px"},children:[(0,C.jsx)(P.A.Option,{value:86400,children:(0,y.jY)()["admin.upgrade.cycle.oneDay"]},"86400"),(0,C.jsx)(P.A.Option,{value:604800,children:(0,y.jY)()["admin.upgrade.cycle.oneWeek"]},"604800"),(0,C.jsx)(P.A.Option,{value:1296e3,children:(0,y.jY)()["admin.upgrade.cycle.halfMonth"]},"1296000"),(0,C.jsx)(P.A.Option,{value:-1,children:(0,y.jY)()["admin.upgrade.cycle.never"]},"-1")]})}),(0,C.jsx)(V.A.Item,{valuePropName:"checked",name:"upgradePreview",label:(0,y.jY)()["admin.upgrade.canPreview"],children:(0,C.jsx)(F.A,{size:"small"})}),(0,C.jsx)(r.A,{}),(0,C.jsx)(g.Ay,{disabled:n||a,loading:A,type:"primary",htmlType:"submit",children:(0,y.jY)().submit})]})})})]})};var X=a(83331),Z=a(37596),J=a(47475),Q=a(1884);const _={labelCol:{span:8},wrapperCol:{span:16}},{Option:$}=P.A,ee=e=>{let{data:t,offlineData:a,offline:n,onSuccess:s}=e;const[l,o]=(0,j.useState)(t),[d]=V.A.useForm(),[c,u]=z.Ay.useMessage({maxCount:3}),[p,m]=(0,j.useState)(!1),h=(0,f.zy)(),x=(0,w.cz)(),A=()=>"zh_CN"===(0,y.jY)().lang?J.A.Pagination.items_per_page:Q.A.Pagination.items_per_page;return(0,j.useEffect)(()=>{o(t),d.setFieldsValue(t)},[t]),(0,C.jsxs)(C.Fragment,{children:[u,(0,C.jsxs)(V.A,{..._,form:d,disabled:n||a,initialValues:t,onValuesChange:(e,t)=>o({...l,...t}),onFinish:e=>(async e=>{try{m(!0);const{data:t}=await x.post("/api/admin/website/admin",{...d,...e});if(m(!1),t.error)return void await c.error(t.message);0===t.error?(await c.success(t.message),s(t.data),window.location.search=(0,y.dW)(h.pathname).split("?")[1],window.location.reload()):await c.error(t.message)}catch(t){m(!1),await c.error(t.message)}finally{m(!1)}})(e),children:[(0,C.jsx)(i.A,{level:4,children:(0,y.jY)()["admin.admin.manage"]}),(0,C.jsx)(r.A,{}),(0,C.jsx)(V.A.Item,{name:"admin_static_resource_base_url",label:"\u7ba1\u7406\u9875\u9759\u6001\u8d44\u6e90\uff08URL\uff09",children:(0,C.jsx)(Y.A,{style:{maxWidth:"300px"},placeholder:"\u7559\u7a7a\uff0c\u53ca\u7981\u7528"})}),(0,C.jsx)(V.A.Item,{name:"session_timeout",label:"\u7ba1\u7406\u754c\u9762\u4f1a\u8bdd\u8d85\u65f6",rules:[{required:!0}],children:(0,C.jsx)(Y.A,{suffix:"\u5206\u949f",style:{maxWidth:"120px"},max:99999,type:"number",min:5,placeholder:""})}),(0,C.jsx)(V.A.Item,{name:"language",label:(0,y.jY)().language,children:(0,C.jsxs)(P.A,{style:{maxWidth:"120px"},children:[(0,C.jsx)($,{value:"zh_CN",children:(0,y.jY)().languageChinese}),(0,C.jsx)($,{value:"en_US",children:(0,y.jY)().languageEnglish})]})}),(0,C.jsx)(V.A.Item,{valuePropName:"checked",name:"admin_darkMode",label:(0,y.jY)()["admin.dark.mode"],children:(0,C.jsx)(F.A,{size:"small"})}),(0,C.jsx)(V.A.Item,{name:"admin_article_page_size",label:(0,y.jY)().admin_article_page_size,children:(0,C.jsx)(P.A,{style:{maxWidth:"120px"},options:[{value:10,label:"10 "+A()},{value:20,label:"20 "+A()},{value:50,label:"50 "+A()},{value:100,label:"100 "+A()}]})}),(0,C.jsx)(V.A.Item,{label:(0,y.jY)()["admin.color.primary"],children:(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,C.jsx)(X.A,{value:l.admin_color_primary,onChange:e=>{o({...l,admin_color_primary:e.toHexString()})},presets:[{defaultOpen:!0,label:"\u9884\u8bbe",colors:Z.xg}]}),(0,C.jsx)("span",{style:{paddingLeft:8},children:l.admin_color_primary})]})}),(0,C.jsx)(V.A.Item,{name:"favicon_png_pwa_192_base64",label:`${(0,y.jY)().favicon} PWA (192px)`,children:(0,C.jsx)(U,{url:l.favicon_png_pwa_192_base64,onChange:e=>{o({...l,favicon_png_pwa_192_base64:e||""})}})}),(0,C.jsx)(V.A.Item,{name:"favicon_png_pwa_512_base64",label:`${(0,y.jY)().favicon} PWA (512px)`,children:(0,C.jsx)(U,{url:l.favicon_png_pwa_512_base64,onChange:e=>{o({...l,favicon_png_pwa_512_base64:e||""})}})}),(0,C.jsx)(i.A,{level:4,children:"\u6587\u7ae0/\u7f16\u8f91\u5668\u8bbe\u7f6e"}),(0,C.jsx)(r.A,{}),(0,C.jsx)(V.A.Item,{name:"article_auto_digest_length",label:"\u6587\u7ae0\u81ea\u52a8\u6458\u8981\u6700\u5927\u957f\u5ea6",children:(0,C.jsx)(Y.A,{suffix:"\u5b57",style:{maxWidth:"120px"},max:99999,type:"number",min:-1,placeholder:""})}),(0,C.jsx)(r.A,{}),(0,C.jsx)(g.Ay,{loading:p,disabled:n||a,type:"primary",htmlType:"submit",children:(0,y.jY)().submit})]})]})};var te=a(23236);const ae=e=>{let{data:t,offline:a,offlineData:i,activeKey:r,updateCache:o}=e;const d=(0,f.zy)(),c=(e,t)=>{const a="basic"===e?"/website":"/website/"+e;return(0,C.jsx)(A.N_,{to:(0,y.dW)(a),replace:!0,style:{color:r===e?(0,y.eU)():"inherit"},children:t})},u=e=>{const t=new URL(window.location.href),a=(0,k.Rn)(d.pathname,"?"+t.searchParams.toString());o&&o(e,a)},p=()=>"basic"===r?(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,style:{maxWidth:600},children:(0,C.jsx)(W,{offlineData:i,onSuccess:e=>{u(e)},offline:a,data:t})})}):"blog"===r?(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,style:{maxWidth:600},children:(0,C.jsx)(R,{offlineData:i,onSuccess:e=>{u(e)},offline:a,data:t})})}):"admin"===r?(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,style:{maxWidth:600},children:(0,C.jsx)(ee,{offlineData:i,onSuccess:e=>{u(e)},offline:a,data:t})})}):"template"===r?(0,C.jsx)(S,{data:t}):"other"===r?(0,C.jsx)(s.A,{children:(0,C.jsx)(l.A,{xs:24,style:{maxWidth:600},children:(0,C.jsx)(B,{onSuccess:e=>{u(e)},offlineData:i,offline:a,data:t})})}):"upgrade"===r?(0,C.jsx)(G,{offlineData:i,onSuccess:e=>{u(e)},offline:a,data:t}):(0,C.jsx)(C.Fragment,{});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(te.A,{title:(0,y.jY)()["admin.setting"]}),(0,C.jsx)(n.A,{activeKey:r,items:[{key:"basic",label:c("basic",(0,y.jY)()["admin.basic.manage"]),children:p()},{key:"blog",label:c("blog",(0,y.jY)()["admin.blog.manage"]),children:p()},{key:"admin",label:c("admin",(0,y.jY)()["admin.admin.manage"]),children:p()},{key:"template",label:c("template",(0,y.jY)()["admin.template.manage"]),children:p()},{key:"other",label:c("other",(0,y.jY)()["admin.other.manage"]),children:p()},{key:"upgrade",label:c("upgrade",(0,y.jY)()["admin.upgrade.manage"]),children:p()}]})]})}},84311:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(78816),s=a(45442),l=a(44414);const i=e=>{let{data:t,offline:a}=e;const i=(0,n.XW)()+t.includePagePath;return a?(0,l.jsx)(s.default,{}):(0,l.jsx)("iframe",{width:"100%",style:{border:0},height:1200,src:i})}},87085:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(9950),s=a(63691),l=a(65957),i=a(34647),r=a(29008),o=a(54209),d=a(44414);const c=e=>{let{data:t}=e;const[a,c]=(0,n.useState)({synced:t.synced,syncing:!1}),u=(0,i.cz)(),[p,m]=l.Ay.useMessage({maxCount:3});return(0,d.jsxs)(d.Fragment,{children:[m,(0,d.jsx)(s.A,{style:{display:a.synced?"none":"inherit"},onClick:async()=>{c({synced:!1,syncing:!0});const{data:e}=await u.post("/api/admin/static-site/startSync");if(e.error)return p.error("\u540c\u6b65\u5931\u8d25 -> "+e.message),void c({synced:!1,syncing:!1});e.data&&(e.data.synced?(p.success("\u540c\u6b65\u5b8c\u6210"),c({synced:e.data.synced,syncing:!1}),window.location.reload()):(p.info("\u540c\u6b65\u672a\u5b8c\u6210"),c({synced:!1,syncing:!1})))},icon:a.syncing?(0,d.jsx)(r.A,{}):(0,d.jsx)(o.A,{})})]})}},92331:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(23072),s=a(57686),l=a(62618),i=a(65957),r=a(87094),o=a(58755),d=a(55352),c=a(78816),u=a(34647),p=a(23236),m=a(44414);const h={labelCol:{span:8},wrapperCol:{span:16}},x=e=>{let{offline:t}=e;const[a,x]=i.Ay.useMessage({maxCount:3}),g=(0,u.cz)();return(0,m.jsxs)(m.Fragment,{children:[x,(0,m.jsx)(p.A,{title:(0,c.jY)()["admin.changePwd"]}),(0,m.jsx)(r.A,{children:(0,m.jsx)(d.A,{style:{maxWidth:600},xs:24,children:(0,m.jsxs)(s.A,{...h,onFinish:e=>{return t=e,void g.post("/api/admin/user/updatePassword",t).then(async e=>{let{data:t}=e;t.error?await a.error(t.message):0===t.error&&await a.success(t.message)});var t},children:[(0,m.jsx)(s.A.Item,{name:"oldPassword",label:(0,c.jY)()["admin.oldPassword"],rules:[{required:!0}],children:(0,m.jsx)(l.A.Password,{})}),(0,m.jsx)(s.A.Item,{name:"newPassword",label:(0,c.jY)()["admin.newPassword"],rules:[{required:!0}],children:(0,m.jsx)(l.A.Password,{})}),(0,m.jsx)(n.A,{}),(0,m.jsx)(o.Ay,{disabled:t,type:"primary",htmlType:"submit",children:(0,c.jY)().submit})]})})})]})}},94916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(9950),s=a(83331),l=a(57686),i=a(62618),r=a(65957),o=a(87094),d=a(23072),c=a(58755),u=a(39454),p=a(98706),m=a(55352),h=a(78816),x=a(71751),g=a(37596),j=a(34647),y=a(37838),f=a(23236),A=a(30723),v=a(16471),w=a(44414);const b={labelCol:{span:8},wrapperCol:{span:16}},k=e=>{const t={};for(const[a,n]of Object.entries(e.config))t[a]=n.value;return t},C=e=>{let{data:t,offline:a,offlineData:C}=e;const S=k(t),[V,Y]=(0,n.useState)({config:t.config,dataMap:S,loading:!1}),[F]=l.A.useForm(),[z,I]=r.Ay.useMessage({maxCount:3}),R=(e,t)=>"file"===t.type?(0,w.jsx)(y.A,{style:{width:96,height:96},onSuccess:t=>((e,t)=>{V.dataMap[t]=e.data.url,Y({...V,dataMap:V.dataMap})})(t,e),name:"imgFile",onError:e=>{z.error(e.message)},action:"/api/admin/upload?dir=image",children:V.dataMap[e]&&V.dataMap[e].length>0?(0,w.jsx)(u.A,{style:{borderRadius:8},preview:!1,height:96,width:96,src:V.dataMap[e]}):(0,w.jsx)("p",{className:"ant-upload-drag-icon",style:{borderRadius:8,margin:0,width:96,height:96,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,w.jsx)(A.A,{style:{fontSize:36}})})}):"switch"===t.htmlElementType?(0,w.jsx)(x.A,{size:"small"}):"textarea"===t.htmlElementType||"large-textarea"===t.htmlElementType?(0,w.jsx)(p.A,{rows:"large-textarea"===t.htmlElementType?20:5,placeholder:t.placeholder}):"hidden"===t.type?(0,w.jsx)(i.A,{hidden:!0}):"colorPicker"===t.htmlElementType?(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,w.jsx)(s.A,{value:V.dataMap[e],onChange:t=>{V.dataMap[e]=t.toHexString(),Y({...V,dataMap:V.dataMap})},presets:[{defaultOpen:!0,label:"\u9884\u8bbe",colors:g.xg}]}),(0,w.jsx)("span",{style:{paddingLeft:8},children:V.dataMap[e]})]}):(0,w.jsx)(i.A,{type:t.type,placeholder:t.placeholder}),q=(0,j.cz)();return(0,n.useEffect)(()=>{Y({config:t.config,dataMap:k(t),loading:!1})},[t]),(0,w.jsxs)(w.Fragment,{children:[I,(0,w.jsx)(f.A,{title:(0,h.jY)().templateConfig}),(0,w.jsx)(o.A,{children:(0,w.jsx)(m.A,{xs:24,style:{maxWidth:600},children:(0,w.jsxs)(l.A,{form:F,disabled:a||C,onFinish:()=>(async()=>{Y(e=>({...e,loading:!0}));try{const{data:e}=await q.post("/api/admin/template/config",V.dataMap);e.error?z.error(e.message):0===e.error&&z.success(e.message)}finally{Y(e=>({...e,loading:!1}))}})(),initialValues:V.dataMap,onValuesChange:(e,t)=>{return a=t,void Y({...V,dataMap:a});var a},...b,children:[(()=>{const e=[];for(const[t,a]of Object.entries(V.config)){const n=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.A.Item,{label:a.label,name:t,style:{display:"hidden"===a.type?"none":""},children:R(t,a)},t),"html"===a.contentType&&(0,w.jsx)(l.A.Item,{label:" ",colon:!1,style:{display:"hidden"===a.type?"none":""},children:(0,w.jsx)(v.A,{title:(0,h.jY)().preview+" ("+a.contentType+")",size:"small",style:{overflow:"hidden"},children:(0,w.jsx)("div",{style:{userSelect:"none"},dangerouslySetInnerHTML:{__html:V.dataMap[t]}})})})]});e.push(n)}return e})(),(0,w.jsx)(d.A,{}),(0,w.jsx)(c.Ay,{loading:V.loading,disabled:a||C,type:"primary",htmlType:"submit",children:(0,h.jY)().submit})]})})})]})}},97554:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(66577),s=a(55352),l=a(78816),i=(a(9950),a(44414));const r=e=>{const t=new Date,a=new Date(t);a.setFullYear(t.getFullYear()-1),a.setDate(1);const n=[],s=new Map(e.map(e=>[e.date,e.count])),l=a;for(;l<=t;){const e=l.toISOString().split("T")[0];n.push({date:e,count:s.get(e)||0}),l.setDate(l.getDate()+1)}return n},o=e=>{let{data:t}=e;const a=20,n=(()=>{var e;const a=[];let n=[];const s=(new Date(null===(e=t[0])||void 0===e?void 0:e.date).getDay()+6)%7;for(let t=0;t<s;t++)n.push({date:"",count:0});for(t.forEach(e=>{n.push(e),7===n.length&&(a.push(n),n=[])});n.length>0&&n.length<7;)n.push({date:"",count:0});return 7===n.length&&a.push(n),a})(),s=(()=>{const e=[],a=(0,l.jY)().lang.includes("en")?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"];let n=-1;return t.forEach((t,s)=>{const l=new Date(t.date).getMonth();l!==n&&(n=l,e.push({x:15*Math.floor(s/7),name:a[l]}))}),e})();return(0,i.jsxs)("svg",{width:15*n.length+a,height:125,children:[s.map((e,t)=>(0,i.jsx)("text",{x:e.x+a,y:15,fontSize:"10",fill:"#666",children:e.name},t)),("en"===(0,l.jY)().lang?["Mon","Wed","Fri"]:["\u4e00","\u4e09","\u4e94"]).map((e,t)=>(0,i.jsx)("text",{x:15,y:20+15*(2*t+1)-9,fontSize:"7",fill:"#666",textAnchor:"end",dominantBaseline:"middle",children:e},t)),n.map((e,t)=>e.map((e,n)=>{return(0,i.jsx)("rect",{x:15*t+a,y:15*n+a,width:10,height:10,rx:2,ry:2,fill:(s=e.count,0===s?"#ebedf0":s<2?"#9be9a8":s<4?"#40c463":s<8?"#30a14e":"#216e39"),stroke:"#ccc",children:(0,i.jsx)("title",{children:e.date?`${e.date}. ${(0,l.jY)().article}: ${e.count}`:"No data"})},`${t}-${n}`);var s}))]})};var d=a(16471);const c=e=>{let{style:t}=e;return(0,i.jsxs)("svg",{viewBox:"0 0 1184 110",version:"1.1",style:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"83.2669495%",id:"linearGradient-1",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"91.2632575%",id:"linearGradient-2",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"59.9205505%",y1:"0%",x2:"59.9205505%",y2:"58.498623%",id:"linearGradient-3",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"83.2669495%",id:"linearGradient-4",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"57.8754399%",x2:"69.320672%",y2:"-30.4426258%",id:"linearGradient-5",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"57.8754399%",x2:"54.1588945%",y2:"-25.4561623%",id:"linearGradient-6",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]})]}),(0,i.jsx)("g",{id:"\u9875\u9762-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,i.jsx)("g",{id:"\u753b\u677f\u5907\u4efd-6",transform:"translate(-232.000000, -72.000000)",children:(0,i.jsx)("g",{id:"\u6b22\u8fce\u9875\u5934",transform:"translate(232.000000, 72.000000)",children:(0,i.jsxs)("g",{id:"\u7f16\u7ec4-20",transform:"translate(-85.000000, -92.000000)",children:[(0,i.jsx)("path",{d:"M1078.5,79 L1162,120.419823 L1081.837,160.338 L1082,160.419823 L998.5,202 L915,160.419823 L995.319,120.578 L995,120.419823 L1078.5,79 Z",id:"Combined-Shape-Copy",fill:"url(#linearGradient-1)",opacity:"0.600000024"}),(0,i.jsx)("polygon",{id:"Combined-Shape-Copy",fill:"url(#linearGradient-2)",opacity:"0.600000024",points:"998 212.290499 997.513792 160 915 172.656071 915 254"}),(0,i.jsx)("polygon",{id:"Combined-Shape-Copy",fill:"url(#linearGradient-3)",opacity:"0.600000024",transform:"translate(1080.000000, 205.000000) scale(-1, 1) translate(-1080.000000, -205.000000)",points:"998.474969 208.231442 998 120 1161.5 201.633959 1162 290"}),(0,i.jsx)("path",{d:"M583.5,0 L667,41.4198232 L586.837,81.338 L587,81.4198232 L503.5,123 L420,81.4198232 L500.319,41.578 L500,41.4198232 L583.5,0 Z",id:"Combined-Shape-Copy-5",fill:"url(#linearGradient-1)",opacity:"0.400000006"}),(0,i.jsx)("path",{d:"M1347.5,99 L1431,140.419823 L1350.837,180.338 L1351,180.419823 L1267.5,222 L1184,180.419823 L1264.319,140.578 L1264,140.419823 L1347.5,99 Z",id:"Combined-Shape-Copy-3",fill:"url(#linearGradient-1)",opacity:"0.400000006"}),(0,i.jsx)("path",{d:"M163.5,99 L247,140.419823 L166.837,180.338 L167,180.419823 L83.5,222 L0,180.419823 L80.319,140.578 L80,140.419823 L163.5,99 Z",id:"Combined-Shape-Copy-4",strokeOpacity:"0",stroke:"#247FFF",strokeWidth:"20",fill:"url(#linearGradient-1)",opacity:"0.600000024"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-4)",opacity:"0.600000024",points:"848.5 137 895 160.545401 848.5 184 802 160.545401"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-5)",opacity:"0.600000024",points:"802 211.30906 848 235 848 184.599576 802 161"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-6)",opacity:"0.600000024",points:"894 211.322199 848 235 848 184.586413 894 161"}),(0,i.jsx)("polygon",{id:"Polygon-Copy-5",strokeOpacity:"0",stroke:"#60ACFF",opacity:"0.300000012",transform:"translate(848.500000, 146.500000) scale(1, -1) translate(-848.500000, -146.500000)",points:"848.5 123 895 146.545401 848.5 170 802 146.545401"}),(0,i.jsx)("path",{d:"M1078.5,52 L1162,93.4198232 L1081.837,133.338 L1082,133.419823 L998.5,175 L915,133.419823 L995.319,93.578 L995,93.4198232 L1078.5,52 Z",id:"Combined-Shape",strokeOpacity:"0",stroke:"#000A1A",opacity:"0.300000012"}),(0,i.jsx)("path",{d:"M694.5,150 L778,191.419823 L697.837,231.338 L698,231.419823 L614.5,273 L531,231.419823 L611.319,191.578 L611,191.419823 L694.5,150 Z",id:"Combined-Shape-Copy-2",strokeOpacity:"0",stroke:"#60ACFF",fill:"url(#linearGradient-1)",opacity:"0.300000012"}),(0,i.jsx)("path",{d:"M348.5,181 L432,222.419823 L351.837,262.338 L352,262.419823 L268.5,304 L185,262.419823 L265.319,222.578 L265,222.419823 L348.5,181 Z",id:"Combined-Shape-Copy-6",strokeOpacity:"0",stroke:"#60ACFF",fill:"url(#linearGradient-1)",opacity:"0.300000012"})]})})})})]})};var u=a(35434),p=a(3646),m=a(47293),h=a(9774),x=a(50198),g=a(82278),j=a(42074);const y=e=>{let{data:t,versionInfo:a}=e;const r=(e,t)=>(0,i.jsxs)("div",{style:{display:"flex",gap:3,flexFlow:"row",alignItems:"center",fontSize:24,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e,(0,i.jsx)(p.A.Text,{style:{fontSize:18,lineHeight:"28px"},ellipsis:!0,children:t})]});return(0,i.jsxs)(d.A,{size:"small",title:(0,l.jY)()["admin.index.outline"],children:[(0,i.jsxs)(n.A,{gutter:[8,8],children:[(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},children:(0,i.jsx)(m.A,{title:(0,l.jY)().todayComment,valueRender:()=>r((0,i.jsx)(h.A,{}),t.toDayCommCount)})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/comment"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalComment,valueRender:()=>r((0,i.jsx)(h.A,{}),t.commCount)})})})})]}),(0,i.jsxs)(n.A,{gutter:[8,8],style:{paddingTop:8},children:[(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/article"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalArticle,valueRender:()=>r((0,i.jsx)(x.A,{}),t.articleCount)})})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalArticleView,valueRender:()=>r((0,i.jsx)(x.A,{}),t.clickCount)})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/system"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().systemInfo,valueRender:()=>r((0,i.jsx)(g.A,{}),a)})})})})]})]})};var f=a(24937),A=a(23236),v=a(87094),w=a(41988),b=a(53387),k=a(44373),C=a(95770);const S=()=>(0,i.jsx)(d.A,{title:"\u5feb\u6377\u64cd\u4f5c",size:"small",styles:{body:{overflow:"auto",marginTop:8,marginRight:8}},style:{marginTop:8},children:(0,i.jsxs)(v.A,{gutter:[8,8],children:[(0,i.jsx)(w.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/article-edit"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(b.A,{style:{fontSize:28,color:(0,l.eU)()}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:8,whiteSpace:"nowrap"},children:"\u5199\u6587\u7ae0"})]})})})}),(0,i.jsx)(w.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/article-type"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(k.A,{style:{fontSize:28,color:(0,l.eU)()}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:4,whiteSpace:"nowrap"},children:"\u5206\u7c7b"})]})})})}),(0,i.jsx)(w.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(j.N_,{to:(0,l.dW)("/plugin?page=backup-sql-file/files"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(C.A,{style:{fontSize:28,color:(0,l.eU)()}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:4,whiteSpace:"nowrap"},children:"\u5907\u4efd\u6570\u636e"})]})})})})]})}),V="index",Y={card:`${V}-card`},F=(0,f.Ay)("div")({[`& .${V}-card`]:{background:u.Ay.isDarkMode()?"#141414":(0,l.eU)(),padding:0,marginBottom:8,color:"white"}}),z=e=>{let{data:t}=e;return null===t.statisticsInfo?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(F,{children:[(0,i.jsx)(A.A,{title:(0,l.jY)().dashboard}),(0,i.jsxs)(n.A,{gutter:[8,8],children:[(0,i.jsxs)(s.A,{xs:24,md:12,children:[(0,i.jsxs)(d.A,{title:"",styles:{body:{padding:0}},className:Y.card,children:[(0,i.jsx)(c,{style:{position:"absolute",height:"100%",width:"100%",zIndex:2}}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontSize:20,fontWeight:500,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:t.welcomeTip}),(0,i.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.tips.map(e=>e)})]})]}),(0,i.jsx)(y,{data:t.statisticsInfo,versionInfo:t.versionInfo})]}),(0,i.jsxs)(s.A,{xs:24,md:12,children:[(0,i.jsx)(d.A,{title:(0,l.jY)()["admin.index.activity"],size:"small",styles:{body:{overflow:"auto",marginTop:8,marginRight:8}},children:(0,i.jsx)(o,{data:r(t.activityData)})}),(0,i.jsx)(S,{})]})]})]})}}}]);