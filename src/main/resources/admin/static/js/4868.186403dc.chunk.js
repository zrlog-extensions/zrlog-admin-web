"use strict";(self.webpackChunkadmin_web_frontend=self.webpackChunkadmin_web_frontend||[]).push([[4868],{4868:(e,t,a)=>{a.r(t),a.d(t,{AdminPage:()=>ie,LazyWithFallbackElement:()=>le,default:()=>re});var n=a(28429),s=a(9950),l=a(63251),i=a(44669),r=a(85221),o=a(37596),d=a(38692),c=a(35434),p=a(84311),m=a(72944),u=a(94916),h=a(92331),x=a(60425),g=a(46895),j=a(78091),y=a(51844),f=a(60625),A=a(42777),v=a(34143),b=a(35070),w=a(3127),k=a(45442),C=a(28807),V=a(36499),S=a(34647),Y=a(11113),F=a(16471),I=a(23236),z=a(97302),q=a(29314),B=a(48353),P=a(44414);const D=e=>{let{data:t}=e;const a=(0,z.E)(t.changelog,e=>{i(e)}),n=(0,z.E)(t.buildSystemInfo,e=>{o(e)}),[l,i]=(0,s.useState)(a),[r,o]=(0,s.useState)(n);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(I.A,{title:t.version}),(0,P.jsx)(F.A,{title:"",style:{padding:8,maxWidth:600},children:(0,P.jsx)(q.A,{htmlContent:l,dark:(0,B.BV)().dark})}),(0,P.jsx)(F.A,{title:"",style:{padding:8,maxWidth:600,marginTop:12},children:(0,P.jsx)(q.A,{htmlContent:r,dark:(0,B.BV)().dark})})]})};var R=a(87085),T=a(75997);const U=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,78091))),M=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,45442))),L=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,36499))),W=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,84311))),H=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,28807))),N=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,72944))),E=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,35070))),O=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,60625))),K=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,42777))),G=(0,s.lazy)(()=>a.e(6930).then(a.bind(a,46930))),X=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,38692))),Z=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,60425))),J=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,94916))),Q=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,92331))),_=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,34143))),$=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,46895))),ee=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,3127))),te=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,51844))),ae=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,87085))),ne=(0,s.lazy)(()=>a.e(5997).then(a.bind(a,85997))),se=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,75997)));function le(e){let{LazyComponent:t,FallbackComponent:a,props:n}=e;return(0,P.jsx)(s.Suspense,{fallback:(0,P.jsx)(a,{...n}),children:(0,P.jsx)(t,{...n})})}function ie(e){const{FallbackComponent:t,LazyComponent:a,props:n}=e;return(0,P.jsx)(ne,{basicUserInfo:e.props.userInfo,offline:e.props.offline,systemNotification:e.props.systemNotification,syncStaticSite:e.props.pageBuildId!==(0,Y.$L)(),loading:e.props.offlineData&&!e.props.offline,fullScreen:e.props.fullScreen,children:e.props.data?(0,P.jsx)(le,{LazyComponent:a,FallbackComponent:t,props:n}):(0,P.jsx)(i.A,{})})}const re=e=>{let{offline:t,userInfo:a}=e;const F=(0,n.zy)(),I=(0,c.x)()?(0,r.HB)():null,z=(0,r.Em)(I||(0,o.dy)(F)),q=(0,r.hS)(F),B=(0,s.useRef)((0,Y.TX)()&&(0,Y.TX)().data),[ne,le]=(0,s.useState)({axiosRequesting:!1,lastAxiosRequestedCacheKey:B.current?q:"",fullScreen:z,pageBuildId:(0,Y.TX)().pageBuildId}),re=()=>{const e=(0,r.hS)(F);return B.current?(0,Y.TX)().data:(0,r.Pn)(e)},oe=(0,S.cz)();(0,s.useEffect)(()=>{const e=(0,r.Rn)(F.pathname,F.search);if(B.current)return(0,r.ls)(e,(0,Y.TX)().data),void(B.current=!1);const a=(0,r.Pn)(e);le(e=>({...e,axiosRequesting:!t,fullScreen:(0,r.Em)((0,o.dy)(F))})),t||(async(e,t,a)=>{const n=await(0,l.b)(e,oe),{data:s,documentTitle:i,pageBuildId:d}=n;if(i&&(0,o.Hp)(i),(0,Y.TX)().data=s,(0,o.eP)(t,s))return console.info(e+" cache hits"),void le(t=>({...t,axiosRequesting:!1,pageBuildId:d,lastAxiosRequestedCacheKey:e}));(0,r.ls)(e,s),le(()=>({axiosRequesting:!1,pageBuildId:d,lastAxiosRequestedCacheKey:e,fullScreen:(0,r.Em)((0,o.dy)(a))}))})(e,a,F).then(()=>{}).catch(()=>{le(e=>({...e,axiosRequesting:!1,fullScreen:(0,r.Em)((0,o.dy)(F))}))})},[F.pathname,F.search]);const de=[{paths:[...(0,S.DV)("index"),...(0,S.DV)("")],lazy:H,fallback:C.default},{paths:(0,S.DV)("comment"),lazy:L,fallback:V.default},{paths:(0,S.DV)("plugin"),lazy:W,fallback:p.default},{paths:(0,S.DV)("website"),lazy:N,fallback:m.default,props:{activeKey:"basic"}},{paths:(0,S.DV)("website/admin"),lazy:N,fallback:m.default,props:{activeKey:"admin"}},{paths:(0,S.DV)("website/template"),lazy:N,fallback:m.default,props:{activeKey:"template"}},{paths:(0,S.DV)("website/other"),lazy:N,fallback:m.default,props:{activeKey:"other"}},{paths:(0,S.DV)("website/blog"),lazy:N,fallback:m.default,props:{activeKey:"blog"}},{paths:(0,S.DV)("website/ai"),lazy:N,fallback:m.default,props:{activeKey:"ai"}},{paths:(0,S.DV)("website/upgrade"),lazy:N,fallback:m.default,props:{activeKey:"upgrade"}},{paths:(0,S.DV)("website/version"),lazy:D,fallback:D},{paths:(0,S.DV)("article-type"),lazy:E,fallback:b.default},{paths:(0,S.DV)("link"),lazy:O,fallback:f.default},{paths:(0,S.DV)("nav"),lazy:K,fallback:A.default},{paths:(0,S.DV)("article"),lazy:_,fallback:v.default},{paths:(0,S.DV)("article-edit"),lazy:U,fallback:j.default,props:{onFullScreen:()=>{le(e=>((0,r.jq)((0,o.dy)(F),!0),{...e,fullScreen:!0}))},onExitFullScreen:()=>{ne.fullScreen&&le(e=>((0,r.jq)((0,o.dy)(F),!1),{...e,fullScreen:!1}))}}},{paths:(0,S.DV)("user"),lazy:$,fallback:g.default},{paths:(0,S.DV)("template-center"),lazy:Z,fallback:x.default},{paths:(0,S.DV)("user-update-password"),lazy:Q,fallback:h.default},{paths:(0,S.DV)("upgrade"),lazy:X,fallback:d.default},{paths:(0,S.DV)("template-config"),lazy:J,fallback:u.default},{paths:(0,S.DV)("403"),lazy:ee,fallback:w.default,props:{code:403}},{paths:(0,S.DV)("500"),lazy:ee,fallback:w.default,props:{code:500}},{paths:(0,S.DV)("offline"),lazy:M,fallback:k.default},{paths:(0,S.DV)("system"),lazy:te,fallback:y.default},{paths:(0,S.DV)("static-site"),lazy:ae,fallback:R.default},{paths:(0,S.DV)("dev"),lazy:se,fallback:T.default}];return(0,P.jsxs)(n.BV,{children:[de.flatMap((e,s)=>{let{paths:l,lazy:i,fallback:o,props:d={}}=e;return l.map((e,l)=>(0,P.jsx)(n.qh,{path:e,element:(0,P.jsx)(ie,{LazyComponent:i,FallbackComponent:o,props:{...d,userInfo:a,fullScreen:ne.fullScreen,data:re(),offline:t,systemNotification:(0,Y.TX)().systemNotification,pageBuildId:(0,r.H7)(),offlineData:!B.current&&(!!ne.axiosRequesting||ne.lastAxiosRequestedCacheKey!==(0,r.hS)(F)),updateCache:(e,t)=>{(0,r.ls)(t,e)}}})},`${s}-${l}`))}),(0,P.jsx)(n.qh,{path:"*",element:(0,P.jsx)(s.Suspense,{fallback:(0,P.jsx)(i.A,{}),children:(0,P.jsx)(G,{})})})]})}},19573:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(83696),s=a(16471),l=a(78816),i=a(9950),r=a(34647),o=a(9039),d=a(44414);const c=()=>(0,d.jsx)(o.A,{type:"warning",showIcon:!0,style:{marginBottom:20,padding:12},description:(0,l.jY)().xxsTips}),p=e=>{let{contentType:t,value:a,initPreviewValue:o}=e;const[p,m]=(0,i.useState)(null!=o?o:""),u=(0,r.cz)(),h=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{h.current?h.current=!1:"html"===t&&u.get("/api/admin/template/previewConfigValue?value="+encodeURIComponent(a)).then(e=>{let{data:t}=e;m(t.data.previewValue)})},[a]),"html"!=t?(0,d.jsx)(d.Fragment,{}):(0,d.jsxs)(n.A.Item,{label:" ",colon:!1,children:[(0,d.jsx)(c,{}),(0,d.jsx)(s.A,{title:(0,l.jY)().preview+" ("+t+")",size:"small",styles:{body:{minHeight:36}},style:{overflow:"hidden"},children:(0,d.jsx)("div",{style:{userSelect:"none"},dangerouslySetInnerHTML:{__html:p||""}})})]})}},28807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(66577),s=a(55352),l=a(78816),i=(a(9950),a(44414));const r=e=>{const t=new Date,a=new Date(t);a.setFullYear(t.getFullYear()-1),a.setDate(1);const n=[],s=new Map(e.map(e=>[e.date,e.count])),l=a;for(;l<=t;){const e=l.toISOString().split("T")[0];n.push({date:e,count:s.get(e)||0}),l.setDate(l.getDate()+1)}return n},o=e=>{let{data:t}=e;const a=20,n=(()=>{var e;const a=[];let n=[];const s=(new Date(null===(e=t[0])||void 0===e?void 0:e.date).getDay()+6)%7;for(let t=0;t<s;t++)n.push({date:"",count:0});for(t.forEach(e=>{n.push(e),7===n.length&&(a.push(n),n=[])});n.length>0&&n.length<7;)n.push({date:"",count:0});return 7===n.length&&a.push(n),a})(),s=(()=>{const e=[],a=(0,l.jY)().lang.includes("en")?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"];let n=-1;return t.forEach((t,s)=>{const l=new Date(t.date).getMonth();l!==n&&(n=l,e.push({x:15*Math.floor(s/7),name:a[l]}))}),e})();return(0,i.jsxs)("svg",{width:15*n.length+a,height:125,children:[s.map((e,t)=>(0,i.jsx)("text",{x:e.x+a,y:15,fontSize:"10",fill:"#666",children:e.name},t)),("en"===(0,l.jY)().lang?["Mon","Wed","Fri"]:["\u4e00","\u4e09","\u4e94"]).map((e,t)=>(0,i.jsx)("text",{x:15,y:20+15*(2*t+1)-9,fontSize:"7",fill:"#666",textAnchor:"end",dominantBaseline:"middle",children:e},t)),n.map((e,t)=>e.map((e,n)=>{return(0,i.jsx)("rect",{x:15*t+a,y:15*n+a,width:10,height:10,rx:2,ry:2,fill:(s=e.count,0===s?"#ebedf0":s<2?"#9be9a8":s<4?"#40c463":s<8?"#30a14e":"#216e39"),stroke:"#ccc",children:(0,i.jsx)("title",{children:e.date?`${e.date}. ${(0,l.jY)().article}: ${e.count}`:"No data"})},`${t}-${n}`);var s}))]})};var d=a(16471);const c=e=>{let{style:t}=e;return(0,i.jsxs)("svg",{viewBox:"0 0 1184 110",version:"1.1",style:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"83.2669495%",id:"linearGradient-1",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"91.2632575%",id:"linearGradient-2",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"59.9205505%",y1:"0%",x2:"59.9205505%",y2:"58.498623%",id:"linearGradient-3",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"83.2669495%",id:"linearGradient-4",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"57.8754399%",x2:"69.320672%",y2:"-30.4426258%",id:"linearGradient-5",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]}),(0,i.jsxs)("linearGradient",{x1:"50%",y1:"57.8754399%",x2:"54.1588945%",y2:"-25.4561623%",id:"linearGradient-6",children:[(0,i.jsx)("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"0%"}),(0,i.jsx)("stop",{stopColor:"#68FFFF",stopOpacity:"0.16",offset:"100%"})]})]}),(0,i.jsx)("g",{id:"\u9875\u9762-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,i.jsx)("g",{id:"\u753b\u677f\u5907\u4efd-6",transform:"translate(-232.000000, -72.000000)",children:(0,i.jsx)("g",{id:"\u6b22\u8fce\u9875\u5934",transform:"translate(232.000000, 72.000000)",children:(0,i.jsxs)("g",{id:"\u7f16\u7ec4-20",transform:"translate(-85.000000, -92.000000)",children:[(0,i.jsx)("path",{d:"M1078.5,79 L1162,120.419823 L1081.837,160.338 L1082,160.419823 L998.5,202 L915,160.419823 L995.319,120.578 L995,120.419823 L1078.5,79 Z",id:"Combined-Shape-Copy",fill:"url(#linearGradient-1)",opacity:"0.600000024"}),(0,i.jsx)("polygon",{id:"Combined-Shape-Copy",fill:"url(#linearGradient-2)",opacity:"0.600000024",points:"998 212.290499 997.513792 160 915 172.656071 915 254"}),(0,i.jsx)("polygon",{id:"Combined-Shape-Copy",fill:"url(#linearGradient-3)",opacity:"0.600000024",transform:"translate(1080.000000, 205.000000) scale(-1, 1) translate(-1080.000000, -205.000000)",points:"998.474969 208.231442 998 120 1161.5 201.633959 1162 290"}),(0,i.jsx)("path",{d:"M583.5,0 L667,41.4198232 L586.837,81.338 L587,81.4198232 L503.5,123 L420,81.4198232 L500.319,41.578 L500,41.4198232 L583.5,0 Z",id:"Combined-Shape-Copy-5",fill:"url(#linearGradient-1)",opacity:"0.400000006"}),(0,i.jsx)("path",{d:"M1347.5,99 L1431,140.419823 L1350.837,180.338 L1351,180.419823 L1267.5,222 L1184,180.419823 L1264.319,140.578 L1264,140.419823 L1347.5,99 Z",id:"Combined-Shape-Copy-3",fill:"url(#linearGradient-1)",opacity:"0.400000006"}),(0,i.jsx)("path",{d:"M163.5,99 L247,140.419823 L166.837,180.338 L167,180.419823 L83.5,222 L0,180.419823 L80.319,140.578 L80,140.419823 L163.5,99 Z",id:"Combined-Shape-Copy-4",strokeOpacity:"0",stroke:"#247FFF",strokeWidth:"20",fill:"url(#linearGradient-1)",opacity:"0.600000024"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-4)",opacity:"0.600000024",points:"848.5 137 895 160.545401 848.5 184 802 160.545401"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-5)",opacity:"0.600000024",points:"802 211.30906 848 235 848 184.599576 802 161"}),(0,i.jsx)("polygon",{id:"Polygon",fill:"url(#linearGradient-6)",opacity:"0.600000024",points:"894 211.322199 848 235 848 184.586413 894 161"}),(0,i.jsx)("polygon",{id:"Polygon-Copy-5",strokeOpacity:"0",stroke:"#60ACFF",opacity:"0.300000012",transform:"translate(848.500000, 146.500000) scale(1, -1) translate(-848.500000, -146.500000)",points:"848.5 123 895 146.545401 848.5 170 802 146.545401"}),(0,i.jsx)("path",{d:"M1078.5,52 L1162,93.4198232 L1081.837,133.338 L1082,133.419823 L998.5,175 L915,133.419823 L995.319,93.578 L995,93.4198232 L1078.5,52 Z",id:"Combined-Shape",strokeOpacity:"0",stroke:"#000A1A",opacity:"0.300000012"}),(0,i.jsx)("path",{d:"M694.5,150 L778,191.419823 L697.837,231.338 L698,231.419823 L614.5,273 L531,231.419823 L611.319,191.578 L611,191.419823 L694.5,150 Z",id:"Combined-Shape-Copy-2",strokeOpacity:"0",stroke:"#60ACFF",fill:"url(#linearGradient-1)",opacity:"0.300000012"}),(0,i.jsx)("path",{d:"M348.5,181 L432,222.419823 L351.837,262.338 L352,262.419823 L268.5,304 L185,262.419823 L265.319,222.578 L265,222.419823 L348.5,181 Z",id:"Combined-Shape-Copy-6",strokeOpacity:"0",stroke:"#60ACFF",fill:"url(#linearGradient-1)",opacity:"0.300000012"})]})})})})]})};var p=a(3646),m=a(48864),u=a(9774),h=a(50198),x=a(82278),g=a(42074);const j=e=>{let{data:t,versionInfo:a}=e;const r=(e,t)=>(0,i.jsxs)("div",{style:{display:"flex",gap:3,flexFlow:"row",alignItems:"center",fontSize:24,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e,(0,i.jsx)(p.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]});return(0,i.jsxs)(d.A,{title:(0,l.jY)()["admin.index.outline"],children:[(0,i.jsxs)(n.A,{gutter:[8,8],children:[(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},children:(0,i.jsx)(m.A,{title:(0,l.jY)().todayComment,valueRender:()=>r((0,i.jsx)(u.A,{}),t.toDayCommCount)})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/comment"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalComment,valueRender:()=>r((0,i.jsx)(u.A,{}),t.commCount)})})})})]}),(0,i.jsxs)(n.A,{gutter:[8,8],style:{paddingTop:8},children:[(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/article"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalArticle,valueRender:()=>r((0,i.jsx)(h.A,{}),t.articleCount)})})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},children:(0,i.jsx)(m.A,{title:(0,l.jY)().totalArticleView,valueRender:()=>r((0,i.jsx)(h.A,{}),t.clickCount)})})}),(0,i.jsx)(s.A,{xs:24,md:12,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/system"),children:(0,i.jsx)(d.A,{styles:{body:{padding:16}},hoverable:!0,children:(0,i.jsx)(m.A,{title:(0,l.jY)().systemInfo,valueRender:()=>r((0,i.jsx)(x.A,{}),a)})})})})]})]})};var y=a(23236),f=a(87094),A=a(41988),v=a(53387),b=a(44373),w=a(95770),k=a(48353);const C=()=>(0,i.jsx)(d.A,{title:(0,l.jY)().quickAction,styles:{body:{overflow:"auto",marginTop:8,marginRight:8}},style:{marginTop:8},children:(0,i.jsxs)(f.A,{gutter:[8,8],children:[(0,i.jsx)(A.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/article-edit"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(v.A,{style:{fontSize:28,color:(0,k.BV)().colorPrimary}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:8,whiteSpace:"nowrap"},children:(0,l.jY)().writeArticle})]})})})}),(0,i.jsx)(A.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/article-type"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(b.A,{style:{fontSize:28,color:(0,k.BV)().colorPrimary}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:8,whiteSpace:"nowrap"},children:(0,l.jY)()["admin.type.manage"]})]})})})}),(0,i.jsx)(A.A,{xs:12,md:6,lg:4,children:(0,i.jsx)(g.N_,{to:(0,l.dW)("/plugin?page=backup-sql-file/files"),children:(0,i.jsx)(d.A,{hoverable:!0,style:{border:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexFlow:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(w.A,{style:{fontSize:28,color:(0,k.BV)().colorPrimary}}),(0,i.jsx)(p.A.Text,{style:{lineHeight:2,paddingTop:8,whiteSpace:"nowrap"},children:(0,l.jY)().backupFiles})]})})})})]})}),V=e=>{let{data:t}=e;return null===t.statisticsInfo?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.A,{title:(0,l.jY)().dashboard}),(0,i.jsxs)(n.A,{gutter:[8,8],children:[(0,i.jsxs)(s.A,{xs:24,md:12,children:[(0,i.jsxs)(d.A,{title:"",styles:{body:{padding:0}},style:{background:(0,k.BV)().dark?"#141414":(0,k.BV)().colorPrimary,padding:0,marginBottom:8,color:"white"},children:[(0,i.jsx)(c,{style:{position:"absolute",height:"100%",width:"100%",zIndex:2}}),(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("div",{style:{fontSize:20,fontWeight:500,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:t.welcomeTip}),(0,i.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.tips.map(e=>e)})]})]}),(0,i.jsx)(j,{data:t.statisticsInfo,versionInfo:t.versionInfo})]}),(0,i.jsxs)(s.A,{xs:24,md:12,children:[(0,i.jsx)(d.A,{title:(0,l.jY)()["admin.index.activity"],styles:{body:{overflow:"auto",marginTop:8,marginRight:8}},children:(0,i.jsx)(o,{data:r(t.activityData)})}),(0,i.jsx)(C,{})]})]})]})}},34143:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(90582),s=a(591),l=a(22748),i=a(1087),r=a(23072),o=a(78816),d=a(9950),c=a(51434),p=a(42074),m=a(85221),u=a(28429),h=a(1832),x=a(48353),g=a(23236),j=a(55320),y=a(44414);const f=(e,t)=>{const a=new URLSearchParams(t).get("types");return e.types?e.types.map(e=>({text:e.typeName,value:e.alias,selected:!!a&&a.split(",").includes(e.alias)})):[]},A=e=>{let{data:t,offline:a}=e;const A=(0,u.zy)(),v=f(t,A.search),[b,w]=(0,d.useState)(v),k=(0,d.useRef)(!1),C=(e,t)=>(0,y.jsxs)("span",{style:{display:"flex",gap:4,whiteSpace:"normal",flexFlow:"wrap"},children:[t,e.rubbish&&(0,y.jsx)("span",{style:{color:"rgb(119, 119, 119)"},children:(0,o.jY)().draft}),e.privacy&&(0,y.jsx)(s.A,{style:{color:"rgb(119, 119, 119)"}}),e.keywords&&(0,y.jsx)(j.A,{closeable:!1,keywords:e.keywords})]});(0,d.useEffect)(()=>{k.current=!1,w(f(t,A.search))},[t]);const[V,S]=(0,d.useState)(t.key?t.key:"");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{style:{paddingTop:20,justifyContent:"space-between",display:"flex",alignItems:"center"},children:[(0,y.jsx)(g.A,{noBottomBorder:!0,style:{marginTop:0,marginBottom:0},title:(0,o.jY)().blogManage}),(0,y.jsx)(i.A,{disabled:a,placeholder:(0,o.jY)().searchTip,onSearch:e=>{S(e)},defaultValue:t.key,enterButton:(0,o.jY)().search,style:{maxWidth:196,float:"right"}})]}),(0,y.jsx)(r.A,{}),(0,y.jsx)(c.A,{defaultPageSize:t.defaultPageSize,offline:a,datasource:t,columns:(()=>{const e={};return t.sort&&t.sort.map(t=>{const a=t.split(",");e[a[0]]="ASC"===a[1]?"ascend":"descend"}),[{title:(0,o.jY)().articleCover,dataIndex:"thumbnail",key:"thumbnail",width:t.article_thumbnail_status?108:0,render:e=>e&&e.length>0&&t.article_thumbnail_status?(0,y.jsx)(h.A,{style:{objectFit:"contain",maxHeight:108},src:e}):(0,y.jsx)(y.Fragment,{})},{title:(0,o.jY)().title,dataIndex:"title",key:"title",ellipsis:{showTitle:!1},width:300,render:(e,t)=>{const a=(0,y.jsx)(l.A,{placement:"top",title:(0,y.jsxs)("div",{children:["\u70b9\u51fb\u67e5\u770b\u300a",(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:e}}),"\u300b"]}),children:(0,y.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:e}})});return t.url.includes("previewMode")?C(t,(0,y.jsx)(p.N_,{to:t.url,children:a})):C(t,(0,y.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:t.url,children:a}))}},{title:(0,o.jY)().type,key:"typeName",dataIndex:"typeName",width:100,filters:b,filterMultiple:!1,filteredValue:b.filter(e=>e.selected).map(e=>e.value),onFilter:e=>(b.filter(e=>e.selected).map(e=>e.value).includes(e)||(((e,t)=>{console.log(e),b.forEach(a=>{a.value===e?a.selected=t:a.selected=!1}),w(b)})(e,!0),(()=>{if(k.current)return;k.current=!0;const e=[];t.sort.forEach(t=>{e.push("sort="+encodeURIComponent(t))});const a=A.search.includes("sort=")?"&":"";A.pathname=A.pathname+"?types="+encodeURIComponent(b.filter(e=>e.selected).map(e=>e.value).join(","))+"&"+e.join("&")+a})()),!0)},{title:(0,o.jY)().viewCount,key:"click",dataIndex:"click",width:100,sorter:!0,sortDirections:["descend","ascend"],sortOrder:e.click},{title:(0,o.jY)().commentAble,key:"canComment",dataIndex:"canComment",render:e=>e?(0,o.jY)().yes:(0,o.jY)().no,width:80},{title:(0,o.jY)().commentSize,key:"commentSize",dataIndex:"commentSize",width:100,sorter:!0,sortDirections:["descend","ascend"],sortOrder:e.commentSize},{title:(0,o.jY)().createTime,key:"releaseTime",dataIndex:"releaseTime",width:120,sorter:!0,sortDirections:["ascend","descend"],sortOrder:e.releaseTime},{title:(0,o.jY)().lastUpdateDate,key:"lastUpdateDate",dataIndex:"lastUpdateDate",width:120,sorter:!0,sortDirections:["ascend","descend"],sortOrder:e.lastUpdateDate}]})(),editBtnRender:e=>(0,y.jsx)(p.N_,{to:(0,o.dW)("/article-edit?id="+e),children:(0,y.jsx)(n.A,{style:{color:(0,x.BV)().colorPrimary}})}),deleteSuccessCallback:e=>{(0,m.f6)((0,o.dW)("/article-edit?id="+e))},deleteApi:"/api/admin/article/delete",searchKey:V})]})}},35070:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(78816),s=a(51434),l=a(9950),i=a(65957),r=a(51664),o=a(65455),d=a(83696),c=a(41988),p=a(62618),m=a(66577),u=a(98706),h=a(34647),x=a(44414);const g={labelCol:{span:4},wrapperCol:{span:20}},j=e=>{let{addSuccessCall:t,offline:a}=e;const[s,j]=(0,l.useState)(!1),[y,f]=(0,l.useState)(),[A,v]=i.Ay.useMessage({maxCount:3}),[b,w]=(0,l.useState)(!1),k=(0,h.cz)();return(0,x.jsxs)(x.Fragment,{children:[v,(0,x.jsx)(r.Ay,{type:"primary",disabled:a,onClick:()=>j(!0),style:{marginBottom:8},children:(0,n.jY)().add}),(0,x.jsx)(o.A,{title:(0,n.jY)().add,open:s,onOk:()=>{w(!0),k.post("/api/admin/type/add",y).then(async e=>{let{data:a}=e;a.error?await A.error(a.message):0===a.error&&(j(!1),t())}).finally(()=>{w(!1)})},okButtonProps:{loading:b},onCancel:()=>j(!1),children:(0,x.jsxs)(d.A,{onValuesChange:(e,t)=>{f(t)},...g,children:[(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)()["admin.type.manage"],style:{marginBottom:8},name:"typeName",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().alias,style:{marginBottom:8},name:"alias",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().introduction,style:{marginBottom:8},name:"remark",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})})]})})]})};var y=a(90582),f=a(42074),A=a(48353);const v={labelCol:{span:4},wrapperCol:{span:20}},b=e=>{let{record:t,editSuccessCall:a,offline:s}=e;const[r,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(t),[w,k]=i.Ay.useMessage({maxCount:3}),[C,V]=(0,l.useState)(!1),S=(0,h.cz)();return(0,l.useEffect)(()=>{b(t)},[t]),(0,x.jsxs)(x.Fragment,{children:[k,(0,x.jsx)(f.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),s||g(!0)},children:(0,x.jsx)(y.A,{style:{color:(0,A.BV)().colorPrimary}})}),(0,x.jsx)(o.A,{title:(0,n.jY)().edit,open:r,onOk:()=>{V(!0),S.post("/api/admin/type/update",j).then(async e=>{let{data:t}=e;t.error?await w.error(t.message):0===t.error&&(g(!1),a&&a())}).finally(()=>{V(!1)})},okButtonProps:{loading:C},onCancel:()=>g(!1),children:(0,x.jsxs)(d.A,{initialValues:j,onValuesChange:(e,t)=>{b(t)},...v,children:[(0,x.jsx)(d.A.Item,{name:"id",style:{display:"none"},children:(0,x.jsx)(p.A,{hidden:!0})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)()["admin.type.manage"],style:{marginBottom:8},name:"typeName",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().alias,style:{marginBottom:8},name:"alias",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(m.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,n.jY)().introduction,style:{marginBottom:8},name:"remark",rules:[{required:!0,message:""}],children:(0,x.jsx)(u.A,{})})})})]})})]})};var w=a(23236);const k=e=>{let{data:t,offline:a}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w.A,{title:(0,n.jY)()["admin.type.manage"]}),(0,x.jsx)(s.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,n.jY)()["admin.type.manage"],dataIndex:"typeName",key:"typeName",width:240,render:(e,t)=>(0,x.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:t.url,children:e})},{title:(0,n.jY)().alias,dataIndex:"alias",key:"alias",width:120},{title:(0,n.jY)().introduction,key:"remark",dataIndex:"remark",width:240,render:e=>(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},{title:(0,n.jY)().articleSize,dataIndex:"amount",key:"amount",width:80}],addBtnRender:e=>(0,x.jsx)(j,{offline:a,addSuccessCall:e}),editBtnRender:(e,t,n)=>(0,x.jsx)(b,{offline:a,record:t,editSuccessCall:n}),datasource:t,deleteApi:"/api/admin/type/delete"})]})}},36499:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(78816),s=a(51434),l=a(98706),i=a(23236),r=a(44414);const o=e=>{let{data:t,offline:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{title:(0,n.jY)()["admin.comment.manage"]}),(0,r.jsx)(s.A,{defaultPageSize:10,offline:a,datasource:t,columns:[{title:(0,n.jY)().content,dataIndex:"userComment",key:"userComment",width:600,render:e=>(0,r.jsx)(l.A,{autoSize:{minRows:1,maxRows:6},style:{border:"none",minWidth:300},readOnly:!0,value:e})},{title:(0,n.jY)().nickName,dataIndex:"userName",key:"userName"},{title:(0,n.jY)().commentUserHome,key:"userHome",dataIndex:"userHome"},{title:"IP",key:"userIp",dataIndex:"userIp"},{title:(0,n.jY)().email,key:"userMail",dataIndex:"userMail"},{title:(0,n.jY)().commentDate,key:"commTime",dataIndex:"commTime"}],deleteApi:"/api/admin/comment/delete"})]})}},42777:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(51434),s=a(78816),l=a(9950),i=a(65957),r=a(51664),o=a(65455),d=a(83696),c=a(41988),p=a(62618),m=a(4745),u=a(66577),h=a(34647),x=a(44414);const g={labelCol:{span:4},wrapperCol:{span:20}},j=e=>{let{addSuccessCall:t,offline:a}=e;const[n,j]=(0,l.useState)(!1),[y,f]=(0,l.useState)(),[A,v]=i.Ay.useMessage({maxCount:3}),b=(0,h.cz)(),[w,k]=(0,l.useState)(!1);return(0,x.jsxs)(x.Fragment,{children:[v,(0,x.jsx)(r.Ay,{type:"primary",disabled:a,onClick:()=>j(!0),style:{marginBottom:8},children:(0,s.jY)().add}),(0,x.jsx)(o.A,{title:(0,s.jY)().add,open:n,onOk:()=>{k(!0),b.post("/api/admin/nav/add",y).then(async e=>{let{data:a}=e;a.error?await A.error(a.message):0===a.error&&(j(!1),t())}).finally(()=>{k(!1)})},okButtonProps:{loading:w},onCancel:()=>j(!1),children:(0,x.jsxs)(d.A,{onValuesChange:(e,t)=>{f(t)},...g,children:[(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.nav.name"],style:{marginBottom:8},name:"navName",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,x.jsx)(m.A,{})})})})]})})]})};var y=a(90582),f=a(42074),A=a(48353);const v={labelCol:{span:4},wrapperCol:{span:20}},b=e=>{let{record:t,editSuccessCall:a,offline:n}=e;const[r,g]=(0,l.useState)(!1),[j,b]=(0,l.useState)(t),[w,k]=i.Ay.useMessage({maxCount:3}),[C,V]=(0,l.useState)(!1),S=(0,h.cz)();return(0,l.useEffect)(()=>{b(t)},[t]),(0,x.jsxs)(x.Fragment,{children:[k,(0,x.jsx)(f.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),n||g(!0)},children:(0,x.jsx)(y.A,{style:{color:(0,A.BV)().colorPrimary}})}),(0,x.jsx)(o.A,{title:(0,s.jY)().edit,open:r,onOk:()=>{V(!0),S.post("/api/admin/nav/update",j).then(async e=>{let{data:t}=e;t.error?await w.error(t.message):0===t.error&&(g(!1),a&&a())}).finally(()=>{V(!1)})},okButtonProps:{loading:C},onCancel:()=>g(!1),children:(0,x.jsxs)(d.A,{initialValues:j,onValuesChange:(e,t)=>{b(t)},...v,children:[(0,x.jsx)(d.A.Item,{name:"id",style:{display:"none"},children:(0,x.jsx)(p.A,{hidden:!0})}),(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)()["admin.nav.name"],style:{marginBottom:8},name:"navName",rules:[{required:!0,message:""}],children:(0,x.jsx)(p.A,{})})})}),(0,x.jsx)(u.A,{children:(0,x.jsx)(c.A,{span:24,children:(0,x.jsx)(d.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,x.jsx)(m.A,{})})})})]})})]})};var w=a(23236);const k=e=>{let{data:t,offline:a}=e;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w.A,{title:(0,s.jY)()["admin.nav.manage"]}),(0,x.jsx)(n.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,s.jY)()["admin.nav.manage"],dataIndex:"url",width:240,key:"url",render:(e,t)=>(0,x.jsx)("a",{style:{display:"inline"},rel:"noopener noreferrer",target:"_blank",href:t.jumpUrl,children:e})},{title:(0,s.jY)()["admin.nav.name"],dataIndex:"navName",key:"navName",width:240},{title:(0,s.jY)().order,key:"sort",dataIndex:"sort",width:60}],addBtnRender:e=>(0,x.jsx)(j,{offline:a,addSuccessCall:e}),editBtnRender:(e,t,n)=>(0,x.jsx)(b,{offline:a,record:t,editSuccessCall:n}),datasource:t,deleteApi:"/api/admin/nav/delete"})]})}},44669:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(29008),s=a(71420),l=a(44414);const i=()=>(0,l.jsx)(s.A,{delay:200,style:{position:"fixed",top:80,right:24},indicator:(0,l.jsx)(n.A,{style:{fontSize:24},spin:!0})})},45442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(3127),s=a(44414);const l=()=>(0,s.jsx)(n.default,{data:{message:"Network offline"},code:"500"})},46895:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(9950),s=a(23072),l=a(83696),i=a(51664),r=a(62618),o=a(65957),d=a(66577),c=a(55352),p=a(1832),m=a(78816),u=a(34647),h=a(23236),x=a(3383),g=a(44414);const j={labelCol:{span:8},wrapperCol:{span:16}},y=e=>{let{data:t,offline:a}=e;const[y,f]=(0,n.useState)(t),[A,v]=o.Ay.useMessage({maxCount:3}),b=e=>{f({...y,...e})},w=(0,u.cz)();return(0,g.jsxs)(g.Fragment,{children:[v,(0,g.jsx)(h.A,{title:(0,m.jY)()["admin.user.info"]}),(0,g.jsx)(d.A,{children:(0,g.jsx)(c.A,{style:{maxWidth:600},xs:24,children:(0,g.jsxs)(l.A,{onFinish:()=>{w.post("/api/admin/user/update",y).then(async e=>{let{data:t}=e;t.error?await A.error(t.message):0===t.error&&await A.success(t.message)})},initialValues:y,onValuesChange:(e,t)=>b(t),...j,children:[(0,g.jsx)(l.A.Item,{label:(0,m.jY)().userName,name:"userName",rules:[{required:!0}],children:(0,g.jsx)(r.A,{})}),(0,g.jsx)(l.A.Item,{name:"email",label:(0,m.jY)().email,children:(0,g.jsx)(r.A,{type:"email"})}),(0,g.jsx)(l.A.Item,{label:(0,m.jY)().headPortrait,rules:[{required:!0}],children:(0,g.jsx)(x.A,{uploadConfig:{axiosInstance:w,formName:"imgFile",buildUploadUrl:e=>`/api/admin/upload?dir=${e}`,tryAppendBackendServerUrl:m.A_},style:{width:128,height:128},onSuccess:e=>{return t=e,void b({...y,header:t.data.url});var t},onError:e=>{A.error(e.message)},type:"image",children:(0,g.jsx)(p.A,{fallback:m.Ay.getFillBackImg(),preview:!1,height:128,width:128,style:{borderRadius:8,objectFit:"cover"},src:(0,m.A_)(y.header)})})}),(0,g.jsx)(s.A,{}),(0,g.jsx)(l.A.Item,{children:(0,g.jsx)(i.Ay,{disabled:a,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})})]})})})]})}},51434:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(65957),s=a(75220),l=a(88280),i=a(9950),r=a(37596),o=a(73149),d=a(78816),c=a(78433),p=a(28429),m=a(42074),u=a(34647),h=a(44414);const x=e=>{let{deleteApi:t,editBtnRender:a,addBtnRender:x,columns:g,datasource:j,defaultPageSize:y,searchKey:f,deleteSuccessCallback:A,hideId:v,offline:b}=e;const w=(0,p.Zp)(),k=(0,p.zy)(),C=(e,t,a,n)=>V(e,t,a,-1,n),V=(e,t,a,n,s)=>{const l={};e>1&&(l.page=e),t!=y&&1e6!=t&&(l.size=t),a&&a.trim().length>0&&(l.key=a.trim()),n>0&&(l[d.Pe]=n),s.length>0&&(l.sort=s[0]);const i=(0,r.Pb)(l);return(0,d.Cu)()&&console.info(i+"===<"),0===i.length?(0,d.dW)(k.pathname):(0,d.dW)(k.pathname+"?"+i)},S=(e,t,a,n)=>{w(C(e,t,a,n))},Y=(e,t,a,n)=>{w(V(e,t,a,(new Date).getTime(),n))},[F,I]=(0,i.useState)({pagination:{page:null!==j&&void 0!==j&&j.page?j.page:1,key:null===j||void 0===j?void 0:j.key,sort:null!==j&&void 0!==j&&j.sort?null===j||void 0===j?void 0:j.sort:[],size:null!==j&&void 0!==j&&j.size?null===j||void 0===j?void 0:j.size:y},query:null===j||void 0===j?void 0:j.key,tableLoaded:!0,rows:j?j.rows:[],tablePagination:{total:null===j||void 0===j?void 0:j.totalElements,current:null===j||void 0===j?void 0:j.page,pageSize:null===j||void 0===j?void 0:j.size,onChange:(e,t)=>{S(e,t,F.query,[])}}}),[z,q]=n.Ay.useMessage({maxCount:3}),B=(0,u.cz)();(0,i.useEffect)(()=>{f!==F.query&&(I({...F,query:f}),S(1,F.pagination.size,f,F.pagination.sort))},[f]),(0,i.useEffect)(()=>{I(e=>({...e,rows:j?j.rows:[],pagination:{page:null!==j&&void 0!==j&&j.page?j.page:1,size:null!==j&&void 0!==j&&j.size?j.size:10,sort:null!==j&&void 0!==j&&j.sort?j.sort:[]},tablePagination:{current:null===j||void 0===j?void 0:j.page,pageSize:null===j||void 0===j?void 0:j.size,total:null===j||void 0===j?void 0:j.totalElements}}))},[j]);return(0,h.jsxs)(h.Fragment,{children:[q,x?x(()=>{Y(F.pagination.page,F.pagination.size,F.query,F.pagination.sort)}):void 0,(0,h.jsx)(l.A,{onChange:(e,t,a)=>{const n=a&&a.field?[a.field+","+("descend"===a.order?"DESC":"ASC")]:[];n.length>0&&I({...F,pagination:{...F.pagination,sort:n}}),S(e.current?e.current:1,e.pageSize?e.pageSize:10,F.query,n)},style:{minHeight:512},columns:(()=>{const e=[];return null!==v&&void 0!==v&&v||e.push({title:(0,d.jY)().id,dataIndex:"id",key:"id",fixed:!0,width:64,render:e=>(0,h.jsx)("span",{style:{maxWidth:64},children:e})}),e.push({title:"",dataIndex:"id",key:"action",fixed:!0,width:64,render:(e,n)=>e?(0,h.jsxs)(s.A,{size:16,children:[(0,h.jsx)(m.N_,{to:"#delete-"+n.id,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,h.jsx)(o.A,{disabled:b,title:(0,d.jY)().deleteTips,onConfirm:async()=>{await(async(e,t,a)=>{const n=await B.post(t+"?id="+a);return n.data.error?(z.error(n.data.message),!1):0===n.data.error&&(z.success(n.data.message),Y(e.page,e.size,F.query,F.pagination.sort),!0)})(F.pagination,t,n.id)&&A&&A(n.id)},children:(0,h.jsx)(c.A,{style:{color:"red"}})})}),a?a(e,n,()=>{Y(F.pagination.page,F.pagination.size,F.query,F.pagination.sort)}):null]}):null}),g.forEach(t=>{e.push(t)}),e})(),pagination:{hideOnSinglePage:!0,...F.tablePagination,itemRender:(e,t,a)=>(0,h.jsx)(m.N_,{to:C(e,null!==j&&void 0!==j&&j.size?j.size:10,F.query,null!==j&&void 0!==j&&j.sort?j.sort:[]),children:a},e)},dataSource:F.rows,scroll:{x:"90vw"}})]})}},51844:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(3646),s=a(16471),l=a(48864),i=a(87094),r=a(41988),o=a(44414);const d=()=>(0,o.jsx)("img",{style:{maxHeight:30},alt:"graalvm",src:"data:image/png;base64,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"});var c=a(32479),p=a(25641),m=a(9950),u=a(42074),h=a(72586),x=a(94452),g=a(8997),j=a(95770);const y=()=>(0,o.jsx)("span",{className:"anticon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"currentColor",children:(0,o.jsx)("path",{d:"M3 7H21V17H19V15H17V17H15V15H13V17H11V15H9V17H7V15H5V17H3V7ZM2 5C1.44772 5 1 5.44772 1 6V18C1 18.5523 1.44772 19 2 19H22C22.5523 19 23 18.5523 23 18V6C23 5.44772 22.5523 5 22 5H2ZM11 9H5V12H11V9ZM13 9H19V12H13V9Z"})})}),f=()=>(0,o.jsx)("span",{className:"anticon",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,fill:"currentColor",children:(0,o.jsx)("path",{d:"M6 18H18V6H6V18ZM14 20H10V22H8V20H5C4.44772 20 4 19.5523 4 19V16H2V14H4V10H2V8H4V5C4 4.44772 4.44772 4 5 4H8V2H10V4H14V2H16V4H19C19.5523 4 20 4.44772 20 5V8H22V10H20V14H22V16H20V19C20 19.5523 19.5523 20 19 20H16V22H14V20ZM8 8H16V16H8V8Z"})})});var A=a(52378);const{useBreakpoint:v}=A.Ay,b=e=>{let{data:t,dockerMode:a,nativeImageMode:m,title:A}=e;const b=v(),w=(e,t)=>{if("programInfo"===e)return"https://www.zrlog.com/changelog/?ref=systemInfo";if("webServer"===e){if(t.toLowerCase().startsWith("simplewebserver/"))return"https://github.com/94fzb/simplewebserver";if(t.startsWith("Apache Tomcat/"))return"https://tomcat.apache.org/";if(t.startsWith("Lambda"))return"https://aws.amazon.com/lambda/"}else if("runtime"===e)return m?"https://www.graalvm.org":"https://www.oracle.com/java";return""},k=e=>(0,o.jsx)(s.A,{styles:{body:{padding:16}},hoverable:w(e.key,e.value).length>0,children:(0,o.jsx)(l.A,{title:e.name,valueRender:()=>{return(0,o.jsx)("div",{style:{display:"flex",gap:3,flexFlow:"row",alignItems:"center",fontSize:24,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(t=e.value,s=e,"runtime"===s.key&&(a||m)?(0,o.jsxs)(o.Fragment,{children:[a&&(0,o.jsx)(p.A,{}),m&&b.sm&&(0,o.jsx)(d,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):"system"===s.key?s.value.startsWith("Linux")?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):s.value.startsWith("Darwin")?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})," "]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):"usedCacheSpace"===s.key||"usedDiskSpace"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):"usedMemorySpace"===s.key||"totalMemorySpace"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):"dbInfo"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.A,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):"cpuInfo"===s.key?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{}),(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.A.Text,{style:{fontSize:18,lineHeight:1.5},ellipsis:!0,children:t})}))});var t,s}})});return void 0===t||0===t.length?(0,o.jsx)(o.Fragment,{}):(0,o.jsx)(s.A,{title:A,styles:{body:{padding:8,overflow:"hidden"}},children:(0,o.jsx)(i.A,{gutter:[8,8],children:t.map(e=>{const t=w(e.key,e.value);return(0,o.jsx)(r.A,{xs:24,md:12,children:t.length>0?(0,o.jsx)(u.N_,{target:"_blank",to:w(e.key,e.value),children:k(e)}):k(e)},e.key)})})})};var w=a(78816),k=a(66577),C=a(63251),V=a(34647),S=a(23236);const Y=e=>{let{data:t}=e;const[a,n]=(0,m.useState)(t),s=(0,V.cz)(),l=5e3,i=(0,m.useRef)(null),d=()=>{"visible"===document.visibilityState?(0,C.b)("/system",s).then(e=>{let{data:t}=e;n(t),i.current=setTimeout(d,l)}):i.current=setTimeout(d,l)};return(0,m.useEffect)(()=>(i.current=setTimeout(d,l),()=>{i&&i.current&&clearTimeout(i.current)}),[]),(0,m.useEffect)(()=>{n(t)},[t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.A,{title:(0,w.jY)().systemInfo}),(0,o.jsxs)(k.A,{gutter:[8,8],children:[(0,o.jsx)(r.A,{xs:24,md:12,children:(0,o.jsx)(b,{title:(0,w.jY)().serverInfo,data:a.serverInfos,dockerMode:a.dockerMode,nativeImageMode:a.nativeImageMode})}),(0,o.jsx)(r.A,{xs:24,md:12,children:(0,o.jsx)(b,{title:(0,w.jY)()["admin.index.outline"],data:a.serverInfos2,dockerMode:a.dockerMode,nativeImageMode:a.nativeImageMode})})]})]})}},55320:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(68046),s=a(89636),l=a(48353),i=a(44414);const r=e=>{let{keywords:t,closeable:a,tagStyle:r,onClick:o,onClose:d}=e;return(0,i.jsx)("span",{style:{display:"flex",gap:4,whiteSpace:"normal",flexFlow:"wrap"},children:t.split(",").map(e=>null===e||""===e.trim()?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(n.A,{icon:(0,i.jsx)(s.A,{}),closable:a,onClick:o,onClose:t=>{d&&d(t,e)},color:(0,l.BV)().colorPrimary,style:{userSelect:"none",marginRight:0,...r},children:e.trim()}))},"all-"+t)}},60425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(44414);const s=e=>{let{data:t}=e;return(0,n.jsx)("iframe",{width:"100%",style:{border:0},height:1200,src:t.url})}},60625:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(51434),s=a(78816),l=a(9950),i=a(65957),r=a(65455),o=a(83696),d=a(62618),c=a(41988),p=a(4745),m=a(66577),u=a(98706),h=a(90582),x=a(42074),g=a(34647),j=a(48353),y=a(44414);const f={labelCol:{span:4},wrapperCol:{span:20}},A=e=>{let{record:t,editSuccessCall:a,offline:n}=e;const[A,v]=(0,l.useState)(!1),[b,w]=(0,l.useState)(t),[k,C]=i.Ay.useMessage({maxCount:3}),[V,S]=(0,l.useState)(!1),Y=(0,g.cz)();(0,l.useEffect)(()=>{w(t)},[t]);return(0,y.jsxs)(y.Fragment,{children:[C,(0,y.jsx)(x.N_,{to:"#edit-"+t.id,onClick:e=>{e.preventDefault(),e.stopPropagation(),n||v(!0)},children:(0,y.jsx)(h.A,{style:{color:(0,j.BV)().colorPrimary}})}),(0,y.jsx)(r.A,{title:(0,s.jY)().edit,open:A,onOk:()=>{S(!0),Y.post("/api/admin/link/update",b).then(async e=>{let{data:t}=e;t.error?await k.error(t.message):0===t.error&&(v(!1),a&&a())}).finally(()=>{S(!1)})},okButtonProps:{loading:V},onCancel:()=>v(!1),children:(0,y.jsxs)(o.A,{initialValues:b,onValuesChange:(e,t)=>{w(t)},...f,children:[(0,y.jsx)(o.A.Item,{name:"id",style:{display:"none"},children:(0,y.jsx)(d.A,{hidden:!0})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,y.jsx)(d.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.name"],style:{marginBottom:8},name:"linkName",rules:[{required:!0,message:""}],children:(0,y.jsx)(d.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)().introduction,style:{marginBottom:8},name:"alt",rules:[{required:!0,message:""}],children:(0,y.jsx)(u.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,y.jsx)(p.A,{})})})})]})})]})};var v=a(51664);const b={labelCol:{span:4},wrapperCol:{span:20}},w=e=>{let{addSuccessCall:t,offline:a}=e;const[n,h]=(0,l.useState)(!1),[x,j]=(0,l.useState)(),[f,A]=i.Ay.useMessage({maxCount:3}),[w,k]=(0,l.useState)(!1),C=(0,g.cz)();return(0,y.jsxs)(y.Fragment,{children:[A,(0,y.jsx)(v.Ay,{type:"primary",disabled:a,onClick:()=>h(!0),style:{marginBottom:8},children:(0,s.jY)().add}),(0,y.jsx)(r.A,{title:(0,s.jY)().add,open:n,onOk:()=>{k(!0),C.post("/api/admin/link/add",x).then(async e=>{let{data:a}=e;a.error?await f.error(a.message):0===a.error&&(h(!1),t())}).finally(()=>{k(!1)})},okButtonProps:{loading:w},onCancel:()=>h(!1),children:(0,y.jsxs)(o.A,{onValuesChange:(e,t)=>{j(t)},...b,children:[(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.manage"],style:{marginBottom:8},name:"url",rules:[{required:!0,message:""}],children:(0,y.jsx)(d.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)()["admin.link.name"],style:{marginBottom:8},name:"linkName",rules:[{required:!0,message:""}],children:(0,y.jsx)(d.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)().introduction,style:{marginBottom:8},name:"alt",rules:[{required:!0,message:""}],children:(0,y.jsx)(u.A,{})})})}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(o.A.Item,{label:(0,s.jY)().order,style:{marginBottom:8},name:"sort",rules:[{required:!0,message:""}],children:(0,y.jsx)(p.A,{})})})})]})})]})};var k=a(23236);const C=e=>{let{data:t,offline:a}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(k.A,{title:(0,s.jY)()["admin.link.manage"]}),(0,y.jsx)(n.A,{defaultPageSize:10,offline:a,hideId:!0,columns:[{title:(0,s.jY)()["admin.link.manage"],dataIndex:"url",key:"url",width:240,render:e=>(0,y.jsx)("a",{style:{display:"inline"},rel:"noopener noreferrer",target:"_blank",href:e,children:e})},{title:(0,s.jY)()["admin.link.name"],key:"linkName",dataIndex:"linkName",width:240,render:e=>(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})},{title:(0,s.jY)().introduction,key:"alt",dataIndex:"alt",width:240},{title:(0,s.jY)().order,key:"sort",dataIndex:"sort",width:60}],addBtnRender:e=>(0,y.jsx)(w,{offline:a,addSuccessCall:e}),datasource:t,editBtnRender:(e,t,n)=>(0,y.jsx)(A,{offline:a,record:t,editSuccessCall:n}),deleteApi:"/api/admin/link/delete"})]})}},72944:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ce});var n=a(65957),s=a(40407),l=a(66577),i=a(55352),r=a(44361),o=a(23072),d=a(40841),c=a(51664),p=a(9950),m=a(78816),u=a(28429),h=a(42074),x=a(34647),g=a(63251),j=a(85221),y=a(32077),f=a(16471),A=a(55995),v=a(54021),b=a(66276),w=a(29008),k=a(65472),C=a(78433),V=a(73149),S=a(55320),Y=a(44414);const F=e=>{let{template:t,onUpdate:a}=e;const n=(0,x.cz)(),[s,l]=(0,p.useState)(!1);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(i.A,{md:6,xxl:4,xs:24,children:(0,Y.jsx)(y.A.Ribbon,{text:t.use?(0,m.jY)()["admin.theme.inUse"]:t.preview?(0,m.jY)()["admin.theme.inPreview"]:"",style:{fontSize:16,display:t.use||t.preview?"":"none"},children:(0,Y.jsx)(f.A,{hoverable:!0,cover:(0,Y.jsxs)("div",{style:{overflow:"hidden"},children:[(0,Y.jsx)("div",{style:{position:"absolute",top:8,left:8},children:(0,Y.jsx)(S.A,{keywords:"v"+t.version+(t.tags?","+t.tags.join(","):"")})}),(0,Y.jsx)("img",{style:{width:"100%",minHeight:250,objectFit:"cover"},alt:t.name,title:t.name,src:(0,m.XW)()+t.adminPreviewImage.substring(1)})]}),actions:(e=>{const t=[];return t.push((0,Y.jsx)("div",{onClick:()=>{return t=e.shortTemplate,void n.post("/api/admin/template/preview?shortTemplate="+t).then(()=>{window.open(document.baseURI,"_blank"),a()});var t},children:(0,Y.jsx)(v.A,{},"preview")}),(0,Y.jsx)(h.N_,{to:(0,m.dW)("/template-config?shortTemplate="+e.shortTemplate),children:(0,Y.jsx)(b.A,{},"setting")}),(0,Y.jsx)(h.N_,{to:"#apply",onClick:t=>{var s;t.preventDefault(),s=e.shortTemplate,l(!0),n.post("/api/admin/template/apply?shortTemplate="+s).then(()=>{a()}).finally(()=>{l(!1)})},children:s?(0,Y.jsx)(w.A,{}):(0,Y.jsx)(k.A,{})})),e.deleteAble&&t.push((0,Y.jsx)(V.A,{title:(0,m.jY)().deleteTips,onConfirm:()=>{var t;t=e.shortTemplate,n.post("/api/admin/template/delete?shortTemplate="+t).then(()=>{a()})},children:(0,Y.jsx)(C.A,{},"delete")})),t})(t),children:(0,Y.jsx)(A.A,{title:t.name,description:t.digest})})})})})},I=e=>{let{data:t}=e;const[a,n]=(0,p.useState)(t),s=(0,x.cz)(),i=(0,u.zy)(),y=()=>{(0,g.b)("/template",s).then(e=>{let{data:t}=e;n(t),(0,j.ls)(t,i.pathname)})};(0,p.useEffect)(()=>{n(t)},[t]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.template.manage"]}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(l.A,{gutter:[16,16],children:a.map(e=>(0,Y.jsx)(F,{template:e,onUpdate:y},e.template))}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(h.N_,{to:(0,m.dW)(`/template-center?host=${(0,m.M$)()?new URL((0,m.XW)()).host:window.location.host}`),children:(0,Y.jsx)(c.Ay,{icon:(0,Y.jsx)(d.A,{}),type:"primary",children:(0,m.jY)()["admin.theme.download"]})})]})};var z=a(83696),q=a(62618),B=a(71751),P=a(98706);const D={labelCol:{span:8},wrapperCol:{span:16}},R=e=>{let{data:t,offlineData:a,offline:n,onSubmit:s,loading:l}=e;const[i,d]=(0,p.useState)(t),[u]=z.A.useForm();return(0,p.useEffect)(()=>{d(t),u.setFieldsValue(t)},[t]),(0,Y.jsxs)(z.A,{form:u,...D,initialValues:t,disabled:n||a,onValuesChange:(e,t)=>d({...i,...t}),onFinish:e=>s({...i,...e}),children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.blog.manage"]}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"host",label:(0,m.jY)().blogHost,children:(0,Y.jsx)(q.A,{style:{maxWidth:300},placeholder:""})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"generator_html_status",label:(0,m.jY)().staticSite,children:(0,Y.jsx)(B.A,{})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"disable_comment_status",label:(0,m.jY)().disableComment,children:(0,Y.jsx)(B.A,{})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"article_thumbnail_status",label:(0,m.jY)().articleCover,children:(0,Y.jsx)(B.A,{})}),(0,Y.jsx)(z.A.Item,{name:"system_notification",label:(0,m.jY)().systemNotify,children:(0,Y.jsx)(P.A,{})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",loading:l,type:"primary",disabled:n||a,htmlType:"submit",children:(0,m.jY)().submit})]})};var T=a(30723),U=a(36256),M=a(1832),L=a(46740),W=a(48353);const H=e=>{let{onChange:t,url:a}=e;return(0,Y.jsxs)(L.A,{accept:"image/*",height:64,beforeUpload:e=>(async e=>new Promise((a,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>{const e=s.result;t&&t(e),n()}}))(e),style:{overflow:"hidden",height:64,width:64},children:[(void 0===a||null===a||""===a)&&(0,Y.jsx)("p",{className:"ant-upload-drag-icon",style:{padding:"18px 0",margin:0,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Y.jsx)(T.A,{style:{fontSize:"28px"}})}),null!=a&&""!==a&&(0,Y.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,Y.jsx)(M.A,{style:{borderRadius:8,position:"relative"},preview:!1,src:a,wrapperStyle:{position:"relative"}}),(0,Y.jsx)("div",{style:{position:"absolute",right:0,top:0,borderRadius:"0 8px",padding:4,background:(0,W.BV)().colorPrimary+"5e",color:"white",fontSize:16},onClick:e=>{t&&t(null),e.stopPropagation()},children:(0,Y.jsx)(U.A,{})})]})]})},N={labelCol:{span:8},wrapperCol:{span:16}},E=e=>{let{data:t,offlineData:a,offline:n,onSubmit:s,loading:l}=e;const[i,d]=(0,p.useState)(t),[u]=z.A.useForm();return(0,p.useEffect)(()=>{d(t),u.setFieldsValue(t)},[t]),(0,Y.jsxs)(z.A,{form:u,...N,disabled:n||a,initialValues:t,onValuesChange:(e,t)=>d({...i,...t}),onFinish:e=>s({...i,...e}),children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.basic.manage"]}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"title",label:(0,m.jY)().title,rules:[{required:!0}],children:(0,Y.jsx)(q.A,{placeholder:"",showCount:!0,maxLength:30})}),(0,Y.jsx)(z.A.Item,{name:"second_title",label:(0,m.jY)().subTitle,children:(0,Y.jsx)(q.A,{placeholder:"",showCount:!0,maxLength:30})}),(0,Y.jsx)(z.A.Item,{name:"keywords",label:(0,m.jY)().keywords,children:(0,Y.jsx)(P.A,{showCount:!0,rows:2,maxLength:160})}),(0,Y.jsx)(z.A.Item,{name:"description",label:(0,m.jY)().websiteDesc,children:(0,Y.jsx)(P.A,{showCount:!0,rows:5,maxLength:160})}),(0,Y.jsx)(z.A.Item,{name:"favicon_ico_base64",label:`${(0,m.jY)().favicon}`,children:(0,Y.jsx)(H,{url:i.favicon_ico_base64,onChange:e=>{d({...i,favicon_ico_base64:e||""})}})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",loading:l,disabled:n||a,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})]})};var O=a(19573);const K={labelCol:{span:8},wrapperCol:{span:16}},G=e=>{let{data:t,offline:a,offlineData:n,onSubmit:s,loading:l}=e;const[i,d]=(0,p.useState)(t),[u]=z.A.useForm();return(0,p.useEffect)(()=>{d(t),u.setFieldsValue(t)},[t]),(0,Y.jsxs)(z.A,{form:u,...K,disabled:a||n,initialValues:t,onValuesChange:(e,t)=>d({...i,...t}),onFinish:e=>s({...i,...e}),children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.other.manage"]}),(0,Y.jsx)(o.A,{}),"zh_CN"==(0,W.BV)().lang&&(0,Y.jsx)(z.A.Item,{name:"icp",label:"ICP\u5907\u6848\u4fe1\u606f",children:(0,Y.jsx)(P.A,{})}),(0,Y.jsx)(z.A.Item,{name:"webCm",label:(0,m.jY)()["website.statistics"],children:(0,Y.jsx)(P.A,{rows:7})}),(0,Y.jsx)(O.A,{contentType:"html",value:i.webCm}),(0,Y.jsx)(z.A.Item,{name:"robotRuleContent",label:"robots.txt",children:(0,Y.jsx)(P.A,{rows:7,placeholder:"User-agent: *\nDisallow: /admin/"})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",disabled:a||n,loading:l,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})]})};var X=a(24366),Z=a(20212),J=a(36332);const Q={labelCol:{span:8},wrapperCol:{span:16}},_=e=>{let{data:t,offlineData:a,offline:s,onSubmit:r,loading:d}=e;const[h,g]=(0,p.useState)(!1),{modal:j}=Z.A.useApp(),[y,f]=n.Ay.useMessage({maxCount:3}),[A,v]=(0,p.useState)(t),[b]=z.A.useForm(),w=(0,u.Zp)(),k=(0,x.cz)();return(0,p.useEffect)(()=>{v(t),b.setFieldsValue(t)},[t]),(0,Y.jsxs)(z.A,{form:b,...Q,disabled:s||a,initialValues:t,onValuesChange:(e,t)=>v({...A,...t}),onFinish:e=>r({...A,...e}),children:[f,(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,children:(0,Y.jsx)(c.Ay,{type:"dashed",disabled:s||a,loading:h,onClick:async()=>{if(!h){g(!0);try{const{data:e}=await k.get("/api/admin/upgrade");if(e.data.upgrade){const t=`${(0,m.jY)().newVersion} - #${e.data.version.type}`;j.info({width:682,title:t,content:(0,Y.jsx)(J.A,{data:e.data}),closable:!0,okText:(0,m.jY)().doUpgrade,onOk:function(){w((0,m.dW)("/upgrade"),{replace:!0})}})}else 0===e.error&&(g(!1),await y.info(e.message))}finally{g(!1)}}},style:{float:"right"},children:(0,m.jY)().checkUpgrade})})}),(0,Y.jsx)(z.A.Item,{name:"autoUpgradeVersion",label:(0,m.jY)()["admin.upgrade.autoCheckCycle"],children:(0,Y.jsxs)(X.A,{style:{maxWidth:120},children:[(0,Y.jsx)(X.A.Option,{value:86400,children:(0,m.jY)()["admin.upgrade.cycle.oneDay"]},"86400"),(0,Y.jsx)(X.A.Option,{value:604800,children:(0,m.jY)()["admin.upgrade.cycle.oneWeek"]},"604800"),(0,Y.jsx)(X.A.Option,{value:1296e3,children:(0,m.jY)()["admin.upgrade.cycle.halfMonth"]},"1296000"),(0,Y.jsx)(X.A.Option,{value:-1,children:(0,m.jY)()["admin.upgrade.cycle.never"]},"-1")]})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"upgradePreview",label:(0,m.jY)()["admin.upgrade.canPreview"],children:(0,Y.jsx)(B.A,{})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",disabled:s||a,loading:d,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})]})};var $=a(83331),ee=a(37596),te=a(47475),ae=a(1884);const ne={labelCol:{span:8},wrapperCol:{span:16}},{Option:se}=X.A,le=e=>{let{data:t,offlineData:a,offline:n,onSubmit:s,loading:l}=e;const[i,d]=(0,p.useState)(t),[u]=z.A.useForm(),h=()=>"zh_CN"===(0,m.jY)().lang?te.A.Pagination.items_per_page:ae.A.Pagination.items_per_page,x=()=>({admin_darkMode:(0,W.BV)().dark,admin_compactMode:(0,W.BV)().compactMode,admin_color_primary:(0,W.BV)().colorPrimary,language:(0,W.BV)().lang});return(0,p.useEffect)(()=>{u.setFieldsValue({...t,...x()})},[t]),(0,Y.jsxs)(z.A,{...ne,form:u,disabled:n||a,initialValues:t,onValuesChange:e=>{var t;t=e,d({...i,...t})},onFinish:e=>s({...i,...e,...x()}),children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.admin.manage"]}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"admin_static_resource_base_url",label:(0,m.jY)().adminStaticResourceUrl,children:(0,Y.jsx)(q.A,{style:{maxWidth:300},placeholder:(0,m.jY)().adminStaticResourceUrlTips})}),(0,Y.jsx)(z.A.Item,{name:"session_timeout",label:(0,m.jY)().adminSessionTimeout,rules:[{required:!0}],children:(0,Y.jsx)(q.A,{suffix:(0,m.jY)().adminSessionTimeoutUnit,style:{maxWidth:140},max:99999,type:"number",min:5,placeholder:""})}),(0,Y.jsx)(z.A.Item,{name:"language",label:(0,m.jY)().language,children:(0,Y.jsxs)(X.A,{style:{maxWidth:120},onChange:e=>{(0,W.xg)({lang:e})},children:[(0,Y.jsx)(se,{value:"zh_CN",children:(0,m.jY)().languageChinese}),(0,Y.jsx)(se,{value:"en_US",children:(0,m.jY)().languageEnglish})]})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"admin_darkMode",label:(0,m.jY)()["admin.dark.mode"],children:(0,Y.jsx)(B.A,{onChange:e=>{(0,W.xg)({dark:e})}})}),(0,Y.jsx)(z.A.Item,{valuePropName:"checked",name:"admin_compactMode",label:(0,m.jY)()["admin.compact.mode"],children:(0,Y.jsx)(B.A,{onChange:e=>{(0,W.xg)({compactMode:e})}})}),(0,Y.jsx)(z.A.Item,{label:(0,m.jY)()["admin.color.primary"],children:(0,Y.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,Y.jsx)($.A,{value:(0,W.BV)().colorPrimary,onChange:e=>{(0,W.xg)({colorPrimary:e.toHexString()})},disabledAlpha:!0,presets:[{defaultOpen:!0,label:(0,m.im)(),colors:ee.xg}]}),(0,Y.jsx)("span",{style:{paddingLeft:8},children:(0,W.BV)().colorPrimary})]})}),(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)().adminMoreSettings}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"admin_article_page_size",label:(0,m.jY)().admin_article_page_size,children:(0,Y.jsx)(X.A,{style:{maxWidth:120},options:[{value:10,label:"10 "+h()},{value:20,label:"20 "+h()},{value:50,label:"50 "+h()},{value:100,label:"100 "+h()}]})}),(0,Y.jsx)(z.A.Item,{name:"article_auto_digest_length",label:(0,m.jY)().article_auto_digest_length_tips,children:(0,Y.jsx)(q.A,{suffix:(0,m.jY)()["editor.wordsCount"],style:{maxWidth:120},max:99999,type:"number",min:-1,placeholder:""})}),(0,Y.jsx)(r.A,{level:4,children:"PWA"}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"favicon_png_pwa_192_base64",label:`${(0,m.jY)().favicon} PWA (192px)`,children:(0,Y.jsx)(H,{url:i.favicon_png_pwa_192_base64,onChange:e=>{d({...i,favicon_png_pwa_192_base64:e||""})}})}),(0,Y.jsx)(z.A.Item,{name:"favicon_png_pwa_512_base64",label:`${(0,m.jY)().favicon} PWA (512px)`,children:(0,Y.jsx)(H,{url:i.favicon_png_pwa_512_base64,onChange:e=>{d({...i,favicon_png_pwa_512_base64:e||""})}})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",loading:l,disabled:n||a,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})]})};var ie=a(23236),re=a(33441);const oe={labelCol:{span:8},wrapperCol:{span:16}},de=e=>{let{data:t,offline:a,offlineData:n,onSubmit:s,loading:l}=e;const[i,d]=(0,p.useState)(t),[u]=z.A.useForm();return(0,p.useEffect)(()=>{d(t),u.setFieldsValue(t)},[t]),(0,p.useEffect)(()=>{d(e=>({...e,ai_model:""}))},[i.ai_provider]),(0,Y.jsxs)(z.A,{form:u,...oe,disabled:a||n,initialValues:t,onValuesChange:(e,t)=>d({...i,...t}),onFinish:e=>s({...i,...e}),children:[(0,Y.jsx)(r.A,{level:4,children:(0,m.jY)()["admin.ai.manage"]}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(z.A.Item,{name:"ai_provider",label:(0,m.jY)()["website.ai_provider"],required:!0,children:(0,Y.jsx)(X.A,{style:{maxWidth:200},children:t.allProviders.map(e=>(0,Y.jsx)(X.A.Option,{value:e.name,children:(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,Y.jsx)(re.A,{name:e.name})," ",e.name.toLowerCase().replace("_","")]})}))})}),(0,Y.jsx)(z.A.Item,{name:"ai_model",label:(0,m.jY)()["website.ai_model"],required:!0,children:(0,Y.jsx)(X.A,{style:{maxWidth:200},children:t.allProviders.map(e=>i.ai_provider===e.name?(0,Y.jsx)(Y.Fragment,{children:e.models.map(e=>(0,Y.jsx)(X.A.Option,{value:e,children:e}))}):(0,Y.jsx)(Y.Fragment,{}))})}),(0,Y.jsx)(z.A.Item,{name:"ai_api_key",label:(0,m.jY)()["website.ai_api_key"],required:!0,children:(0,Y.jsx)(q.A,{})}),(0,Y.jsx)(z.A.Item,{name:"ai_prompt",label:(0,m.jY)()["website.ai_prompt"],children:(0,Y.jsx)(P.A,{rows:7})}),(0,Y.jsx)(o.A,{}),(0,Y.jsx)(c.Ay,{enterKeyHint:"enter",disabled:a||n,loading:l,type:"primary",htmlType:"submit",children:(0,m.jY)().submit})]})},ce=e=>{let{data:t,offline:a,offlineData:r,activeKey:o,updateCache:d}=e;const c=(0,u.zy)(),g=(e,t)=>{const a="basic"===e?"/website":"/website/"+e;return(0,Y.jsx)(h.N_,{to:(0,m.dW)(a),replace:!0,style:{color:o===e?(0,W.BV)().colorPrimary:"inherit"},children:t})},[y,f]=(0,p.useState)(!1),[A,v]=n.Ay.useMessage({maxCount:3}),b=(0,x.cz)(),w=()=>{window.location.search=(0,m.dW)(c.pathname).split("?")[1],window.location.reload()},k=async e=>{try{f(!0);const{data:t}=await b.post("/api/admin/website/"+o,{...e});return f(!1),t.error?(await A.error(t.message),!1):(await A.success(t.message),(e=>{const t=new URL(window.location.href),a=(0,j.Rn)(c.pathname,"?"+t.searchParams.toString());d&&d(e,a)})(t.data),!0)}catch(t){return f(!1),await A.error(t.message),!1}finally{f(!1)}},C=()=>"basic"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(E,{loading:y,offlineData:r,onSubmit:e=>{k(e).then(e=>{e&&w()})},offline:a,data:t})})}):"blog"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(R,{loading:y,offlineData:r,onSubmit:e=>{k(e).then(e=>{e&&w()})},offline:a,data:t})})}):"admin"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(le,{loading:y,offlineData:r,onSubmit:e=>{k(e).then(e=>{e&&w()})},offline:a,data:t})})}):"template"===o?(0,Y.jsx)(I,{data:t}):"other"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(G,{loading:y,onSubmit:e=>{k(e).then(e=>{e&&w()})},offlineData:r,offline:a,data:t})})}):"upgrade"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(_,{loading:y,offlineData:r,onSubmit:e=>{k(e).then(()=>{})},offline:a,data:t})})}):"ai"===o?(0,Y.jsx)(l.A,{children:(0,Y.jsx)(i.A,{xs:24,style:{maxWidth:600},children:(0,Y.jsx)(de,{loading:y,offlineData:r,onSubmit:e=>{k(e).then(()=>{})},offline:a,data:t})})}):(0,Y.jsx)(Y.Fragment,{});return(0,Y.jsxs)(Y.Fragment,{children:[v,(0,Y.jsx)(ie.A,{title:(0,m.jY)()["admin.setting"]}),(0,Y.jsx)(s.A,{activeKey:o,items:[{key:"basic",label:g("basic",(0,m.jY)()["admin.basic.manage"]),children:C()},{key:"blog",label:g("blog",(0,m.jY)()["admin.blog.manage"]),children:C()},{key:"admin",label:g("admin",(0,m.jY)()["admin.admin.manage"]),children:C()},{key:"template",label:g("template",(0,m.jY)()["admin.template.manage"]),children:C()},{key:"other",label:g("other",(0,m.jY)()["admin.other.manage"]),children:C()},{key:"ai",label:g("ai",(0,m.jY)()["admin.ai.manage"]),children:C()},{key:"upgrade",label:g("upgrade",(0,m.jY)()["admin.upgrade.manage"]),children:C()}]})]})}},75997:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(51664),s=a(65957),l=a(88280),i=a(34647),r=a(23236),o=a(23072),d=a(78816),c=a(44414);const p=e=>{let{data:t}=e;const a=(0,i.cz)(),[p,m]=s.Ay.useMessage({maxCount:3});return(0,c.jsxs)(c.Fragment,{children:[m,(0,c.jsx)(r.A,{title:(0,d.jY)().dev}),(0,c.jsx)(n.Ay,{type:"primary",onClick:async()=>{const{data:e}=await a.get("/api/admin/dev/releaseLocks");e.error?p.error(e.message):p.success(e.message)},children:"Release All Lock"}),(0,c.jsx)(o.A,{}),(0,c.jsx)(l.A,{columns:[{title:(0,d.jY)().key,dataIndex:"name",key:"name"},{title:(0,d.jY)().value,dataIndex:"remark",key:"remark"}],dataSource:t.locks})]})}},78091:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ye});var n=a(9950),s=a(65957),l=a(20212),i=a(52378),r=a(51664),o=a(75220),d=a(66577),c=a(55352),p=a(23072),m=a(16471),u=a(78816),h=a(24366),x=a(62618),g=a(44414);const j=(0,n.forwardRef)((e,t)=>{let{hidden:a,onChange:s,addonBefore:l,status:i,defaultValue:r,placeholder:o,style:d,variant:c,size:p,maxLength:m,prefix:u,suffix:h}=e;const[j,y]=(0,n.useState)(r||""),[f,A]=(0,n.useState)(!1);return(0,g.jsx)(x.A,{style:{...d,display:a?"none":"flex"},prefix:u,suffix:h,defaultValue:r,ref:t,variant:c,status:i,maxLength:m,addonBefore:l,size:p,onChange:async e=>{y(e.target.value),f||s(e.target.value)},onCompositionStart:()=>A(!0),onCompositionUpdate:()=>A(!0),onCompositionEnd:async()=>{A(!1),s(j)},placeholder:o})});var y=a(35434),f=a(34647),A=a(30723),v=a(29008),b=a(36256),w=a(1832),k=a(48353),C=a(3383);const V=e=>{let{onChange:t,thumbnail:a,getContainer:l}=e;const[i,r]=(0,n.useState)(!1),[o,d]=s.Ay.useMessage({maxCount:3}),c=(0,f.cz)(l);return(0,g.jsxs)(C.A,{onSuccess:e=>{let{data:a}=e;r(!1),t&&t(a.url)},disabled:i,onProgress:()=>{r(!0)},onError:e=>{o.error(e.message),r(!1)},accept:"image/*",style:{overflow:"hidden",minHeight:102,maxHeight:256},uploadConfig:{buildUploadUrl:function(e){return`/api/admin/upload/thumbnail?dir=${e}`},formName:"imgFile",axiosInstance:c,tryAppendBackendServerUrl:u.A_},type:"thumbnail",children:[d,(void 0===a||null===a||""===a)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{className:"ant-upload-drag-icon",style:{padding:"16px 0",margin:0,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,g.jsx)(A.A,{style:{fontSize:28}})}),(0,g.jsxs)("p",{className:"ant-upload-text",style:{padding:"8px 0 8px 0",margin:0},children:[i&&(0,g.jsx)(v.A,{})," ",(0,u.jY)().uploadTips]})]}),null!=a&&""!==a&&(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)(w.A,{style:{borderRadius:0,position:"relative"},preview:!1,id:"thumbnail",src:a,wrapperStyle:{position:"relative"}}),(0,g.jsx)("div",{style:{position:"absolute",right:0,top:0,borderRadius:"0 8px",padding:12,background:(0,k.BV)().colorPrimary+"5e",color:"white",fontSize:20},onClick:e=>{t&&t(""),e.stopPropagation()},children:(0,g.jsx)(b.A,{})})]})]})};var S=a(83696),Y=a(71751),F=a(68046),I=a(59334),z=a(44361),q=a(55320);const B=e=>{let{allTags:t,keywords:a,onKeywordsChange:s}=e;const[l,i]=(0,n.useState)({keywords:"",inputVisible:!1,inputValue:""}),r=(0,n.useRef)(null),d=()=>{const{inputValue:e}=l;let t=l.keywords+"";e&&(t=t?t+=","+e:e),i({keywords:t,inputVisible:!1,inputValue:""}),t!==l.keywords&&s(t)},{inputVisible:c,inputValue:p}=l;if(""===l.keywords&&null!=a&&(l.keywords=a),void 0!==l.keywords&&null!=l.keywords){const e=Array.from(new Set(l.keywords.split(",").filter(e=>""!==e)));l.keywords=e.join(",")}else l.keywords="";return(0,g.jsxs)(g.Fragment,{children:[l.keywords.length>0&&(0,g.jsx)("div",{style:{marginBottom:8},children:(0,g.jsx)(o.A,{size:[0,4],wrap:!0,children:(0,g.jsx)(q.A,{keywords:l.keywords,closeable:!0,onClose:(e,t)=>{e.preventDefault(),(e=>{const t=l.keywords.split(",").filter(t=>t!==e),a=t.join(",");l.keywords!==a&&(i({...l,keywords:a}),s(a))})(t)}})})}),c&&(0,g.jsx)(x.A,{ref:r,type:"text",style:{width:98},value:p,onChange:e=>{i({...l,inputValue:e.target.value})},onBlur:d,onPressEnter:d}),!c&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.A,{size:[0,8],wrap:!0,children:(0,g.jsxs)(F.A,{color:(0,k.BV)().colorPrimary,onClick:()=>{i(e=>(setTimeout(()=>{r&&r.current&&r.current.input&&r.current.input.focus()},0),{...e,inputVisible:!0}))},style:{userSelect:"none"},children:[(0,g.jsx)(I.A,{})," ",(0,u.jY)().tagTips]})}),(0,g.jsx)(z.A,{level:5,style:{marginTop:12,fontSize:14},children:(0,u.jY)().allTag}),(0,g.jsx)("div",{style:{maxHeight:240,overflowY:"auto"},children:(0,g.jsx)(q.A,{onClick:e=>{(e=>{let t;e.currentTarget.remove(),t=l.keywords?l.keywords.split(","):[],t.push(e.currentTarget.textContent);const a=t.join(",");i({...l,keywords:a}),s(a)})(e)},keywords:t.join(","),tagStyle:{cursor:"pointer"},closeable:!1})})]})]})};var P=a(42487),D=a(60686),R=a(66276),T=a(65472),U=a(90582),M=a(29314),L=a(65273);const W=(0,n.memo)(e=>{let{digestRef:t,initDigest:a,handleValuesChange:s}=e;const[l,i]=(0,n.useState)(0===a.trim().length),[r,o]=(0,n.useState)(a),[d,c]=(0,n.useState)(a),p=(0,n.useRef)(!1);(0,n.useEffect)(()=>{p.current?s({digest:r}):p.current=!0},[r]),(0,n.useEffect)(()=>{l||c(r)},[l]);return(0,g.jsx)(m.A,{title:(0,u.jY)().digest,style:{marginBottom:36},extra:[0===r.length?(0,g.jsx)(g.Fragment,{}):l?(0,g.jsx)(T.A,{onClick:()=>{i(!1)},style:{color:(0,k.BV)().colorPrimary,cursor:"pointer"}}):(0,g.jsx)(U.A,{onClick:()=>{i(!0)},style:{color:(0,k.BV)().colorPrimary,cursor:"pointer"}})],children:l?(0,g.jsx)(L.A,{ref:t,variant:"borderless",defaultValue:r,placeholder:(0,u.jY)().digestTips,onChange:e=>{o(e)},minRows:2,maxRows:12,style:{padding:0,borderRadius:0},formStyle:{marginBottom:0}}):(0,g.jsx)(M.A,{dark:(0,k.BV)().dark,style:{maxHeight:264,overflowY:"auto",overflowX:"hidden"},onContentChange:e=>{o(e)},editable:!0,htmlContent:d})})});var H=a(42074);const N=e=>{let{article:t,initDigest:a,saving:s,tags:l,containerRef:i,digestRef:o,handleValuesChange:p}=e;const[h,x]=(0,n.useState)(!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(H.N_,{to:"#settings",children:(0,g.jsx)(r.Ay,{type:"text",title:(0,u.jY)()["admin.setting"],style:{border:0,display:"flex",justifyContent:"center",alignItems:"center",width:47,minWidth:47,borderRadius:8,height:47,cursor:"pointer",background:(0,k.BV)().dark?"#141414":"white",color:"rgb(102, 102, 102)"},icon:h?(0,g.jsx)(D.A,{style:{fontSize:24}}):(0,g.jsx)(R.A,{style:{fontSize:24}}),className:"editor-icon",onClick:e=>{e.stopPropagation(),e.preventDefault(),x(e=>!e)}})}),(0,g.jsx)(P.A,{title:(0,u.jY)()["admin.setting"]+(s?"["+(0,u.jY)().saving+"]":""),placement:"right",closable:{placement:"end"},autoFocus:!1,keyboard:!0,onClose:()=>{x(!1)},styles:{header:{padding:12},body:{padding:12,overflowX:"hidden"}},open:h,getContainer:()=>i.current,children:(0,g.jsx)(c.A,{md:24,sm:24,xs:24,style:{overflow:"hidden"},children:(0,g.jsxs)(d.A,{gutter:[8,8],children:[(0,g.jsx)(c.A,{span:24,children:(0,g.jsx)(m.A,{title:(0,g.jsx)("span",{style:{textAlign:"start",display:"flex"},children:(0,u.jY)().articleCover}),style:{textAlign:"center",marginTop:6},children:(0,g.jsx)(V,{getContainer:()=>i.current,thumbnail:t.thumbnail,onChange:e=>{p({thumbnail:e})}})})}),(0,g.jsx)(c.A,{span:24,children:(0,g.jsx)(m.A,{title:(0,u.jY)()["admin.setting"],children:(0,g.jsxs)(d.A,{children:[(0,g.jsx)(c.A,{xs:24,md:12,children:(0,g.jsx)(S.A.Item,{style:{marginBottom:0},valuePropName:"checked",label:(0,u.jY)().commentAble,children:(0,g.jsx)(Y.A,{value:t.canComment,onChange:e=>{p({canComment:e})}})})}),(0,g.jsx)(c.A,{xs:24,md:12,children:(0,g.jsx)(S.A.Item,{style:{marginBottom:0},valuePropName:"checked",label:(0,u.jY)().private,children:(0,g.jsx)(Y.A,{value:t.privacy,onChange:e=>{p({privacy:e})}})})})]})})}),(0,g.jsx)(c.A,{span:24,children:(0,g.jsx)(m.A,{title:(0,u.jY)().tag,children:(0,g.jsx)(B,{onKeywordsChange:e=>{p({keywords:e})},keywords:t.keywords?t.keywords:"",allTags:l.map(e=>e.text)})})}),(0,g.jsx)(c.A,{span:24,children:(0,g.jsx)(W,{digestRef:o,initDigest:a,handleValuesChange:p})})]})})})]})};var E=a(67743),O=a(54021),K=a(87210),G=a(24937),X=a(45209),Z=a(33441),J=a(16520),Q=a(37596);const _=(0,G.Ay)("div")`
    .ant-btn {
        -webkit-transition: none;
        box-shadow: none;
    }

    .btn {
        min-width: 120px;
    }

    @media screen and (max-width: 576px) {
        .btn {
            min-width: 40px;
        }
    }
`,$=e=>{let{data:t,offline:a,fullScreen:s,onSubmit:l,getContainer:o,onAiMessagesChange:d,onAiDrawerSizeChange:c,aiDrawerWidth:p}=e;const m=(0,n.useRef)(null),{useBreakpoint:h}=i.Ay,x=h(),j=(0,f.cz)(o);return(0,n.useEffect)(()=>{const e=e=>{const t=/Mac|iPhone|iPad|iPod/i.test(navigator.userAgent);(t&&e.metaKey&&"Enter"===e.key||!t&&e.ctrlKey&&"Enter"===e.key)&&m.current&&!(0,J.u)()&&m.current.click()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,g.jsxs)(_,{style:{display:"flex",justifyContent:"end",gap:8},children:[(0,g.jsx)(X.A,{aiProvider:t.aiProvider,apiUri:"/api/admin/article/ai",input:"",aiMessages:t.aiMessages?t.aiMessages:[],subject:t.article.title,sessionId:t.article.logId?t.article.logId:0,getContainer:o,onAiMessagesChange:d,axiosInstance:j,user:(0,Q.Nq)(),drawerWidth:p,dark:(0,k.BV)().dark,configUrl:(0,u.dW)("/website/ai"),onSizeChange:c,children:(0,g.jsxs)(r.Ay,{className:"btn",type:"primary",style:{background:`linear-gradient(135deg, #6253e1, ${(0,k.BV)().colorPrimary})`,border:"none"},children:[(0,g.jsx)(Z.A,{name:t.aiProvider}),x.sm&&(0,g.jsx)("span",{children:(0,u.jY)()["admin.ai"]})]})}),(0,g.jsxs)(r.Ay,{className:"btn",type:s?"default":"dashed",disabled:a||t.saving.rubbishSaving&&!t.saving.autoSaving,onClick:async()=>await l(t.article,!1,!1,!1),children:[(0,g.jsx)(E.A,{hidden:t.saving.rubbishSaving}),x.sm&&(0,g.jsx)("span",{children:t.saving.rubbishSaving?(0,u.jY)().saving:(0,u.jY)().saveAsDraft})]}),(0,g.jsxs)(r.Ay,{className:"btn",type:"dashed",disabled:a||t.saving.previewIng&&!t.saving.autoSaving,style:{display:s?"none":"flex"},onClick:async()=>await l(t.article,!t.rubbish,!0,!1),children:[(0,g.jsx)(O.A,{}),x.sm&&(0,u.jY)().preview]}),(0,g.jsxs)(r.Ay,{ref:m,type:"primary",className:"btn",disabled:a,loading:t.saving.releaseSaving,onClick:async()=>{await l(t.article,!0,!1,!1)},children:[(0,g.jsx)(K.A,{}),x.sm&&(0,g.jsx)("span",{children:!0===t.article.privacy?(0,u.jY)().save:(0,u.jY)().release})]})]})};var ee=a(85221);const te=e=>void 0===e||null===e||e<=0?"local-article-cache-draft":"local-article-cache-"+e,ae=e=>{const t=e.article.logId&&e.article.logId>0?e.article:{version:-1,title:"",keywords:"",rubbish:!0},a=(0,ee.Pn)(te(t.logId));let n;return n=a&&a.version>=e.article.version||a&&-1===t.version?a:e.article,{typeOptions:e.types?e.types.map(e=>({value:e.id,label:e.typeName})):[],aiProvider:e.aiProvider,aiMessages:e.aiMessages,editorVersion:n.version,tags:e.tags?e.tags:[],rubbish:!(!e.article||!e.article.rubbish)&&e.article.rubbish,article:n,saving:{previewIng:!1,releaseSaving:!1,rubbishSaving:!1,autoSaving:!1}}},ne=e=>{(0,ee.ls)(te(e.logId),e)};var se=a(91013),le=a(3781),ie=a(4385);const re=e=>{let{fullScreenElement:t,onExitFullScreen:a,onFullScreen:s,fullScreen:l}=e;const i=()=>{try{ie.A.isEnabled&&ie.A.request(t).then(()=>{}).catch(e=>{console.error(e)})}catch(e){console.error(e)}finally{s()}},o=()=>{ie.A.isEnabled&&ie.A.exit().then(()=>{a()}).catch(e=>{console.error(e)})},d=()=>{!!document.fullscreenElement||o()};return(0,n.useEffect)(()=>(l&&(0,y.x)()&&i(),document.addEventListener("fullscreenchange",d),()=>{document.removeEventListener("fullscreenchange",d)})),(0,g.jsx)(H.N_,{to:l?"#exitFullScreen":"#enterFullScreen",children:(0,g.jsx)(r.Ay,{type:"text",icon:l?(0,g.jsx)(se.A,{title:(0,u.Qi)(),style:{fontSize:24}}):(0,g.jsx)(le.A,{title:(0,u.s2)(),style:{fontSize:24}}),style:{border:0,display:"flex",justifyContent:"center",alignItems:"center",width:47,minWidth:47,borderRadius:8,height:47,fontSize:24,cursor:"pointer",color:"rgb(102, 102, 102)",background:(0,k.BV)().dark?"#141414":"white"},onClick:e=>{l?o():i(),e.stopPropagation(),e.preventDefault()}})})};var oe=a(12523),de=a(52285),ce=a(11005),pe=a(30769),me=a(28429),ue=a(591),he=a(23236),xe=a(78453),ge=a(14737),je=a(46629);const ye=e=>{let{offline:t,data:a,onExitFullScreen:x,onFullScreen:A,fullScreen:v,updateCache:b}=e;const w=(0,me.zy)(),C=(0,n.useRef)(null),V=ae(a),[S,Y]=(0,n.useState)(V),F=(0,n.useRef)(null),I=(0,n.useRef)(null),z=(0,n.useRef)(V.article.version),q=(0,n.useRef)(V.article.logId?V.article.logId:-1),B=(0,n.useRef)(null),P=(0,n.useRef)(null);let D=0;const[R,T]=s.Ay.useMessage({maxCount:3,getContainer:()=>C.current}),{modal:U}=l.A.useApp(),M=(0,f.cz)(()=>C.current),L=(0,me.Zp)(),W=e=>{ne(e),Y(t=>({...t,article:e,saving:{...t.saving,releaseSaving:!1,rubbishSaving:!1,previewIng:!1,autoSaving:!1}})),0===D&&(0,Q.V8)()},H=e=>(0,ee.Rn)(w.pathname,"?"+e.searchParams.toString()),E=async(e,t,a,n)=>{let s,l={...e,version:z.current,rubbish:!t};if((0,y.a)())return void W(e);if(G(e))return void R.error({content:(0,u.jY)().article_require_title});if(X(e))return void R.error((0,u.jY)().article_require_type);n||K();const i=void 0===e.logId||null===e.logId||e.logId<=0;s=i?u.jb:u.iR,Y(t?e=>({...e,saving:{...e.saving,releaseSaving:!0,autoSaving:n}}):e=>({...e,saving:{...e.saving,rubbishSaving:!0,previewIng:a,autoSaving:n}})),(0,Q.g1)((0,u.jY)().articleEditExitWithOutSaveSuccess);try{let e;try{const{data:t}=await M.post(s,l);if(e=t,t.error)return void U.error({title:"\u4fdd\u5b58\u5931\u8d25",content:t.message,getContainer:()=>C.current});t.data&&(z.current=t.data.article.version)}finally{}const t=e;if(0===t.error){t.documentTitle&&(0,Q.Hp)(t.documentTitle),0===D&&(0,Q.V8)(),n||R.info(t.message),a&&window.open(t.data.article.previewUrl,"_blank");const e=t.data.article,s=new URL(window.location.href);i?(q.current=e.logId,s.searchParams.set("id",e.logId),l={...l,...e},(0,ee.f6)(te(null)),L(w.pathname+s.search,{replace:!0})):(l={...l,thumbnail:e.thumbnail,lastUpdateDate:e.lastUpdateDate,version:e.version},(e=>{(0,ee.f6)(te(e.logId))})(l)),b&&b(t.data,H(s))}}finally{t?((e,t)=>{Y(a=>({...a,rubbish:!1,article:O(a.article,e,t),saving:{...a.saving,releaseSaving:!1,rubbishSaving:!1,previewIng:!1,autoSaving:!1}}))})(l,i):((e,t)=>{Y(a=>({...a,rubbish:!0,article:O(a.article,e,t),saving:{...a.saving,rubbishSaving:!1,previewIng:!1,autoSaving:!1}}))})(l,i)}},O=(e,t,a)=>{const n={...t,logId:t.logId,lastUpdateDate:t.lastUpdateDate,version:t.version,thumbnail:e.thumbnail&&e.thumbnail.trim().length>0?e.thumbnail:t.thumbnail};return F.current&&F.current.input&&(0===F.current.input.value.trim().length&&a?(n.alias=t.alias,F.current.input.value=t.alias):n.alias=F.current.input.value),I.current&&I.current.input&&0===I.current.input.value.trim().length&&a&&(n.digest=t.digest,I.current.input.value=t.digest),n};(0,n.useEffect)(()=>{const e=ae(a);(0,Q.eP)(e.article,a.article)?console.info("Skip article data useEffect() "+JSON.stringify(a.article.logId)):(z.current=e.article.version,e.article.logId?q.current=e.article.logId:q.current=-1,Z(e.article))},[a.article]),(0,n.useEffect)(()=>{Y(e=>({...e,aiProvider:a.aiProvider,aiMessages:a.aiMessages}))},[a.aiProvider,a.aiMessages]),(0,n.useEffect)(()=>{(0,Q.eP)(S.article,a.article)?console.info("Skip article data useEffect() "+JSON.stringify(a.article.logId)):t?ne(S.article):(z.current=S.article.version,Z(S.article))},[t]);const K=()=>{P.current&&P.current.unsubscribe(),B.current=new oe.B;const e=B.current.pipe((0,de.M)(()=>{(0,Q.g1)((0,u.jY)().articleEditExitWithOutSaveSuccess)}),(0,ce.Z)(2e3),(0,de.M)(()=>{D+=1}),(0,pe.H)(async e=>{D-=1,e.logId=q.current;try{await E(e,!1,!1,!0)}catch(t){console.error(t)}})).subscribe();P.current&&(P.current=e)};(0,n.useEffect)(()=>(K(),()=>{P.current&&P.current.unsubscribe()}),[]);const G=e=>void 0===e.title||null===e.title||""===e.title,X=e=>void 0===e.typeId||null===e.typeId||e.typeId<0,Z=e=>{Y(t=>{const a={...t.article,...e};if((e=>{const t=G(e),a=X(e);return!(t||a)})(a)){const e=B.current;e&&e.next(a)}else W(a);return{...t,article:a}})},{useBreakpoint:J}=i.Ay,_=J(),se=e=>{const t=new URL(window.location.href),a=H(t),n=(0,ee.Pn)(a);n.aiMessages=e,b&&b(n,a)},le="ai/chat/drawer/width",ie="editor/preview",ye=()=>{const e=(0,ee.Pn)(le);return e||"large"},fe=e=>{(0,ee.ls)(le,e)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{style:{paddingTop:v?0:20,gap:8,display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(he.A,{noBottomBorder:!0,title:(0,u.jY)()["admin.log.edit"],style:{marginTop:0,marginBottom:0,display:v?"none":"inherit"}}),!v&&(0,g.jsx)($,{fullScreen:v,offline:t,data:S,onSubmit:E,onAiMessagesChange:se,onAiDrawerSizeChange:fe,aiDrawerWidth:ye()},a.article.logId+"actionbar_offline:"+t)]}),!v&&(0,g.jsx)(p.A,{style:{marginTop:16,marginBottom:16}}),T,(0,g.jsxs)(m.A,{title:"",ref:C,style:{borderRadius:v?0:8,overflow:"hidden"},styles:{body:{padding:0}},children:[(0,g.jsxs)(d.A,{gutter:[8,0],style:{position:"relative",borderBottom:(0,k.BV)().dark?"1px solid rgba(253, 253, 253, 0.12)":"1px solid #DDD"},children:[(0,g.jsx)(c.A,{md:v?4:8,xl:9,xxl:12,xs:16,sm:v?4:6,children:(0,g.jsx)(j,{suffix:(0,g.jsxs)("div",{style:{display:"flex",gap:4},children:[S.article.rubbish&&(0,g.jsx)(r.Ay,{disabled:!0,style:{padding:0,fontSize:16},type:"text",children:(0,u.jY)().draft}),S.article.privacy&&(0,g.jsx)(ue.A,{style:{color:"rgb(119, 119, 119)",fontSize:16}})]}),maxLength:100,variant:"borderless",size:"large",placeholder:(0,u.jY)().inputArticleTitle,defaultValue:S.article.title?S.article.title:void 0,onChange:e=>{Z({title:e})},style:{fontSize:22,fontWeight:500,textOverflow:"ellipsis"}},a.article.version)}),(0,g.jsx)(c.A,{md:v?8:13,xxl:v?7:10,xs:24,sm:v?8:12,style:{display:"flex",alignItems:"center"},children:(0,g.jsxs)(o.A.Compact,{style:{display:"flex",width:"100%"},hidden:v,children:[(0,g.jsx)(h.A,{getPopupContainer:e=>e.parentElement,variant:"borderless",style:{minWidth:156,display:"flex",zIndex:20},size:"large",value:S.article.typeId,showSearch:{optionFilterProp:"children",filterOption:(e,t)=>{var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").includes(e)},filterSort:(e,t)=>{var a,n;return(null!==(a=null===e||void 0===e?void 0:e.label)&&void 0!==a?a:"").toLowerCase().localeCompare((null!==(n=null===t||void 0===t?void 0:t.label)&&void 0!==n?n:"").toLowerCase())}},onChange:e=>{Z({typeId:e})},options:S.typeOptions,placeholder:(0,u.jY)().pleaseChoose+(0,u.jY)()["admin.type.manage"]}),(0,g.jsx)(j,{ref:F,defaultValue:S.article.alias,onChange:e=>{Z({alias:e})},maxLength:256,size:"large",variant:"borderless",placeholder:(0,u.jY)().inputArticleAlias,style:{fontSize:16,minWidth:48,paddingLeft:0,textOverflow:"ellipsis"}},a.article.version)]})}),(0,g.jsxs)(c.A,{md:v?6:4,style:{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",right:0,top:0},children:[v&&(0,g.jsx)(c.A,{xxl:9,md:12,sm:18,xs:16,style:{padding:0},children:(0,g.jsx)($,{getContainer:()=>C.current,offline:t,fullScreen:v,data:S,onAiMessagesChange:e=>se(e),onSubmit:E})}),(0,g.jsx)(N,{initDigest:a.article.digest?a.article.digest:"",digestRef:I,article:S.article,saving:S.saving.rubbishSaving||S.saving.releaseSaving||S.saving.previewIng,tags:S.tags,containerRef:C,handleValuesChange:Z}),(0,g.jsx)(re,{fullScreen:v,fullScreenElement:C.current,onExitFullScreen:x,onFullScreen:A})]})]}),(0,g.jsx)(xe.A,{config:{lang:(0,k.BV)().lang,dark:(0,k.BV)().dark,onPreviewChange:e=>{(0,ee.ls)(ie,e)},preview:(()=>{const e=(0,ee.Pn)(ie);return null===e||void 0===e?window.innerWidth>600:e})(),colorPrimary:(0,k.BV)().colorPrimary,uploadConfig:{buildUploadUrl:e=>"/api/admin/upload?dir="+e,axiosInstance:M,formName:"imgFile",tryAppendBackendServerUrl:u.A_},aiConfig:{aiApiUri:"/api/admin/article/ai",configUrl:(0,u.dW)("/website/ai"),subject:S.article.title,aiProvider:S.aiProvider,aiMessages:S.aiMessages?S.aiMessages:[],onAiMessagesChange:se,drawerWidth:ye(),user:(0,Q.Nq)(),onSizeChange:fe,sessionId:S.article.logId?S.article.logId:0}},fullscreen:v,placeholder:(0,u.jY)().editorPlaceholder,height:`calc(100vh - ${30+(v?0:161)+4+(_.md?85:_.sm?123:163)}px)`,loadSuccess:()=>{},content:S.article.content?S.article.content:"",getContainer:()=>C.current,axiosInstance:M,value:S.article.markdown,onChange:e=>{(""!==e.markdown||""!==S.article.markdown&&void 0!==S.article.markdown&&null!==S.article.markdown)&&e.markdown!==S.article.markdown&&Z(e)}}),(0,g.jsx)(ge.A,{rubbish:S.article.rubbish,offline:t,lastUpdateDate:S.article.lastUpdateDate?S.article.lastUpdateDate:0,data:(0,je.b)(S.article.markdown),fullScreen:v,dark:(0,k.BV)().dark})]})]})}},84311:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(78816),s=a(45442),l=a(44414);const i=e=>{let{data:t,offline:a}=e;const i=(0,n.XW)()+t.includePagePath;return a?(0,l.jsx)(s.default,{}):(0,l.jsx)("iframe",{width:"100%",style:{border:0},height:1200,src:i})}},87085:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(9950),s=a(62215),l=a(65957),i=a(34647),r=a(29008),o=a(54209),d=a(78816),c=a(44414);const p=e=>{let{data:t}=e;const[a,p]=(0,n.useState)({synced:t.synced,syncing:!1}),m=(0,i.cz)(),[u,h]=l.Ay.useMessage({maxCount:3});return(0,c.jsxs)(c.Fragment,{children:[h,(0,c.jsx)(s.A,{style:{display:a.synced?"none":"inherit"},onClick:async()=>{p({synced:!1,syncing:!0});const{data:e}=await m.post("/api/admin/static-site/startSync");if(e.error)return u.error("\u540c\u6b65\u5931\u8d25 -> "+e.message),void p({synced:!1,syncing:!1});if(e.data)if(e.data.synced){u.success("\u540c\u6b65\u5b8c\u6210"),p({synced:e.data.synced,syncing:!1});const t=new URL(window.location.href);t.searchParams.set(d.Pe,(new Date).getTime()+""),window.location.replace(t.toString())}else u.info("\u540c\u6b65\u672a\u5b8c\u6210"),p({synced:!1,syncing:!1})},icon:a.syncing?(0,c.jsx)(r.A,{}):(0,c.jsx)(o.A,{})})]})}},92331:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(23072),s=a(83696),l=a(62618),i=a(65957),r=a(87094),o=a(51664),d=a(55352),c=a(78816),p=a(34647),m=a(23236),u=a(44414);const h={labelCol:{span:8},wrapperCol:{span:16}},x=e=>{let{offline:t}=e;const[a,x]=i.Ay.useMessage({maxCount:3}),g=(0,p.cz)();return(0,u.jsxs)(u.Fragment,{children:[x,(0,u.jsx)(m.A,{title:(0,c.jY)()["admin.changePwd"]}),(0,u.jsx)(r.A,{children:(0,u.jsx)(d.A,{style:{maxWidth:600},xs:24,children:(0,u.jsxs)(s.A,{...h,onFinish:e=>{return t=e,void g.post("/api/admin/user/updatePassword",t).then(async e=>{let{data:t}=e;t.error?await a.error(t.message):0===t.error&&await a.success(t.message)});var t},children:[(0,u.jsx)(s.A.Item,{name:"oldPassword",label:(0,c.jY)()["admin.oldPassword"],rules:[{required:!0}],children:(0,u.jsx)(l.A.Password,{})}),(0,u.jsx)(s.A.Item,{name:"newPassword",label:(0,c.jY)()["admin.newPassword"],rules:[{required:!0}],children:(0,u.jsx)(l.A.Password,{})}),(0,u.jsx)(n.A,{}),(0,u.jsx)(o.Ay,{disabled:t,type:"primary",htmlType:"submit",children:(0,c.jY)().submit})]})})})]})}},94916:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(9950),s=a(83331),l=a(83696),i=a(62618),r=a(65957),o=a(87094),d=a(23072),c=a(51664),p=a(1832),m=a(98706),u=a(55352),h=a(78816),x=a(71751),g=a(37596),j=a(34647),y=a(3383),f=a(23236),A=a(30723),v=a(19573),b=a(78453),w=a(985),k=a(48353),C=a(16471),V=a(46629),S=a(14737),Y=a(44414);const F={labelCol:{span:8},wrapperCol:{span:16}},I=e=>{const t={};for(const[a,n]of Object.entries(e.config))t[a]=n.value;return t},z=e=>{let{data:t,offline:a,offlineData:z}=e;const q=I(t),[B,P]=(0,n.useState)({config:t.config,dataMap:q,loading:!1}),[D]=l.A.useForm(),[R,T]=r.Ay.useMessage({maxCount:3}),U=e=>{P(t=>({...t,dataMap:{...t.dataMap,...e}}))},M=(e,t)=>"file"===t.type?(0,Y.jsx)(y.A,{style:{width:96,height:96},onSuccess:t=>((e,t)=>{B.dataMap[t]=e.data.url,P({...B,dataMap:B.dataMap})})(t,e),onError:e=>{R.error(e.message)},type:"image",uploadConfig:{buildUploadUrl:function(e){return`/api/admin/upload?dir=${e}`},formName:"imgFile",axiosInstance:L,tryAppendBackendServerUrl:h.A_},children:B.dataMap[e]&&B.dataMap[e].length>0?(0,Y.jsx)(p.A,{style:{borderRadius:8},preview:!1,height:96,width:96,src:B.dataMap[e]}):(0,Y.jsx)("p",{className:"ant-upload-drag-icon",style:{borderRadius:8,margin:0,width:96,height:96,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Y.jsx)(A.A,{style:{fontSize:36}})})}):"switch"===t.htmlElementType?(0,Y.jsx)(x.A,{}):"textarea"===t.htmlElementType||"large-textarea"===t.htmlElementType?(0,Y.jsx)(m.A,{rows:"large-textarea"===t.htmlElementType?20:5,placeholder:t.placeholder}):"hidden"===t.type?(0,Y.jsx)(i.A,{hidden:!0}):"colorPicker"===t.htmlElementType?(0,Y.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"},children:[(0,Y.jsx)(s.A,{value:B.dataMap[e],onChange:t=>{B.dataMap[e]=t.toHexString(),P({...B,dataMap:B.dataMap})},disabledAlpha:!0,presets:[{defaultOpen:!0,label:(0,h.im)(),colors:g.xg}]}),(0,Y.jsx)("span",{style:{paddingLeft:8},children:B.dataMap[e]})]}):(0,Y.jsx)(i.A,{type:t.type,placeholder:t.placeholder}),L=(0,j.cz)();return(0,n.useEffect)(()=>{const e=I(t);D.setFieldsValue(e),P({config:t.config,dataMap:e,loading:!1})},[t]),(0,Y.jsxs)(Y.Fragment,{children:[T,(0,Y.jsx)(f.A,{title:(0,h.jY)().templateConfig}),(0,Y.jsx)(o.A,{children:(0,Y.jsx)(u.A,{xs:24,style:{maxWidth:(()=>{for(const e of Object.values(B.config))if("yml"===e.type)return!0;return!1})()?900:600},children:(0,Y.jsxs)(l.A,{form:D,disabled:a||z,onFinish:()=>(async()=>{P(e=>({...e,loading:!0}));try{const{data:e}=await L.post("/api/admin/template/config",B.dataMap);e.error?R.error(e.message):0===e.error&&R.success(e.message)}finally{P(e=>({...e,loading:!1}))}})(),initialValues:B.dataMap,onValuesChange:(e,t)=>U(t),...F,children:[(()=>{const e=[];for(const[t,a]of Object.entries(B.config)){if("yml"===a.type)return(0,Y.jsxs)(C.A,{title:a.label,styles:{body:{padding:0}},style:{overflow:"hidden"},children:[(0,Y.jsx)(b.A,{height:520,onChange:e=>{U({[t]:e.markdown.replace("```yml\n","").replace("\n```","")})},fullscreen:!1,content:"",value:"```yml\n"+a.value+"\n```",config:{axiosInstance:L,dark:(0,k.BV)().dark,lang:(0,w.O2)(),preview:!1,uploadConfig:{buildUploadUrl:()=>"",formName:"",axiosInstance:L}}}),(0,Y.jsx)(S.A,{rubbish:!1,offline:!1,lastUpdateDate:0,data:(0,V.b)(a.value),fullScreen:!1,dark:(0,k.BV)().dark})]});const n=(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(l.A.Item,{label:a.label,name:t,style:{display:"hidden"===a.type?"none":""},children:M(t,a)},t),(0,Y.jsx)(v.A,{contentType:a.contentType,value:B.dataMap[t],initPreviewValue:a.previewValue?a.previewValue:""})]});e.push(n)}return e})(),(0,Y.jsx)(d.A,{}),(0,Y.jsx)(c.Ay,{loading:B.loading,disabled:a||z,type:"primary",htmlType:"submit",children:(0,h.jY)().submit})]})})})]})}}}]);